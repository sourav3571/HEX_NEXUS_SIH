(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["commits","lazy-react-partial-actions-survey","lazy-react-partial-enterprise-team","vendors-node_modules_react-relay_hooks_js-node_modules_color2k_dist_index_exports_import_es_m-05025c"],{45062:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var i=n(70170);function a(e=0,t={}){return(n,a,r)=>{if(!r||"function"!=typeof r.value)throw Error("debounce can only decorate functions");let l=r.value;r.value=(0,i.s)(l,e,t),Object.defineProperty(n,a,r)}}},66661:(e,t,n)=>{"use strict";function i(e){let t=e.parentNode;if(null===t||!(t instanceof HTMLElement))throw Error();let n=0;t instanceof HTMLOListElement&&1!==t.start&&(n=t.start-1);let i=t.children;for(let t=0;t<i.length;++t)if(i[t]===e)return n+t;return n}n.d(t,{P:()=>Quote,g:()=>MarkdownQuote});let a=0;function r(e){return e.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let l={INPUT:e=>e instanceof HTMLInputElement&&e.checked?"[x] ":"[ ] ",CODE(e){let t=e.textContent||"";return e.parentNode&&"PRE"===e.parentNode.nodeName?(e.textContent=`\`\`\`
${t.replace(/\n+$/,"")}
\`\`\`

`,e):t.indexOf("`")>=0?`\`\` ${t} \`\``:`\`${t}\``},P(e){let t=document.createElement("p");return t.textContent=(e.textContent||"").replace(/<(\/?)(pre|strong|weak|em)>/g,"\\<$1$2\\>"),t},STRONG:e=>`**${e.textContent||""}**`,EM:e=>`_${e.textContent||""}_`,DEL:e=>`~${e.textContent||""}~`,BLOCKQUOTE(e){let t=(e.textContent||"").trim().replace(/^/gm,"> "),n=document.createElement("pre");return n.textContent=`${t}

`,n},A(e){let t=e.textContent||"",n=e.getAttribute("href");return/^https?:/.test(t)&&t===n?t:n?`[${t}](${n})`:t},IMG(e){let t=e.getAttribute("alt")||"",n=e.getAttribute("src");if(!n)throw Error();let i=e.hasAttribute("width")?` width="${r(e.getAttribute("width")||"")}"`:"",a=e.hasAttribute("height")?` height="${r(e.getAttribute("height")||"")}"`:"";return i||a?`<img alt="${r(t)}"${i}${a} src="${r(n)}">`:`![${t}](${n})`},LI(e){let t=e.parentNode;if(!t)throw Error();let n="";if(!function(e){let t=e.childNodes[0],n=e.childNodes[1];return!!t&&e.childNodes.length<3&&("OL"===t.nodeName||"UL"===t.nodeName)&&(!n||n.nodeType===Node.TEXT_NODE&&!(n.textContent||"").trim())}(e))if("OL"===t.nodeName)if(a>0&&!t.previousSibling){let t=i(e)+a+1;n=`${t}\\. `}else n=`${i(e)+1}. `;else n="* ";let r=n.replace(/\S/g," "),l=(e.textContent||"").trim().replace(/^/gm,r),s=document.createElement("pre");return s.textContent=l.replace(r,n),s},OL(e){let t=document.createElement("li");return t.appendChild(document.createElement("br")),e.append(t),e},H1(e){let t=parseInt(e.nodeName.slice(1));return e.prepend(`${Array(t+1).join("#")} `),e},UL:e=>e};l.UL=l.OL;for(let e=2;e<=6;++e)l[`H${e}`]=l.H1;let Quote=class Quote{constructor(){this.selection=window.getSelection(),this.processSelectionText=e=>e}closest(e){let t=this.range.startContainer,n=t instanceof Element?t:t.parentElement;return n?n.closest(e):null}get active(){var e;return((null==(e=this.selection)?void 0:e.rangeCount)||0)>0}get range(){var e;return(null==(e=this.selection)?void 0:e.rangeCount)?this.selection.getRangeAt(0):new Range}set range(e){var t,n;null==(t=this.selection)||t.removeAllRanges(),null==(n=this.selection)||n.addRange(e)}set processSelectionTextFn(e){this.processSelectionText=e}get selectionText(){var e;return this.processSelectionText((null==(e=this.selection)?void 0:e.toString().trim())||"")}get quotedText(){return`> ${this.selectionText.replace(/\n/g,`
> `)}

`}select(e){this.selection&&(this.selection.removeAllRanges(),this.selection.selectAllChildren(e))}insert(e){e.value?e.value=`${e.value}

${this.quotedText}`:e.value=this.quotedText,e.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!1})),e.focus(),e.selectionStart=e.value.length,e.scrollTop=e.scrollHeight}};let MarkdownQuote=class MarkdownQuote extends Quote{constructor(e="",t){super(),this.scopeSelector=e,this.callback=t}get selectionText(){var e,t;if(!this.selection)return"";let n=function(e,t){let n=e.startContainer;if(!n||!n.parentNode||!(n.parentNode instanceof HTMLElement))throw Error("the range must start within an HTMLElement");let r=n.parentNode,l=e.cloneContents();if(t){let e=l.querySelector(t);e&&(l=document.createDocumentFragment()).appendChild(e)}a=0;let s=r.closest("li");if(r.closest("pre")){let e=document.createElement("pre");e.appendChild(l),(l=document.createDocumentFragment()).appendChild(e)}else if(s&&s.parentNode&&("OL"===s.parentNode.nodeName&&(a=i(s)),!l.querySelector("li"))){let e=document.createElement("li");if(!s.parentNode)throw Error();let t=document.createElement(s.parentNode.nodeName);e.appendChild(l),t.appendChild(e),(l=document.createDocumentFragment()).appendChild(t)}return l}(this.range,null!=(e=this.scopeSelector)?e:"");null==(t=this.callback)||t.call(this,n);let r=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.nodeName in l&&!function(e){if(e instanceof HTMLAnchorElement&&1===e.childNodes.length){let t=e.childNodes[0];if(t instanceof HTMLImageElement)return t.src===e.href}return!1}(e)&&("IMG"===e.nodeName||null!=e.firstChild||"INPUT"===e.nodeName&&e instanceof HTMLInputElement&&"checkbox"===e.type)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),s=[],o=r.nextNode();for(;o;)o instanceof HTMLElement&&s.push(o),o=r.nextNode();for(let e of(s.reverse(),s))e.replaceWith(l[e.nodeName](e));let d=document.body;if(!d)return"";let c=document.createElement("div");c.appendChild(n),c.style.cssText="position:absolute;left:-9999px;",d.appendChild(c);let u="";try{let e=document.createRange();e.selectNodeContents(c),this.selection.removeAllRanges(),this.selection.addRange(e),u=this.selection.toString(),this.selection.removeAllRanges(),e.detach()}finally{d.removeChild(c)}return this.processSelectionText(u.trim())}}},34784:(e,t,n)=>{e.exports=n(34052)},34052:(e,t,n)=>{"use strict";var i=n(9963),a=n(41241),r=n(90007).loadQuery,l=n(13635),s=n(50456),o=n(40121),d=n(7360),c=n(73720),u=n(42695),m=n(15940),h=n(39420),f=n(6505),p=n(71517),g=n(7058),y=n(53386),x=n(91529),b=n(69487);e.exports={ConnectionHandler:b.ConnectionHandler,applyOptimisticMutation:b.applyOptimisticMutation,commitLocalUpdate:b.commitLocalUpdate,commitMutation:b.commitMutation,graphql:b.graphql,readInlineData:b.readInlineData,requestSubscription:b.requestSubscription,EntryPointContainer:i,RelayEnvironmentProvider:s,ProfilerContext:l,fetchQuery:b.fetchQuery,loadQuery:r,loadEntryPoint:a,useFragment:d,useLazyLoadQuery:c,useEntryPointLoader:o,useQueryLoader:f,useMutation:u,usePaginationFragment:m,usePreloadedQuery:h,useRefetchableFragment:p,useRelayEnvironment:g,useSubscribeToInvalidationState:y,useSubscription:x}},81034:(e,t,n)=>{"use strict";n.d(t,{x:()=>h});var i=n(62559),a=n(34267),r=n(79634),l=n(57019),s=n(40104),o=n(96540),d=n(96760);let c={focusCommentComposer:"r"};var u=n(81156),m=n(20459);function h({commentBoxRef:e,markdownComposerRef:t,onChange:n,onCancel:h,referenceId:f,hasSingleKeyShortcutEnabled:p,insidePortal:g}){let[y,x]=(0,s.Fo)(u.t.localStorageKeys.issueNewComment("viewer",f),""),[b,C]=(0,o.useState)(y),v=(0,o.useMemo)(()=>(0,i.KG)(b),[b]),N=(0,r.X)(),j=void 0!==p?p:N?.current_user_settings?.use_single_key_shortcut||!1,{anyItemPickerOpen:_}=(0,a.t)(),w=(0,o.useCallback)(e=>{C(e),x(e)},[x]),k=(0,o.useCallback)(e=>{w(e),n(),""===e&&h()},[w,h,n]);(0,o.useImperativeHandle)(t,()=>({appendText:e=>{k(`${b}

${e}`)},setText:e=>{k(e)},focus:()=>{e.current?.focus()}}),[k,b,e]),(0,o.useEffect)(()=>C(b),[b,C]);let S=(0,o.useCallback)(t=>{if(!(!j||_())&&e&&e.current){t.preventDefault();let n=window.getSelection();if(n&&n.anchorNode){let e={anchorNode:n.anchorNode,range:n.getRangeAt(0)},t=n.anchorNode.parentElement,i=t?.closest((0,d.Sp)(d.mU.issueComment))??t?.closest((0,d.Sp)(d.mU.issueBody));if(i&&i instanceof HTMLDivElement){let t=(0,m.E)(i,e);w(`${t}`)}}e.current.scrollIntoView(),e.current.focus()}},[_,w,e,j]),E=(0,o.useCallback)(()=>{e.current?e.current.reset():C(""),x(void 0)},[e,x]);return(0,l._N)([c.focusCommentComposer],S,{triggerWhenInputElementHasFocus:!1,triggerWhenPortalIsActive:g}),{handleMarkdownBodyChanged:k,markdownValidationResult:v,markdownBody:b,resetMarkdownBody:E}}},61423:(e,t,n)=>{"use strict";n.d(t,{i:()=>a});var i=n(96901);function a(e,t,n=null,r="issue"){return e?i.k.repoArchived:t?i.k.issueLockedToCollaborators:n||i.k.canNotComment(r)}},75218:(e,t,n)=>{"use strict";var i=n(70103),a=n(40548),r=n(74848),l=n(78314),s=n(35898),o=n(75202),d=n(76648),c=n(96540),u=n(38621),m=n(88657);function h(){return(0,r.jsx)("div",{children:(0,r.jsxs)(m.E,{border:!1,spacious:!1,children:[(0,r.jsx)(m.E.Visual,{children:(0,r.jsx)(u.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"})}),(0,r.jsx)(m.E.Heading,{children:"Unable to load page."}),(0,r.jsxs)(m.E.Description,{children:[(0,r.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:"The page is unavailable due to a system error."}),(0,r.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:" Try reloading the page, or if the problem persists, contact support."}),(0,r.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:(0,r.jsx)("a",{href:"https://www.githubstatus.com",children:"GitHub status"})})]})]})})}try{h.displayName||(h.displayName="CommitErrorState")}catch{}function f(e){let t=(0,d.B)(),[n]=(0,c.useState)(t?.repo),[i]=(0,c.useState)(t?.currentUser);return(0,r.jsx)(o.t,{critical:!0,fallback:(0,r.jsx)(h,{}),children:(0,r.jsx)(s.Q,{user:i,children:(0,r.jsx)(l.d,{repository:n,children:e.children})})})}try{f.displayName||(f.displayName="App")}catch{}var p=n(70719),g=n(79472),y=n(18799),x=n(19976),b=n(53627),C=n(25407),v=n(30721),N=n(71315),j=n(83494),_=n(54571),w=n(70843),k=n(93653),S=n(34164),E=n(18312),L=n(69410),I=n(30729);function D(){return(0,r.jsxs)(L.A,{variant:"warning",className:"mb-4",children:[(0,r.jsx)(I.A,{icon:u.AlertIcon,className:"mr-2"}),(0,r.jsx)("span",{className:"overflow-hidden",children:"This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository."})]})}try{D.displayName||(D.displayName="SpoofedCommitWarningBanner")}catch{}var T=n(83878);function R({oid:e,repo:t}){return(0,T.N)(e,t.id)?(0,r.jsxs)(L.A,{className:"mb-4",children:[(0,r.jsx)("img",{src:"/images/modules/commit/flowers@2x.png",alt:"flower",width:"88px",height:"49px",className:"mr-4 mt-1 float-left"}),(0,r.jsx)("h2",{children:"Thanks for everything, Jim."}),(0,r.jsx)("p",{children:"We will miss you."})]}):null}try{R.displayName||(R.displayName="WeirichCommitBanner")}catch{}function A({oid:e,repo:t,commitBranchState:n}){return(0,r.jsxs)(r.Fragment,{children:[n.loading||0!==n.branches.length?null:(0,r.jsx)(D,{}),(0,r.jsx)(R,{oid:e,repo:t})]})}try{A.displayName||(A.displayName="CommitBanners")}catch{}var F=n(1117),M=n(46309),O=n(91747),$=n(73017),P=n(44185),B=n(81945),U=n(9583),H=n(55847),z=n(81246),K=n(87330),V=n(21654),G=n(94977),q=n(98783),W=n(3536),Q=n(68534),X=n(42257),Y=n(48926),J=n(43147),Z=n(76214),ee=n(10396);function et({data:e,repo:t,className:n}){return e.loading||0!==e.branches.length?(0,r.jsxs)("div",{className:(0,S.$)(n,"d-flex flex-items-center flex-wrap fgColor-muted gap-1"),children:[(0,r.jsx)(I.A,{className:"mr-1",icon:u.GitBranchIcon}),e.loading?(0,r.jsx)(B.O,{width:"60px",variant:"rounded",height:"22px"}):e.branches.map((n,i)=>(0,r.jsxs)("div",{children:[(0,r.jsx)(en,{branch:n,repo:t}),i!==e.branches.length-1?(0,r.jsx)("span",{className:"ml-1 user-select-none",children:"+"}):null]},n.branch))]}):null}function en({branch:e,repo:t}){let n=e.branch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.A,{className:"mx-1",href:(0,C.bSP)({repo:t,head:n}),children:e.branch}),e.prs.length>0?(0,r.jsxs)(r.Fragment,{children:["(",e.prs.map((t,n)=>(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)(ei,{pullRequest:t}),n!==e.prs.length-1?(0,r.jsx)(r.Fragment,{children:",\xa0"}):null]},`pr-${t.repo.ownerLogin}-${t.repo.name}-${t.number}`)),")"]}):null]})}function ei({pullRequest:e}){let{repo:t,number:n,showPrefix:i}=e,a=i?`${t.ownerLogin}/${t.name}`:"";return(0,r.jsxs)(z.A,{href:(0,C.oDn)({repo:t,number:n}),className:"fgColor-muted","data-hovercard-url":(0,C.i9S)({owner:t.ownerLogin,repo:t.name,pullRequestNumber:n}),children:[a,"#",n]})}try{et.displayName||(et.displayName="CommitBranchInfo")}catch{}try{en.displayName||(en.displayName="BranchFragment")}catch{}try{ei.displayName||(ei.displayName="PullRequestLink")}catch{}let ea={"commit-message-container":"CommitHeader-module__commit-message-container--y5fD_","commit-header-actions":"CommitHeader-module__commit-header-actions--Fj6HO","pusher-container":"CommitHeader-module__pusher-container--AoXTp CommitHeader-module__commit-message-container--y5fD_",PageHeader_TitleArea:"CommitHeader-module__PageHeader_TitleArea--aAkxF",PageHeader_Title:"CommitHeader-module__PageHeader_Title--W3dtK",browseFilesTooltip:"CommitHeader-module__browseFilesTooltip--q3qJZ",browseFilesButton:"CommitHeader-module__browseFilesButton--hQymw"};var er=n(66108);function el({commit:e,repo:t}){return(0,r.jsxs)(r.Fragment,{children:[`${e.parents.length} parent${e.parents.length>1||0===e.parents.length?"s":""} `,e.parents.map((e,n)=>(0,r.jsxs)(c.Fragment,{children:[0!==n?" + ":"",(0,r.jsx)(z.A,{to:(0,C.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:e})+new URL(N.fV.origin+N.fV.pathname+N.fV.search,N.fV.origin).search,as:er.N,className:"color-fg-default Link--inTextBlock","data-hotkey":function(e){switch(e){case 0:return"p";case 1:return"o";default:return}}(n),"data-hovercard-url":(0,C.fQd)({owner:t.ownerLogin,repo:t.name,commitish:e}),children:(0,Q.F)(e)})]},e))]})}try{el.displayName||(el.displayName="CommitParents")}catch{}var es=n(52446),eo=n(96665);function ed({data:e,repo:t,className:n}){if(0===e.tags.length)return null;let i=e.tags.length>2&&e.tags.length<25,a=e.tags.length>=25;return(0,r.jsxs)("div",{className:(0,S.$)(n,"d-flex flex-items-center flex-wrap gap-1"),children:[(0,r.jsx)(I.A,{className:"mr-2 fgColor-muted",icon:u.TagIcon}),(0,r.jsx)(z.A,{href:(0,C.cpj)({owner:t.ownerLogin,repo:t.name,tag:e.tags[0]}),className:"fgColor-default",children:e.tags[0]}),i?(0,r.jsx)(ec,{tags:e.tags,repo:t}):null,a?(0,r.jsx)(eu,{tags:e.tags,repo:t}):null,e.tags.length>1?(0,r.jsx)(z.A,{href:(0,C.cpj)({owner:t.ownerLogin,repo:t.name,tag:e.tags[e.tags.length-1]}),className:"fgColor-muted",children:e.tags[e.tags.length-1]}):null]})}function ec({tags:e,repo:t}){let[n,i]=(0,c.useState)(!1),a=(0,c.useRef)(null),l=(0,c.useCallback)(()=>{i(!0),requestAnimationFrame(()=>a.current?.focus())},[]);return n?(0,r.jsx)(r.Fragment,{children:e.slice(1,e.length-1).map((e,n)=>(0,r.jsx)(z.A,{ref:0===n?a:null,href:(0,C.cpj)({owner:t.ownerLogin,repo:t.name,tag:e}),className:"fgColor-muted mx-1",children:e},e))}):(0,r.jsx)(K.K,{"aria-label":"Show more tags",tooltipDirection:"s",icon:u.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:l})}function eu({tags:e,repo:t}){let[n,i]=(0,c.useState)(!1),a=(0,c.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K.K,{"aria-label":"Show all tags",tooltipDirection:"s",icon:u.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:()=>i(!0),ref:a}),n&&(0,r.jsx)(eo.l,{title:`${e.length} tags`,onClose:()=>i(!1),returnFocusRef:a,width:"medium",height:e.length>=12?"small":"auto",renderBody:()=>(0,r.jsx)(es.l,{className:"overflow-y-auto py-2","data-testid":"tag-dialog-list",children:e.map(e=>(0,r.jsx)(es.l.LinkItem,{href:(0,C.cpj)({owner:t.ownerLogin,repo:t.name,tag:e}),children:e},e))})})]})}try{ed.displayName||(ed.displayName="CommitTagInfo")}catch{}try{ec.displayName||(ec.displayName="ExpandedTags")}catch{}try{eu.displayName||(eu.displayName="CommitTagsDialog")}catch{}let em=(0,c.memo)(eh);function eh({commit:e,commitInfo:t,repo:n}){let i=(0,c.useRef)(null),a=(0,W.I)(`${(0,C.$Qz)({owner:n.ownerLogin,repo:n.name,commitish:e.oid})}/deferred_commit_data`);return(0,r.jsxs)(U.z,{children:[(0,r.jsx)(U.z.TitleArea,{variant:"large",className:ea.PageHeader_TitleArea,children:(0,r.jsxs)(U.z.Title,{as:"h1",className:(0,S.$)("f2",ea.PageHeader_Title),children:["Commit ",(0,r.jsx)("span",{className:"text-mono bgColor-muted rounded p-1",children:(0,Q.F)(e.oid)})]})}),(0,r.jsx)(U.z.Actions,{className:(0,S.$)(ea["commit-header-actions"]),children:(0,r.jsxs)("div",{className:"d-flex gap-2 flex-items-center flex-md-justify-end",children:[(0,r.jsx)(ep,{}),(0,r.jsx)(G.A,{text:"Browse the repository at this point in the history",direction:"sw",className:(0,S.$)("d-none d-md-flex",ea.browseFilesTooltip),children:(0,r.jsx)(H.Q,{as:z.A,href:(0,C.IO9)({repo:n,action:"tree",commitish:e.oid}),leadingVisual:u.FileCodeIcon,className:ea.browseFilesButton,children:"Browse files"})}),(0,r.jsx)(K.K,{as:z.A,href:(0,C.IO9)({repo:n,action:"tree",commitish:e.oid}),icon:u.FileCodeIcon,"aria-label":"Browse files",className:"d-flex d-md-none"})]})}),(0,r.jsx)(U.z.Description,{children:(0,r.jsxs)("div",{className:"d-flex flex-column gap-2 width-full",children:[(0,r.jsx)(Y.j,{commit:e,repo:n,settings:{fontColor:"fg.default",avatarSize:20,fontWeight:"bold"},textVariant:"muted",children:(0,r.jsx)(ef,{deferredData:a,oid:e.oid,repo:n})}),(0,r.jsxs)(Z.Z,{className:"pt-0",children:[(e.shortMessageMarkdown||e.bodyMessageHtml)&&(0,r.jsxs)("div",{className:(0,S.$)(ea["commit-message-container"]),children:[e.shortMessageMarkdown&&(0,r.jsx)($.JR,{ref:i,html:e.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word text-mono"}),e.bodyMessageHtml&&(0,r.jsx)($.JR,{html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container f6 wb-break-word text-mono mt-2"})]}),(0,r.jsxs)("div",{className:"p-2 d-flex gap-2 flex-column flex-md-row flex-justify-between",children:[(0,r.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,r.jsx)(et,{data:t,repo:n}),t.tags.length>0&&(0,r.jsx)("span",{className:"px-2",children:"\xb7"}),(0,r.jsx)(ed,{data:t,repo:n})]}),(0,r.jsxs)("pre",{className:"color-fg-muted d-flex flex-items-center",children:[(0,r.jsx)(el,{commit:e,repo:n})," commit ",(0,r.jsx)("span",{className:"fgColor-default",children:(0,Q.F)(e.oid)}),(0,r.jsx)(J.w,{sha:e.oid,direction:"sw"})]})]}),(0,O.u)("show_pusher_on_commit_detail")&&e.pusher&&(0,r.jsx)("div",{className:(0,S.$)(ea["pusher-container"]),children:(0,r.jsx)(Y.C,{commit:e,repo:n,textVariant:"muted"})})]})]})})]})}function ef({deferredData:e,oid:t,repo:n}){let{helpUrl:i}=(0,q.D)(),a=void 0===e,l="";try{l=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)(B.O,{className:"ml-2",variant:"rounded",width:"62px"}),e?.statusCheckStatus&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"d-flex ml-2 mr-1",children:"\xb7"}),(0,r.jsx)(X.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:l,repo:n}),e?.signatureInformation&&e?.verifiedStatus!=="unsigned"&&(0,r.jsx)("span",{className:"d-flex ml-2",children:"\xb7"})]}),e?.signatureInformation&&(0,r.jsx)("div",{className:"ml-2",children:(0,r.jsx)(P.h,{commitOid:t,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:{helpUrl:i,...e.signatureInformation}})})]})}function ep(){return(0,O.u)("diff_ux_refresh_beta")?(0,r.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,r.jsx)(V.A,{variant:"success",children:"Preview"}),(0,r.jsx)(z.A,{href:"https://gh.io/new-commit-details-feedback",target:"_blank",rel:"noopener noreferrer",className:"no-wrap f5 text-normal d-none d-sm-block",children:"Give feedback"})]}):null}try{em.displayName||(em.displayName="CommitHeader")}catch{}try{eh.displayName||(eh.displayName="CommitHeaderUnmemoized")}catch{}try{ef.displayName||(ef.displayName="DeferredCommitHeaderData")}catch{}try{ep.displayName||(ep.displayName="Feedback")}catch{}function eg({unavailableReason:e,commit:t,commitInfo:n}){let i=(0,l.t)(),a=ey[e];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.B,{"data-hpc":!0,padding:{narrow:"normal",regular:"spacious"},children:(0,r.jsx)(em,{commit:t,commitInfo:n,repo:i})}),(0,r.jsxs)(m.E,{children:[(0,r.jsx)(m.E.Visual,{children:a.visual}),(0,r.jsx)(m.E.Heading,{children:a.heading}),(0,r.jsx)(m.E.Description,{children:a.description}),a.secondaryAction]})]})}let ey={corrupt:{visual:(0,r.jsx)(u.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,r.jsx)(m.E.SecondaryAction,{href:(0,C.y2B)(),children:"Please contact support for more information"})},"missing commits":{visual:(0,r.jsx)(u.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,r.jsx)(m.E.SecondaryAction,{href:(0,C.y2B)(),children:"Please contact support for more information"})},timeout:{visual:(0,r.jsx)(u.HourglassIcon,{}),heading:"Sorry, this diff is taking too long to generate.",description:"It may be too large to display on GitHub."},"too busy":{visual:(0,r.jsx)(u.HourglassIcon,{}),heading:"Sorry, this diff is temporarily unavailable due to heavy server load.",description:"Please try again later."}};try{eg.displayName||(eg.displayName="CommitUnavailable")}catch{}var ex=n(35311),eb=n(73189),eC=n(79634),ev=n(65591),eN=n(96379);let ej={extraDiffEntries:[],loading:!0,error:!1};var e_=n(24815);let ew={defaultStyles:"DiffFind-module__defaultStyles--HqMRo"},ek=(0,c.memo)(function({currentPathDigestIndex:e,searchTerm:t,searchResults:n,setSearchTerm:i,focusedSearchResult:a,currentIndex:l,setCurrentIndex:s,setFocusedSearchResult:o,scrollDiffCellIntoView:d}){let m=(0,c.useRef)([]),h=(0,c.useRef)(0),f=(0,r.jsxs)("div",{className:"d-flex flex-row flex-justify-center flex-items-center",children:[t&&(0,r.jsxs)("span",{className:"text-small fgColor-subtle mx-2 text-center",children:[0===n.size||void 0===a?0:l+1,"/",h.current]}),!t&&(0,r.jsx)("span",{className:"text-small fgColor-subtle mx-2 text-center pr-4",children:"\xa0"}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K.K,{size:"small",variant:"invisible",onClick:()=>{p(-1)},icon:u.ChevronUpIcon,"aria-label":"Up","data-testid":"up-search"}),(0,r.jsx)(K.K,{size:"small",variant:"invisible",onClick:()=>{p(1)},icon:u.ChevronDownIcon,"aria-label":"Down","data-testid":"down-search"})]})]}),p=t=>{if(void 0===a||""===a.pathDigest){e.current=0,o({pathDigest:m.current[0]??"",indexWithinDigest:0});return}1===t?(s(l===h.current-1?0:l+1),a.indexWithinDigest===n.get(a.pathDigest).length-1?(e.current=e.current+1,e.current===m.current.length&&(e.current=0),a.pathDigest=m.current[e.current]??"",a.indexWithinDigest=0):a.indexWithinDigest=a.indexWithinDigest+1):(s(0===l?h.current-1:l-1),0===a.indexWithinDigest?(e.current=e.current-1,-1===e.current&&(e.current=m.current.length-1),a.pathDigest=m.current[e.current]??"",a.indexWithinDigest=n.get(a.pathDigest).length-1):a.indexWithinDigest=a.indexWithinDigest-1),o(a)};return(0,c.useEffect)(()=>{m.current=Array.from(n.keys()),e.current=0,o({pathDigest:m.current[0]??"",indexWithinDigest:0});let t=0;for(let e of n.values())t+=e.length;h.current=t},[e,n,n.size,o]),(0,c.useEffect)(()=>{n.size>0&&void 0!==a&&d(a)},[n,a,l]),(0,r.jsxs)("div",{className:ew.defaultStyles,children:[(0,r.jsx)(j.ak,{commands:{"pull-requests-diff-view:jump-to-next-result-alternate":()=>p(1),"pull-requests-diff-view:jump-to-previous-result-alternate":()=>p(-1)}}),(0,r.jsx)(j.tL,{commands:{"pull-requests-diff-view:jump-to-next-result":()=>p(1),"pull-requests-diff-view:jump-to-previous-result":()=>p(-1)},children:(0,r.jsx)(e_.A,{className:"border-0 box-shadow-none",style:{width:"100%"},validationStatus:h.current>1e3?"error":void 0,type:"text",leadingVisual:()=>(0,r.jsx)(I.A,{icon:u.SearchIcon,"aria-hidden":"true"}),autoComplete:"off",name:"Find in commit input","aria-label":"Search within code",placeholder:"Search within code",value:t,onChange:t=>{t.target.value?(i(t.target.value),s(0)):(i(""),o(void 0),e.current=0)},block:!0,trailingAction:f})})]})});try{ek.displayName||(ek.displayName="DiffFind")}catch{}function eS(e,t){return`${"left"===t?"L":"R"}${e}`}function eE(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function eL(e){let t=eS(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=eS(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}function eI(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;(0,b.Zu)(t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}var eD=n(7808),eT=n(4788);function eR({data:e}){let{query:t,diffEntryInfo:n,currentDiffEntryData:i}=e;return{matchingDiffs:i?function(e,t,n){if(0===n.size)return new Map;let i=n.size>=200,a={},r=e.reduce((n,i,r)=>{if(a[r])return n;a[r]=!0;let l=eM(t,[e[r]]),s=l.next();for(;!s.done&&n.size<200;){let{resultsWithinDiff:t}=s.value;n.set(e[r]?.pathDigest??"",t),s=l.next()}return n},new Map);if(r.size<200&&i){let n=eM(t,e,r.size),i=n.next();for(;!i.done&&r.size<200;){let{resultsWithinDiff:t,diff:a}=i.value;r.set(e[a]?.pathDigest??"",t),i=n.next()}}return r}(n,eF(t),i):function(e,t){let n=new Map,i=eM(t,e),a=i.next();for(;!a.done&&n.size<200;){let{resultsWithinDiff:t,diff:r}=a.value;n.set(e[r]?.pathDigest??"",t),a=i.next()}return n}(n,eF(t)),query:t}}let eA={Text:"Text"};function eF(e){let t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{kind:eA.Text,regexp:RegExp(t,"gi")}}function*eM(e,t,n=0){for(let i=n;i<t.length;i++){let n=t[i],a=[],r=0;for(let l=0;l<n.diffLines.length;l++){let s,o;s=t[i]?.diffLines[l]?.type==="HUNK"?n.diffLines[l]?.text:n.diffLines[l]?.text?.substring(1);let d=n.diffLines[l];for(;s&&null!==(o=e.regexp.exec(s));){let e=o[0],t=o.index;a.push({pathDigest:n.pathDigest,indexWithinPathDigest:r,matchContent:e,column:t,diffLineNumIndex:l,isHunk:d?.type==="HUNK",hunkLineNumber:d?.blobLineNumber??-1,leftLineNumber:d?.type!=="ADDITION"?d?.left??-1:-1,rightLineNumber:d?.type!=="DELETION"?d?.right??-1:-1,columnEnd:t+e.length,text:s}),r++}}0!==a.length&&(yield{diff:i,resultsWithinDiff:a})}}var eO=n(39820);function e$(){let[e,t]=(0,c.useState)(!1);return(0,r.jsx)("div",{className:e?"":"pt-4",children:!e&&(0,r.jsx)(eO.l,{title:"Some content is hidden",description:(0,r.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"Large Commits have some content hidden by default. Use the searchbox below for content that may be hidden."}),variant:"warning",onDismiss:()=>t(!0)})})}try{e$.displayName||(e$.displayName="VirtualizedBanner")}catch{}var eP=n(2087),eB=n(59523),eU=n(28014),eH=n(30617),ez=n(49245),eK=n(37285);async function eV(e,t,n){let i=await (0,eN.Sr)(`${t}?pathDigest=${n}${function(e){let t="";for(let n=0;n<e.length;n++)t+=`&lineRanges[]=${JSON.stringify(e[n])}`;return t}(e)}`);if(i.ok)return await i.json()??void 0}async function eG({repo:e,sha1:t,sha2:n,entry:i}){let a=await (0,eN.Sr)((0,eK.RD)((0,C.uxJ)({owner:e.ownerLogin,repo:e.name,entry:i,sha1:t,sha2:n})));if(a.ok){let e=await a.json();return(0,eK.Av)(e),e.diffLines}throw Error("error fetching diff lines.")}var eq=n(13083),eW=n(60745),eQ=n(21537),eX=n(11683);let eY={ArrowLeft:eX.z0.ArrowHorizontal,ArrowDown:eX.z0.ArrowVertical,ArrowUp:eX.z0.ArrowVertical,ArrowRight:eX.z0.ArrowHorizontal,h:eX.z0.HL,j:eX.z0.JK,k:eX.z0.JK,l:eX.z0.HL,a:eX.z0.AD,s:eX.z0.WS,w:eX.z0.WS,d:eX.z0.AD,Tab:eX.z0.Tab,Home:eX.z0.HomeAndEnd,End:eX.z0.HomeAndEnd,PageUp:eX.z0.PageUpDown,PageDown:eX.z0.PageUpDown,Backspace:eX.z0.Backspace},eJ=eX.z0.ArrowAll|eX.z0.PageUpDown|eX.z0.HomeAndEnd|eX.z0.AD,eZ={ghostUser:{displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"}},e0=(0,c.createContext)(null);function e1({children:e,...t}){let n=!!t.commentingImplementation,i=!!t.markerNavigationImplementation;if(t.commentingEnabled!==n&&t.commentingEnabled!==i)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let a=t?.ghostUser??eZ.ghostUser,l=(0,c.useMemo)(()=>({ghostUser:a,...t}),[...Object.values(t),a]);return(0,r.jsx)(e0.Provider,{value:l,children:e})}function e2(){let e=(0,c.useContext)(e0);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}try{e0.displayName||(e0.displayName="DiffContext")}catch{}try{e1.displayName||(e1.displayName="DiffContextProvider")}catch{}var e4=n(4559),e3=n(46996),e5=n(18651);let e8={Failure:"FAILURE",Notice:"NOTICE",Warning:"WARNING"},e9="empty-diff-line";function e6(e,t,n){return"left"===n?!tt(e)&&e.left===t:!tt(e)&&(0,eq.XU)(e.type)===n&&e.right===t}function e7(e,t,n){let i=`-${tt(t)||"number"!=typeof t.left?"empty":t.left}`,a=n?`-${tt(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${a}`}function te(e,t){return`${e}-${t}`}function tt(e){return!!e&&e===e9}function tn(e){return"CONTEXT"===e.type}function ti(e,t,n=!1){return n?function(e,t){let n;switch(t){case"ADDITION":n=["+"];break;case"DELETION":n=["-"];break;case"CONTEXT":n=[" "];break;case"INJECTED_CONTEXT":n=[" ","~"]}if(void 0===n||0===n.length||n.every(t=>!e.startsWith(t)))return[e,void 0];let i=e[0];return[e.substring(1),i]}(e,t):function(e,t){let n;switch(t){case"ADDITION":n="+";break;case"DELETION":n="-";break;case"CONTEXT":case"INJECTED_CONTEXT":n=" "}if(!n||!e.startsWith(n))return[e,void 0];let i=e[0];return[e.substring(1),i]}(e,t)}function ta(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function tr(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function tl({line:e,range:t,fileAnchor:n}){let i,{origin:a,pathname:r}=window.location;if(e){let a=tr(e)?e.left:e.right;i=t&&a&&t.startLineNumber<=a&&t.endLineNumber>=a?eL(t):function(e,t){let n=tr(e),i=n?e.left:e.right,a=n?"left":"right";if(null!==i)return eL({diffAnchor:t,endLineNumber:i,endOrientation:a,startLineNumber:i,startOrientation:a,firstSelectedLineNumber:i,firstSelectedOrientation:a})}(e,n)}else t&&(i=eL(t));if(i)return`${a}${r}#${i}`}function ts({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let a=e?`${(0,e5.U0)()?"\u2318":"Ctrl + "}`:"";return n&&(a+=`${(0,e5.U0)()?"\u2325":"Alt + "}`),t&&(a+=`${(0,e5.U0)()?"\u21E7":"Shift + "}`),a+=i}function to({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let a="";return e&&(a+=(0,e5.U0)()?"Command+":"Control+"),n&&(a+=(0,e5.U0)()?"Option+":"Alt+"),t&&(a+="Shift+"),a+=i}let td=["ADDITION","DELETION","CONTEXT"],tc=e=>e?e.filter(e=>!tt(e)).map(e=>{let[t]=ti(ta(e.html),e.type);return t}).join(`
`):"";function tu(e,t=!1,n=!1){let i;switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return n?`color-mix(in oklab, var(--bgColor-accent-emphasis) 8%, ${i})`:i}function tm({selectedDiffRowRange:e,leftLines:t,rightLines:n,isNumberCell:i}){let a=!!n,{startOrientation:r,endOrientation:l}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation&&!i)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let s=u(r).findIndex(t=>e6(t,e.startLineNumber,e.startOrientation)),o=u(l).findIndex(t=>e6(t,e.endLineNumber,e.endOrientation)),d=s>=0&&o>=0;function c(e){if(!d||tt(e))return!1;let t=u((0,eq.XU)(e.type)).indexOf(e);return t>=s&&t<=o}function u(e){var i;return a&&"left"!==("string"==typeof(i=e)?i:(0,eq.XU)(i.type))?n:t}let m=u("left").filter(e=>c(e)),h=u("right").filter(e=>c(e));return{isRowSelected:c,selectedRightLines:h,selectedLeftLines:m}}var th=n(88431);let tf=e=>{let t=(0,c.useRef)(e);return(0,th.N)(()=>(t.current=e,()=>t.current=null),[e]),(0,c.useCallback)((...e)=>t.current?.(...e),[])},tp=(0,c.createContext)(null);function tg(){let e=(0,c.useContext)(tp);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}function ty(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,e4.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,e4.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function tx({children:e}){let t=(0,c.useRef)(new Map),n=tf((e,n)=>{if(!e)return;let i=e.diffAnchor,a=t.current.get(i);if(!a)return;let{leftLines:r,rightLines:l}=function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(e9);for(;n.length<t.length;)n.push(e9)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}(a);return tm({selectedDiffRowRange:e,leftLines:r,rightLines:l,isNumberCell:n})}),[i,a]=(0,c.useState)(()=>(function(e){let t=function(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}})(N.fV.hash)),[l,s]=(0,c.useState)(()=>{if(i){let e=n(i);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),o=tf((e,t)=>{let i=n(e,t),a=i?{leftLines:i.selectedLeftLines,rightLines:i.selectedRightLines||[]}:{leftLines:[],rightLines:[]};(0,e3.A)(l,a)||s(a)}),d=tf((e,t,n,r,l)=>{if(!t||!n)return;let s=r&&i&&i.diffAnchor===e?t<=i.firstSelectedLineNumber?{...i,startLineNumber:t,startOrientation:n,endLineNumber:i.firstSelectedLineNumber,endOrientation:i.firstSelectedOrientation}:{...i,startLineNumber:i.firstSelectedLineNumber,startOrientation:i.firstSelectedOrientation,endLineNumber:t,endOrientation:n}:{diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:t,startOrientation:n,firstSelectedLineNumber:t,firstSelectedOrientation:n};ty(s),(l||r)&&a(s),o(s,l),eI(eL(s))}),u=tf(e=>{ty(e),a(e),o(e),eI(eL(e))}),m=tf(({diffAnchor:e,startGridCell:t,endGridCell:n,focusedGridCell:i})=>{u({diffAnchor:e,endLineNumber:n.lineNumber,endOrientation:n.orientation,firstSelectedLineNumber:i.lineNumber,firstSelectedOrientation:i.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),h=tf(()=>{i&&(a(void 0),o(void 0),(0,e4.i)("Selection Cleared"),(0,b.K3)())}),f=tf((e,n)=>{t.current.set(e,n),i?.diffAnchor===e&&o(i)}),p=tf(e=>t.current.get(e)),g=(0,c.useMemo)(()=>({selectedDiffRowRange:i,updateSelectedDiffRowRange:d,clearSelectedDiffRowRange:h,replaceSelectedDiffRowRange:u,replaceSelectedDiffRowRangeFromGridCells:m,updateDiffLines:f,selectedDiffLines:l,getDiffLinesFromLineRange:n,getDiffLinesByDiffAnchor:p}),[i,d,h,u,m,l,f,n,p]);return(0,r.jsx)(tp.Provider,{value:g,children:e})}try{tp.displayName||(tp.displayName="SelectedDiffRowRangeContext")}catch{}try{tx.displayName||(tx.displayName="SelectedDiffRowRangeContextProvider")}catch{}let tb={finalLineId:"final-hunk-header-line"};function tC(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function tv(e,t){if("HUNK"===e.type&&e.__id===tb.finalLineId)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(tC).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function tN(e){let t,n=[],i=0;for(let a=1;a<e.length;a++){let r=e[a];if(r&&!tt(r)&&(t=r,"HUNK"===r.type)){let t,l=e[i];if(!l||tt(l))continue;let s=a-1;for(;(!t||tt(t))&&(t=e[s],-1!=--s););t&&!tt(t)&&n.push({startBlobLineNumber:l.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),r.__id===tb.finalLineId&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:r.blobLineNumber+20}),i=a;continue}}if(t&&"HUNK"!==t.type){let a=e[i];a&&!tt(a)&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}let tj={tableLayoutFixed:"DiffLines-module__tableLayoutFixed--InKAb",compact:"DiffLines-module__compact--emLm8"};var t_=n(12004);let tw={gridColumnTemplate:"HiddenDiffPatch-module__gridColumnTemplate--UvUAt"};function tk({children:e,helpText:t,helpUrl:n,onLoadDiff:i,diffAnchor:a}){let l=n&&t,[s,o]=(0,c.useState)("initial"),d=(0,c.useCallback)(async()=>{try{o("loading"),await i()}catch{o("error")}},[i,o]);return(0,r.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":a,children:(0,r.jsxs)("div",{className:(0,S.$)(tw.gridColumnTemplate),children:[(0,r.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,r.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===s&&(0,r.jsx)(t_.A,{size:"medium"}),"error"===s&&(0,r.jsx)(u.AlertIcon,{size:24}),"initial"===s&&(0,r.jsx)(H.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{d(),o("loading")},children:"Load Diff"}),"error"===s?(0,r.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,r.jsx)(z.A,{inline:!0,as:"button",onClick:()=>{d(),o("loading")},children:"Retry"})]}):(0,r.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,l&&(0,r.jsx)(z.A,{inline:!0,href:n,children:t})]})]})]})})}try{tk.displayName||(tk.displayName="HiddenDiffPatch")}catch{}var tS=n(12918);let tE=(0,c.createContext)(null);function tL({children:e,currentHunk:t,diffEntryId:n,diffLine:i,fileAnchor:a,fileLineCount:l,filePath:s,hasHiddenUnicodeCharacters:o,isLeftSide:d,isRowSelected:u=!1,isSplit:m,modifiedLineThreads:h,nextHunk:f,originalLineThreads:p,previousHunk:g,rowId:y,diffContext:x,setInGridMode:b}){let C=(0,c.useMemo)(()=>({currentHunk:t,diffEntryId:n,diffLine:i,fileAnchor:a,fileLineCount:l,filePath:s,hasHiddenUnicodeCharacters:o,isLeftSide:d,isRowSelected:u,isSplit:m,modifiedLineThreads:h,modifiedLineHasThreads:h&&h.length>0,nextHunk:f,originalLineThreads:p,originalLineHasThreads:p&&p.length>0,previousHunk:g,rowId:y,diffContext:x,setInGridMode:b}),[t,n,i,a,l,s,o,d,u,m,h,f,p,g,y,x,b]);return(0,r.jsx)(tE.Provider,{value:C,children:e})}function tI(){let e=(0,c.useContext)(tE);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}try{tE.displayName||(tE.displayName="DiffLineContext")}catch{}try{tL.displayName||(tL.displayName="DiffLineContextProvider")}catch{}function tD(e,t){return e?.threads?.flatMap(e=>{let n=e?.id,i=e?.commentsData?.comments?.[0]?.author??t,a=e?.commentsData?.totalCount??0,r=e?.commentsData?.__id;return n&&i?[{id:n,author:i,commentCount:a,commentsConnectionId:r,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}var tT=n(82678),tR=n(35750),tA=n(18150),tF=n(85242),tM=n(88243),tO=n(16213),t$=n(50467),tP=new WeakMap,tB=new WeakMap,tU=new WeakMap,tH=new WeakMap,tz=new WeakMap,tK=new WeakMap,tV=new WeakSet,tG=new WeakSet,tq=new WeakSet,tW=new WeakSet,tQ=new WeakSet,tX=new WeakSet,tY=new WeakSet,tJ=new WeakSet,tZ=new WeakSet,t0=new WeakSet;let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n,i=(0,tR._)(this,tB).get(this.focusedGridCell?.cellId??"");if(!i)return;let[a]=i,[,r]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&(0,tM._)(this,tY,t9).call(this,a)&&(0,tR._)(this,tH)&&(r=(0,tR._)(this,tH),(0,tF._)(this,tH,void 0)),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=(0,tR._)(this,tP).length-1,t=(0,tR._)(this,tP)[e]?.length;t&&(n=(0,tR._)(this,tP)[e]?.[t-1]);break}case"ArrowUp"===e:(0,tM._)(this,tY,t9).call(this,a-1)?((0,tM._)(this,t0,ne).call(this,r),n=(0,tR._)(this,tP)[a-1]?.[0]):n=(0,tR._)(this,tP)[a-1]?.[r];break;case"ArrowDown"===e:(0,tM._)(this,tY,t9).call(this,a+1)?((0,tM._)(this,t0,ne).call(this,r),n=(0,tR._)(this,tP)[a+1]?.[0]):n=(0,tR._)(this,tP)[a+1]?.[r];break;case"ArrowLeft"===e:n=(0,tR._)(this,tP)[a]?.[r-1];break;case"ArrowRight"===e:n=(0,tR._)(this,tP)[a]?.[r+1];break;case"PageUp"===e:{(0,tM._)(this,t0,ne).call(this,r);let e=(0,tM._)(this,tq,t4).call(this,a);n=(0,tR._)(this,tP)[e]?.[0];break}case"PageDown"===e:{(0,tM._)(this,t0,ne).call(this,r);let e=(0,tM._)(this,tG,t2).call(this,a),t=0;e||(e=(0,tR._)(this,tP).length-1,t=r),n=(0,tR._)(this,tP)[e]?.[t];break}case"Home"===e:n=(0,tR._)(this,tP)[a]?.[0];break;case"End"===e:{let e=(0,tR._)(this,tP)[a];if(e&&!(0,tM._)(this,tY,t9).call(this,a)){let t=e.length-1;n=(0,tR._)(this,tP)[a]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){(0,tM._)(this,tW,t3).call(this,e,t)}focusFirstGridCell(e){e&&(0,tR._)(this,tB).get(e)?this.focusGridCell(e):this.focusedGridCell=(0,tR._)(this,tP)[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=(0,tR._)(this,tB).get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=(0,tR._)(this,tP)[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,a=(0,tR._)(this,tB).get(i?.cellId??"");if(!a)return;let[r,l]=a;if("ArrowUp"===e){let e=r-1;for(;!t&&e>=0;)t=(0,tM._)(this,tV,t1).call(this,{rowIndex:e,columnIndex:l}),e--}if("ArrowDown"===e){let e=r+1;for(;!t&&e<(0,tR._)(this,tP).length;)t=(0,tM._)(this,tV,t1).call(this,{rowIndex:e,columnIndex:l}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=(0,tR._)(this,tB).get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<=1&&!(0,tR._)(this,tK)?(0,tR._)(this,tP)[e]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&(0,tR._)(this,tK)?(0,tR._)(this,tP)[e]?.[this.focusedGridCell.columnIndex+2]:(0,tR._)(this,tP)[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=(0,tR._)(this,tP).find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=(0,tR._)(this,tP).slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=te(e7((0,tR._)(this,tz),e,t),0),a=(0,tR._)(this,tB).get(i);if(!a)return!1;let[r]=a;return!!n===(0,tM._)(this,tY,t9).call(this,r)}constructor(e,t,n,i,a){(0,tO._)(this,tV),(0,tO._)(this,tG),(0,tO._)(this,tq),(0,tO._)(this,tW),(0,tO._)(this,tQ),(0,tO._)(this,tX),(0,tO._)(this,tY),(0,tO._)(this,tJ),(0,tO._)(this,tZ),(0,tO._)(this,t0),(0,tA._)(this,tP,{writable:!0,value:[]}),(0,tA._)(this,tB,{writable:!0,value:new Map}),(0,tA._)(this,tU,{writable:!0,value:new Set}),(0,t$._)(this,"focusedGridCell",void 0),(0,t$._)(this,"lastSelectedGridCell",void 0),(0,tA._)(this,tH,{writable:!0,value:void 0}),(0,tA._)(this,tz,{writable:!0,value:void 0}),(0,tA._)(this,tK,{writable:!0,value:void 0}),(0,tF._)(this,tz,e),(0,tF._)(this,tK,t),(0,tM._)(this,tW,t3).call(this,n,i),this.focusFirstGridCell(a)}};function t1({rowIndex:e,columnIndex:t}){let n=(0,tR._)(this,tP)[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&(0,tR._)(this,tK):return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!(0,tR._)(this,tK):return n?.[t+1];default:return n?.[t]}}function t2(e){return Array.from((0,tR._)(this,tU)).sort((e,t)=>e-t).find(t=>t>e)}function t4(e){return Array.from((0,tR._)(this,tU)).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}function t3(e,t){(0,tF._)(this,tP,[]),(0,tF._)(this,tB,new Map),(0,tF._)(this,tU,new Set);for(let n=0;n<e.length;n++){let i=[],a=e[n];if(void 0!==a){if((0,tR._)(this,tK)){let e=(t||[])[n],r=e7((0,tR._)(this,tz),a,e);tt(a)||"HUNK"!==a.type?(0,tM._)(this,tJ,t6).call(this,{leftLine:a,rightLine:e,row:i,rowIdentifier:r,rowIndex:n}):(0,tM._)(this,tX,t8).call(this,i,r,n)}else{let e=e7((0,tR._)(this,tz),a,a);tt(a)||"HUNK"!==a.type?(0,tM._)(this,tZ,t7).call(this,{diffLine:a,row:i,rowIdentifier:e,rowIndex:n}):(0,tM._)(this,tX,t8).call(this,i,e,n)}(0,tR._)(this,tP).push(i)}}}function t5({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:a,rowIndex:r,isSplit:l}){let s,o,d=te(a,e);o=!(l||tt(t))&&t?.type==="DELETION"&&1===e||!(l||tt(t))&&t?.type==="ADDITION"&&0===e||tt(t),tt(t)||"left"!==n||(s=t?.left),tt(t)||"right"!==n||(s=t?.right),i.push({lineNumber:s,orientation:n,isEmpty:o,isHunk:!1,cellId:te(a,e),columnIndex:e}),(0,tR._)(this,tB).set(d,[r,e])}function t8(e,t,n){let i=te(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:i,columnIndex:0}),(0,tR._)(this,tB).set(i,[n,0]),(0,tR._)(this,tU).add(n)}function t9(e){return(0,tR._)(this,tU).has(e)}function t6({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:a}){(0,tM._)(this,tQ,t5).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,tM._)(this,tQ,t5).call(this,{cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,tM._)(this,tQ,t5).call(this,{cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,tM._)(this,tQ,t5).call(this,{cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0})}function t7({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let a=tt(e)||"DELETION"!==e.type?"right":"left";(0,tM._)(this,tQ,t5).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,tM._)(this,tQ,t5).call(this,{cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,tM._)(this,tQ,t5).call(this,{cellIndex:2,diffLine:e,orientation:a,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}function ne(e){(0,tM._)(this,tY,t9).call(this,e)||(0,tF._)(this,tH,e)}function nt(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function nn(e){return e in eY&&(eY[e]&eJ)>0}function ni({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:n,isSplitDiff:i,leftLines:a,replaceSelectedDiffRowRangeFromGridCells:r,rightLines:l,disabled:s}){var o;let d=(0,c.useRef)(void 0),u=(0,c.useMemo)(()=>new GridNavigator(n,i,a,l,d.current?.focusedGridCell?.cellId),[n,i,a,l]);(0,c.useEffect)(()=>{d.current=u},[u]),(0,c.useEffect)(()=>{let e=t.current,n=()=>{u.clearLastSelectedCell()};return e?.addEventListener("mousedown",n),()=>e?.removeEventListener("mousedown",n)},[t,u]),o=d.current,(0,c.useEffect)(()=>{if(o&&document.activeElement){let e=function(e,t,n){let i=[];for(let a=0;a<t.length;a++){let r=t[a],l=n?.[a]??r,s=!tt(r)&&r?.type==="HUNK";r&&l&&!e.hasLine(r,l,s)&&i.push(r)}return i}(o,a,l);if(0!==e.length){if(document.activeElement===document.body){let t,i,r,l=a.indexOf(e[e.length-1]),s=a[l+1],o=e[0];s&&!tt(s)&&"HUNK"===s.type&&(t=te(e7(n,s,s),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),r=i?.querySelector("button[data-direction=down], button[data-direction=all]")),r||(t=te(e7(n,o,o),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),r=i?.querySelector("button[data-direction=up], button[data-direction=all]")),t&&i&&(r?r.focus():i.focus(),u.focusGridCell(t),nt(i))}else if("BUTTON"===document.activeElement.tagName)nt(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),n=u.focusedGridCell?.cellId;if(e!==n){let e=t.current?.querySelector(`[data-grid-cell-id=${n}]`);e?.focus()}}}}},[n,a,u,l,o,t]);let m=(0,c.useCallback)(e=>{let t=e.target.getAttribute("data-grid-cell-id");t&&u.focusGridCell(t)},[u]);(0,c.useEffect)(()=>{let e=t.current;return e?.addEventListener("focusin",m),()=>e?.removeEventListener("focusin",m)},[t,m]);let h=(0,c.useCallback)((t,i,a)=>{let l=u.getValidSelectableRowCell();switch(!0){case(a.metaKey||a.ctrlKey)&&"KeyA"===a.code:{let e=u.getFirstCodeCell(),t=u.getLastCodeCell();if(!e||!t)return i;return r({diffAnchor:n,focusedGridCell:e,startGridCell:e,endGridCell:t}),i}case a.shiftKey&&"ArrowDown"===a.key:{let e=u.getNextSelectableCell("ArrowDown");if(!e||!l)return i;return r({diffAnchor:n,focusedGridCell:l,startGridCell:l,endGridCell:e}),na(e.cellId),i}case a.shiftKey&&"ArrowUp"===a.key:{let e=u.getNextSelectableCell("ArrowUp");if(!e||!l)return i;return r({diffAnchor:n,focusedGridCell:l,startGridCell:e,endGridCell:l}),na(e.cellId),i}case"ArrowLeft"===a.key&&a.metaKey&&a.shiftKey:return i;default:{let t=u.moveToNextItem(a.key,a.ctrlKey),n=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),u.clearLastSelectedCell(),n??void 0}}},[u,n,r,e]);return(0,tT.G)({containerRef:t,bindKeys:eJ,getNextFocusable:h,focusableElementFilter:e=>"BUTTON"!==e.tagName&&"TEXTAREA"!==e.tagName,focusInStrategy:"previous",disabled:s},[h]),{gridNavigator:u}}function na(e){let t=N.XC?.querySelector(`[data-grid-cell-id=${e}]`);!function(e){if(!N.XC||!N.cg||!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(N.cg.innerHeight||N.XC.documentElement.clientHeight)&&t.right<=(N.cg.innerWidth||N.XC.documentElement.clientWidth)}(t)&&t?.scrollIntoView({block:"nearest",inline:"nearest"})}var nr=n(87825);let nl=(0,c.createContext)({isInDialogMode:!1,enableInlineCommentDialogMode:()=>{},disableInlineCommentDialogMode:()=>{}});function ns({enableDiffGridMode:e,children:t}){let[n,i]=(0,c.useState)(!1),a=(0,c.useCallback)(()=>{i(!0),e?.(!1)},[e]),l=(0,c.useCallback)(()=>{i(!1),e?.(!0)},[e]),s=(0,c.useMemo)(()=>({isInDialogMode:n,enableInlineCommentDialogMode:a,disableInlineCommentDialogMode:l}),[n,a,l]);return(0,r.jsx)(nl.Provider,{value:s,children:t})}let no=()=>(0,c.useContext)(nl);try{nl.displayName||(nl.displayName="InlineCommentDialogModeContext")}catch{}try{ns.displayName||(ns.displayName="InlineCommentDialogModeProvider")}catch{}function nd(e){return null!=e}let nc="thread",nu="annotation",nm=(0,c.createContext)(null);function nh({children:e,line:t}){let[n,i]=(0,c.useState)(!1),[a,l]=(0,c.useState)(),[s,o]=(0,c.useState)(),[d,u]=(0,c.useState)(),[m,h]=(0,c.useState)(),[f,p]=(0,c.useState)(),{ghostUser:g,markerNavigationImplementation:y}=e2(),{originalLineThreads:x,modifiedLineThreads:b}=tI(),[C,v]=(0,c.useState)(),N=np({line:t,side:C,originalLineThreads:x,modifiedLineThreads:b,ghostUser:g}),j=(0,c.useMemo)(()=>!!a||!!s||!!d||!!m,[a,d,s,m]),_=(0,c.useCallback)(()=>{i(!0)},[]),w=(0,c.useCallback)(()=>{i(!1)},[]),k=(0,c.useCallback)(e=>{e?p({id:e,kind:nc}):p(void 0)},[]),S=f?.kind===nc?f.id:void 0,E=f?.kind===nu?f.id:void 0,L=(0,c.useCallback)(e=>{e?p({id:e,kind:nu}):p(void 0)},[]),I=(0,c.useCallback)((e,t,n)=>{var i=y?.overlayPortalContainerName;let a=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),r=document.querySelector(`#${i} div[role="dialog"]`);switch((a||r)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0})),e){case"context-menu":l(t),h(void 0),u(void 0),o(void 0);break;case"new-conversation":h({cellId:t,withSuggestedChange:n?.withSuggestedChange}),l(void 0),u(void 0),o(void 0);break;case"marker-details":u(t),l(void 0),o(void 0),h(void 0);break;case"marker-list":o(t),l(void 0),h(void 0),u(void 0)}},[y?.overlayPortalContainerName]),D=(0,c.useCallback)(e=>{switch(e){case"context-menu":l(void 0);break;case"new-conversation":h(void 0);break;case"marker-details":u(void 0);break;case"marker-list":o(void 0)}},[]),T=(0,c.useCallback)(e=>(v(e),np({line:t,side:e,modifiedLineThreads:b,originalLineThreads:x,ghostUser:g})),[t,b,x,g]),R=(0,c.useMemo)(()=>t.annotationsData?.annotations?.filter(nd)??[],[t.annotationsData?.annotations]),A=(0,c.useMemo)(()=>({annotations:R,isActionBarVisible:n,showActionBar:_,hideActionBar:w,selectThreadId:k,selectAnnotationId:L,closeDialog:D,openDialog:I,anyMenuOpen:j,selectedThreadId:S,selectedAnnotationId:E,openContextMenuCell:a,openMarkersListCell:s,openMarkerDetailsCell:d,openNewConversationCell:m,threads:N,updateVisibleThreads:T}),[R,n,_,w,k,L,D,I,j,S,E,a,s,d,m,N,T]);return(0,r.jsx)(nm.Provider,{value:A,children:e})}function nf(){let e=(0,c.useContext)(nm);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}function np({line:e,side:t,originalLineThreads:n,modifiedLineThreads:i,ghostUser:a}){switch(t){case"LEFT":return n||[];case"RIGHT":return i||[];case void 0:return tD(e.threadsData,a);default:return[]}}try{nm.displayName||(nm.displayName="MarkersDialogContext")}catch{}try{nh.displayName||(nh.displayName="MarkersDialogContextProvider")}catch{}var ng=n(40260),ny=n(98211),nx=n(5945);let nb=(0,c.createContext)({});function nC({children:e}){let[t,n]=(0,c.useState)(!1),i=(0,c.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,r.jsx)(nb.Provider,{value:i,children:e})}try{nb.displayName||(nb.displayName="DialogStateContext")}catch{}try{nC.displayName||(nC.displayName="DialogStateProvider")}catch{}let nv=eX.z0.ArrowAll;eX.z0.ArrowHorizontal,eX.z0.ArrowVertical,eX.z0.ArrowVertical,eX.z0.ArrowHorizontal;let MarkerNavigator=class MarkerNavigator{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,a=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(a)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let r=this.markers[n];if(r)return this.currentMarkerPosition={markerId:r.id,index:n},r}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),a=i?.getAttribute("data-marker-id");if(!i||!a)return;let r=this.markerComments[a]||[];if(0===r.length)return;let l=t.getAttribute("data-marker-navigation-comment-id"),s=r.findIndex(e=>e.id===l);if(-1===s)return;let o=s===r.length-1;switch(e){case"ArrowDown":if(o)return;n=s+1;break;case"ArrowUp":if(0===s)return;n=s-1;break;default:return}let d=r[n];if(d)return this.currentMarkerCommentPosition={markerId:d.id,index:n},d}constructor(e,t,n){if((0,t$._)(this,"markers",void 0),(0,t$._)(this,"markerComments",null),(0,t$._)(this,"currentMarkerPosition",null),(0,t$._)(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){let e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}};let nN="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function nj(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(nN)??[]))t.setAttribute("tabindex","0")}function n_({commentSubjectType:e,markerRef:t,isThread:n=!1,thread:i}){let{isInDialogMode:a}=no();(0,c.useEffect)(()=>{let r=null;if(!n||i){if(a)"commit"===e?r=setTimeout(()=>{nj(t.current)},100):nj(t.current);else{var l;l=t.current,l?.setAttribute("aria-hidden","true"),function e(t=0){setTimeout(()=>{let t=Array.from(l?.querySelectorAll("*")??[]),n=Array.from(l?.querySelectorAll(nN)??[]);if(0===n.length)return e(200);for(let e of t)e?.setAttribute("aria-hidden","true");for(let e of n)e.setAttribute("tabindex","-1")},t)}()}return()=>{r&&clearTimeout(r)}}},[a,e,t,n,i])}var nw=n(77430),nk=n(84511),nS=n(1002);let nE={annotation:"Annotation-module__annotation--XyhuZ",annotationSource:"Annotation-module__annotationSource--_lhYD",annotationMessage:"Annotation-module__annotationMessage--vtkTa"};var nL=n(38267);function nI({annotationLevel:e,...t}){let{icon:n,...i}=nR[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:i,className:a}){return(0,r.jsx)("svg",{"aria-label":n,className:a,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:i})}({...n,...i,...t})}let nD=(0,nL.i7)(["0%{opacity:0;}100%{opacity:1;}"]),nT=(0,nL.Ay)(nI).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-f8bdef5f-0"})(["animation:"," 0.1s ease-in;"],nD),nR={[e8.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,r.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[e8.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,r.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[e8.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,r.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{nI.displayName||(nI.displayName="AnnotationIcon")}catch{}try{nT.displayName||(nT.displayName="AnimatedAnnotationIcon")}catch{}let nA={[e8.Failure]:(0,r.jsx)(u.StopIcon,{className:"fgColor-danger"}),[e8.Warning]:(0,r.jsx)(u.AlertIcon,{className:"fgColor-attention"}),[e8.Notice]:(0,r.jsx)(u.InfoIcon,{className:"fgColor-muted"})};function nF({annotation:e}){return(0,r.jsxs)("div",{className:(0,S.$)("p-3 bgColor-default",nR[e.annotationLevel]?.borderColor,nE.annotation),children:[(0,r.jsxs)("div",{className:"d-flex flex-items-center mb-2",children:[nA[e.annotationLevel],(0,r.jsx)(nk.A,{weight:"semibold",className:"fgColor-muted pl-2",size:"small",children:nR[e.annotationLevel]?.ariaLabel})]}),(0,r.jsx)("div",{className:"ml-4",children:e.title&&(0,r.jsx)(nk.A,{weight:"semibold",size:"medium",className:nR[e.annotationLevel]?.primaryColorClass,children:e.title})}),(0,r.jsxs)("h2",{className:"sr-only",children:[nR[e.annotationLevel]?.ariaLabel,": ",e.title]}),(0,r.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,r.jsx)($.$6,{html:e.message,className:nE.annotationMessage})}),(0,r.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4",children:[(0,r.jsxs)("div",{className:nE.annotationSource,children:[(0,r.jsx)(nw.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,r.jsxs)(nS.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,r.jsx)(nk.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,r.jsx)(nk.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,r.jsx)(H.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{nF.displayName||(nF.displayName="Annotation")}catch{}let nM={inlineAnnotation:"InlineAnnotation-module__inlineAnnotation--zYahl"};function nO({annotation:e,isFirstMarker:t,commentingImplementation:n}){let i=(0,c.useRef)(null),{isInDialogMode:a}=no();return n_({commentSubjectType:n.commentSubjectType,markerRef:i}),(0,r.jsx)("div",{id:`annotation_${e.databaseId}`,ref:i,className:(0,S.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",t?"mb-1":"mb-2",nM.inlineAnnotation),"data-level":e.annotationLevel,"data-testid":`annotation-${e.id}`,"data-marker-id":`${e.id}`,tabIndex:a?0:-1,children:(0,r.jsx)(nF,{annotation:e})})}try{nO.displayName||(nO.displayName="InlineAnnotation")}catch{}let n$={closeMarkersDialogButton:"InlineMarkers-module__closeMarkersDialogButton--kjk9B",markersWrapper:"InlineMarkers-module__markersWrapper--PUwBK",markersDialogActive:"InlineMarkers-module__markersDialogActive--NvAFu"};var nP=n(82075),nB=n(30459),nU=n(3614),nH=n(21998);function nz(){return(0,r.jsx)("div",{className:"position-relative",children:(0,r.jsxs)(m.E,{border:!0,children:[(0,r.jsx)(m.E.Visual,{children:(0,r.jsx)(u.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),(0,r.jsx)(m.E.Heading,{children:(0,r.jsx)("strong",{children:"Comments cannot be loaded right now"})}),(0,r.jsx)("div",{className:"mb-n2",children:(0,r.jsx)(m.E.Description,{children:"Refresh the page or try again later"})}),(0,r.jsx)(m.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})})}try{nz.displayName||(nz.displayName="CommentErrorFallback")}catch{}let nK={inlineReviewThreadHeading:"InlineReviewThread-module__inlineReviewThreadHeading--ytbVB",ReviewThreadContainer:"InlineReviewThread-module__ReviewThreadContainer--m84Gi",ResolvableContainer:"InlineReviewThread-module__ResolvableContainer--yhxaM",ThreadLoading:"InlineReviewThread-module__ThreadLoading--E5i0R"};var nV=n(11738);function nG(e,t="r"){(0,b.Zu)(`#${t}${e}`)}let nq={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};var nW=n(91835),nQ=n(46747);let{getItem:nX,removeItem:nY,setItem:nJ}=(0,nP.D)("localStorage");function nZ({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:a,threadId:r,fileLevelComment:l}){let s,o,[d,u]=(0,c.useState)(!1),m=(0,c.useMemo)(()=>r||(r??((e,t)=>{let{diffSide:n,filePath:i,line:a,subjectId:r}=e;if(t)return`PullRequest:${r}-File:${i}`;if(void 0!==a&&void 0!==n)return`PullRequest:${r}-File:${i}-Line:${a}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")})({diffSide:e,filePath:t,line:i,subjectId:a},l)),[e,t,i,a,r,l]),{hasPersistedComment:h,removePersistedCommentFromStorage:f}=(s=nX(m),o=!!s?.text?.trim(),(0,c.useEffect)(()=>{o&&n?.(s)},[o]),{hasPersistedComment:o,removePersistedCommentFromStorage:()=>{nY(m),o=!1,s=null}});return{hasPersistedComment:h,persistCommentToStorage:(0,nQ.d)(e=>{if(d)return;let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide});try{nJ(m,t)}catch{u(!0)}},1e3),removePersistedCommentFromStorage:f}}function n0(e,t){for(let n of function e(t,n=[]){if(""===t)return n;let i=t.match(n1());if(!i)return n;let a=i.groups.fence;if(!a)return n;let r=a.includes("~")?"~":"`",l=t.match(function(e,t){let n=n1([e],t);return RegExp(`${n.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(r,a.length));if(!l)return n;let s=0,o=i.groups.indent;""!==o&&(s=o.length);let d=l.groups.suggestion;if(s>0){let e=RegExp(`^ {0,${s}}`,"m");d=d.replace(e,"")}return n.push(d),e(t.slice(l.index+l[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function n1(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}let n2={AddCommentEditor:"AddCommentEditor-module__AddCommentEditor--PS0ul"};var n4=n(8046);let n3=(0,c.forwardRef)(({children:e,subject:t,...n},i)=>(0,r.jsx)(n4.hF,{...n,ref:i,placeholder:"Leave a comment",actions:e,subject:t,showLabel:!1}));function n5({batchPending:e,batchingEnabled:t,commentBoxSubject:n,condensed:i,fileLevelComment:a,filePath:l,focusOnMount:s,isReplying:o,lineNumber:d,onAddComment:u,onCancelComment:m,onPersistedCommentExists:h,quotedText:f="",side:p,startLineNumber:g,subjectId:y,threadId:x,suggestedChangesConfig:b}){let[C,v]=(0,c.useState)(f),[j,_]=(0,c.useState)(!1),[w,k]=(0,c.useState)(),S=(0,c.useRef)(null),E=(0,c.useRef)(null),{persistCommentToStorage:L,removePersistedCommentFromStorage:I}=nZ({diffSide:p,filePath:l,line:d,subjectId:y,threadId:x,handlePersistedCommentExists:({text:e})=>{e&&(v(e),h?.())},fileLevelComment:!!a});(0,c.useEffect)(()=>{if(s){let e=setTimeout(()=>{if(E.current&&(N.XC||N.cg)){let e=E.current,t=e.getBoundingClientRect(),n=N.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(N.cg?.innerHeight||n))){let i=t.top,a=N.XC?.documentElement.getBoundingClientRect().top||0,r=e.clientHeight*(2/3);N.cg?.scrollTo({top:i-a-2/3*n+r,behavior:"smooth"})}}S.current?.focus()},100);return()=>{window.clearTimeout(e)}}},[s]);let D=({submitBatch:e})=>{let t="Failed to save comment";if(j)return;if(!C.trim())return void k(`${t}: Body can't be blank`);_(!0),k(void 0);let n=n0(C,b?.sourceContentFromDiffLines??"");if(!n.isValid){k(n.errorMessage),_(!1);return}u?.({commentText:C,onCompleted(){_(!1),A()},onError(e){_(!1),e.message&&(t=`${t}: ${e.message}`),k(t)},submitBatch:e})},T=()=>D({submitBatch:!1}),R=()=>D({submitBatch:!0}),A=(0,c.useCallback)(()=>{I(),v(""),m?.()},[m,I]),F={footer:{justifyContent:o?"end":"space-between","> div:first-child":{display:i||o?"none":"flex"},...i&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,r.jsx)("div",{className:n2.AddCommentEditor,onKeyDown:e=>{"Escape"!==e.key||C.trim()?e.stopPropagation():(e.preventDefault(),A())},children:(0,r.jsxs)(n3,{ref:S,label:"Add diff comment",sx:F,value:C,onChange:e=>{k(void 0),L({text:e}),v(e)},onPrimaryAction:t?T:R,suggestedChangesConfig:b,markdownErrorMessage:w,subject:n,lineNumber:d,filePath:l,startLineNumber:g,children:[m&&(0,r.jsx)(nW.x,{disabled:j,className:"py-1 px-2",variant:"default",onClick:A,children:"Cancel"}),!e&&(0,r.jsx)(nW.x,{disabled:j||!C.length,className:"py-1 px-2",variant:t?"default":"primary",onClick:R,ref:E,children:o?"Reply":"Comment"}),t&&(0,r.jsx)(nW.x,{disabled:j||!C.length,className:"py-1 px-2",variant:"primary",onClick:T,children:e?"Add review comment":"Start a review"})]})})}n3.displayName="ConversationCommentBox";try{n5.displayName||(n5.displayName="AddCommentEditor")}catch{}var n8=n(26156),n9=n(71073),n6=n(81156),n7=n(63352),ie=n(78809),it=n(24967),ii=n(19805),ia=n(43258),ir=n(69948),il=n(40961);function is({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,nB.s)();return(0,r.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,r.jsx)(H.Q,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{is.displayName||(is.displayName="AddToExistingBatch")}catch{}var io=n(83294);let id={applySuggestion:{text:"Apply suggestion"},addSuggestionToBatch:{text:"Add suggestion to batch",inactive:!0,inactiveReason:"This feature is not supported yet."}};function ic({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:i}=(0,nB.s)(),[a,l]=(0,c.useState)(id.applySuggestion),[s,o]=(0,c.useState)(!1),d=(0,c.useRef)(null),m=(0,c.useRef)(null),h=()=>o(!s),{addSuggestedChangeToPendingBatch:f}=e,p=(0,c.useCallback)(()=>{a===id.addSuggestionToBatch&&(f(n),i("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),a===id.applySuggestion&&t(m)},[f,t,a,i,n]);return(0,r.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,r.jsxs)(io.A,{children:[(0,r.jsx)(H.Q,{variant:"primary",onClick:p,ref:m,children:a.text}),(0,r.jsxs)(nx.W,{anchorRef:d,open:s,onOpenChange:h,children:[(0,r.jsx)(nx.W.Anchor,{children:(0,r.jsx)(K.K,{ref:d,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:u.TriangleDownIcon,size:"medium",variant:"primary",onClick:h})}),(0,r.jsx)(nx.W.Overlay,{width:"medium",children:(0,r.jsx)(es.l,{selectionVariant:"single",children:Object.keys(id).map(e=>{let t=id[e];return(0,r.jsx)(es.l.Item,{selected:a===t,onSelect:()=>l(t),inactiveText:t.inactiveReason,children:t.text},e)})})})]})]})})}try{ic.displayName||(ic.displayName="ApplyOrAddToBatch")}catch{}var iu=n(70263),im=n(65029),ih=n(75298);function ip({children:e,footerButtons:t}){let{containerRef:n}=(0,tT.G)({bindKeys:eX.z0.ArrowHorizontal|eX.z0.Tab,focusInStrategy:"closest"});return t?(0,r.jsx)(eo.l.Footer,{ref:n,children:(0,r.jsxs)("div",{className:"d-flex flex-column",children:[(0,r.jsx)("div",{className:"d-flex flex-row gap-2 flex-justify-end",children:(0,r.jsx)(eo.l.Buttons,{buttons:t})}),e]})}):null}let ig={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function iy(e,t){switch(t.type){case ig.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case ig.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function ix({authorLogins:e,batchSize:t,onClose:n,onCommit:i}){let a=(0,iu.A)(),{sendAnalyticsEvent:l}=(0,nB.s)(),[s,o]=(0,c.useState)(!1),[d,u]=(0,c.useState)(),[m,h]=(0,c.useReducer)(iy,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),f=(0,c.useCallback)((e,t,n)=>{if(!a())return;let i="There was an error trying to commit changes";n?i+=`: ${n}`:i+=".",o(!1),u(i)},[a]),p=(0,c.useCallback)(()=>{a()&&(o(!1),d&&u(void 0))},[d,a]),g=(0,c.useCallback)(()=>{s||(o(!0),l("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),i(`${m.commitMessage}

${m.extendedDescription}`,f,p))},[t,m.commitMessage,m.extendedDescription,p,f,s,i,l]);return(0,r.jsxs)(eo.l,{title:"Apply suggestion",renderFooter:()=>(0,r.jsx)(ip,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,r.jsxs)("span",{className:"d-flex flex-row flex-items-center",children:["Commit changes",s&&(0,r.jsx)(t_.A,{size:"small",className:"ml-1"})]}),onClick:g,buttonType:"primary"}],children:d&&(0,r.jsx)(im.A.Validation,{variant:"error",className:"mt-2 pt-1 flex-justify-end",children:d})}),onClose:n,children:[(0,r.jsxs)(im.A,{className:"mb-2",children:[(0,r.jsx)(im.A.Label,{children:"Commit message"}),(0,r.jsx)(e_.A,{block:!0,name:"commit_message",onChange:e=>h({type:ig.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:m.commitMessage})]}),(0,r.jsxs)(im.A,{children:[(0,r.jsx)(im.A.Label,{children:"Extended description (optional)"}),(0,r.jsx)(ih.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>h({type:ig.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:m.extendedDescription})]})]})}try{ip.displayName||(ip.displayName="DialogFooter")}catch{}try{ix.displayName||(ix.displayName="ApplySuggestionDialog")}catch{}function ib({reason:e,className:t="m-2"}){return(0,r.jsx)("div",{className:t,children:(0,r.jsx)("small",{className:"fgColor-muted",children:e})})}try{ib.displayName||(ib.displayName="CodeSuggestionUnavailable")}catch{}function iC({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let i=(0,c.useRef)(null),a=(0,c.useCallback)(()=>{t(i)},[t]),l=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:s}=(0,nB.s)();return(0,r.jsxs)("div",{className:"d-flex flex-row flex-justify-between",children:[(0,r.jsx)(V.A,{variant:"attention",className:"my-auto",children:"Pending in batch"}),(0,r.jsxs)("div",{className:"d-flex gap-2",children:[(0,r.jsx)(H.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),s("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,r.jsx)(H.Q,{ref:i,size:"medium",count:l,variant:"primary",onClick:a,children:`Apply suggestion${l>1?"s":""}`})]})]})}try{iC.displayName||(iC.displayName="CommitOrRemoveFromBatch")}catch{}function iv({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:n}=(0,c.useContext)(nb),[i,a]=(0,c.useState)(!1),l=(0,c.useRef)(void 0),{pendingSuggestedChangesBatch:s,submitSuggestedChanges:o}=e,d=s.some(e=>{var n,i;let a,r;return n=e,i=t,n.commentId===i.commentId&&n.path===i.path&&n.suggestion.length===i.suggestion.length&&(a=n.suggestion,r=i.suggestion,a.length===r.length&&!a.some((e,t)=>e!==r[t]))}),u=0===s.length,{isValid:m,reason:h}=function(e,t){let n={isValid:!1,reason:nq.INVALID_RANGE},i={isValid:!1,reason:nq.BATCH_TOO_BIG};return t.length>=50?i:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let a of t)if(e.path===a.path){var n,i;return n=e.lineRange,i=a.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?n:{isValid:!0}}(t,s),f=(0,c.useMemo)(()=>d?s:[t],[d,s,t]),p=(0,c.useCallback)(e=>{a(e),n?.(e)},[n]),g=(0,c.useCallback)(()=>{if(p(!1),l.current){let e=l.current.current;setTimeout(()=>e?.focus())}},[p]),y=(0,c.useCallback)(e=>{p(!0),l.current=e},[p,l]),x=(0,c.useCallback)((e,t,n)=>{o({suggestedChanges:f,commitMessage:e,onCompleted:()=>{g(),n()},onError:t})},[g,o,f]);return(0,r.jsxs)("div",{className:"border-top p-2",children:[d&&(0,r.jsx)(iC,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!d&&!m&&h&&(0,r.jsx)(ib,{reason:h,className:"m-0"}),!d&&u&&(0,r.jsx)(ic,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!d&&m&&!u&&(0,r.jsx)(is,{commentingImplementation:e,suggestedChange:t}),i&&(0,r.jsx)(ix,{authorLogins:f.map(e=>e.authorLogin),batchSize:f.length,onClose:g,onCommit:x})]})}try{iv.displayName||(iv.displayName="CodeSuggestionActions")}catch{}function iN({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:i,filePath:a,isOutdated:l,isThreadResolved:s,subject:o,suggestedChangesConfig:d,databaseId:u,viewerData:m}){let h=function(e,t,n,i,a){let[r,l]=(0,c.useState)();return(0,th.N)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let r=[...e.current.getElementsByClassName("js-apply-changes")];if(r.length>0){let e=[];for(let l of r){let r=l?.closest("div.js-suggested-changes-blob");if(!r)continue;let s=[...r.querySelectorAll(".js-blob-code-addition")];a.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:l,suggestion:s.map(e=>e.textContent),lineRange:a.lineRange,threadId:i})}l(e)}},[a.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),r}(n,t,a,u,e),f=o?.state?.toUpperCase();return(0,r.jsx)(r.Fragment,{children:h?.length?h.map(n=>{let{isValid:a,reason:c}=function({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:a,pullRequestIsInMergeQueue:r,userCanApplySuggestion:l,applySuggestedChangesValidationData:s,suggestedChangesConfig:o}){let{lineRange:d}=s;if(t)return{isValid:!1,reason:nq.IS_OUTDATED};if(n)return{isValid:!1,reason:nq.IS_PENDING};if(i)return{isValid:!1,reason:nq.IS_RESOLVED};if(a)return{isValid:!1,reason:nq.PULL_REQUEST_IS_CLOSED};if(r)return{isValid:!1,reason:nq.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!l)return{isValid:!1,reason:nq.USER_CANNOT_APPLY_SUGGESTION};if(!d)return{isValid:!1,reason:nq.RANGE_NOT_PROVIDED};if(!o)return{isValid:!1,reason:nq.UNABLE_TO_DETERMINE_VALIDITY};if(!o?.isValidSuggestionRange)return{isValid:!1,reason:nq.DELETED_LINES};let c=o?.sourceContentFromDiffLines,u=e.suggestion.join(`
`);return 0!==e.suggestion.length&&u===c?{isValid:!1,reason:nq.UNCHANGED_CODE}:{isValid:!0}}({suggestedChange:n,isOutdated:l,isPending:"PENDING"===t.state.toUpperCase(),isResolved:s,pullRequestIsClosed:void 0===f||"CLOSED"===f||"MERGED"===f,pullRequestIsInMergeQueue:!!o?.isInMergeQueue,userCanApplySuggestion:!!m?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:d});return!a&&c?(0,il.createPortal)((0,r.jsx)(ib,{reason:c}),n.ref):(0,il.createPortal)((0,r.jsx)(iv,{commentingImplementation:i,suggestedChange:n}),n.ref)}):null})}try{iN.displayName||(iN.displayName="SuggestedChangeView")}catch{}function ij({isAnchorable:e=!1,index:t=0,isInlineComment:n,isLastChild:i,isOutdated:a,isThreadResolved:l,anchorPrefix:s="r",comment:o,commentingImplementation:d,filePath:m,hideActions:h,isFirstComment:f=!1,enterDialogMode:p=eb.l,onRefreshThread:g,onQuoteReply:y=eb.l,subjectId:x,subject:b,threadCommentCount:C,threadId:v,threadPositionNumber:j,threadsConnectionId:_,suggestedChangesConfig:w,applySuggestedChangesValidationData:k,viewerData:E,ghostUser:I=n6.t.ghostUser,skipReactions:D=!1,originalDiffPathUri:T}){let{addToast:R}=(0,ia.Y6)(),[A,F]=(0,c.useState)(!1),[M,O]=(0,c.useState)(o.isHidden),[P,B]=(0,c.useState)(o.body),[U,H]=(0,c.useState)(!1),[z,K]=(0,c.useState)(""),{persistCommentToStorage:V,removePersistedCommentFromStorage:G}=nZ({subjectId:x,filePath:m,fileLevelComment:"FILE"===o.subjectType,threadId:o.id,handlePersistedCommentExists:({text:e})=>{e&&B(e)}}),{blockUserFromOrg:q,unblockUserFromOrg:W,editComment:Q,deleteComment:X,hideComment:Y,unhideComment:J,reactToComment:Z,lazyFetchReactionGroups:ee}=d,et=!!q,en=!!W,ei=(0,c.useRef)(null),ea=(0,c.useRef)(null),[er,el]=(0,c.useState)(""),{isInDialogMode:es}=no(),eo=()=>{ei.current?.focus()};(0,c.useEffect)(()=>{if(A){let e=window.setTimeout(eo);return()=>{window.clearTimeout(e)}}},[A]);let ed=(0,ir.S)(),{enableInlineCommentDialogMode:ec,disableInlineCommentDialogMode:eu}=no(),em=async()=>{eu();let e=!1;try{e=await ed({title:"Delete comment?",content:"Are you sure you want to delete this comment?",confirmButtonContent:"Delete",confirmButtonType:"danger"})}finally{ec()}e&&X({commentId:o.id,onCompleted:()=>{g?.(v)},onError:()=>{H(!1),R({type:"error",message:"Failed to delete comment"})},threadCommentCount:C,threadId:v,threadsConnectionId:_,filePath:m})},eh=(0,c.useCallback)((e,t,n,i,a,r)=>{q&&q({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,userLogin:r,onCompleted:()=>{t&&O(!0),g?.(v)},onError:()=>{el("Failed to block user")}})},[q,g,v]),ef=(0,c.useCallback)((e,t)=>{W&&W({organizationLogin:e,userLogin:t,onCompleted:()=>{g?.(v)},onError:()=>{el("Failed to unblock user")}})},[g,v,W]),ep=(0,c.useCallback)(()=>{H(!0);let e=n0(P,w?.sourceContentFromDiffLines??"");if(!e.isValid){K(e.errorMessage),H(!1);return}Q({text:P,comment:o,onCompleted:()=>{F(!1),H(!1),G(),g?.(v)},onError:()=>{H(!1),R({type:"error",message:"Failed to update comment"})}})},[R,P,o,Q,g,G,w,v]),eg=o.databaseId?.toString(),ey=eg?`${s}${eg}`:void 0,ex=ey&&N.fV?new URL(`${N.fV.pathname}#${ey}`,N.fV.origin).toString():"",eC=(0,c.useRef)(null);(0,c.useEffect)(()=>{e&&eg&&ey&&window.location.hash.split("#").pop()===ey&&(nG(eg,s),p?.(!1),eC.current?.focus())},[s,ey,eg,p,e]);let ev={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eN=t>0,ej=t>1,e_=d.suggestedChangesEnabled,ew=A?"editing":M?"hidden":"visible",ek={headingProps:{as:"h3"},avatarUrl:o.author?.avatarUrl??I.avatarUrl,comment:{...o,url:ex,referenceText:o.reference.text??`#${o.reference.number}`},commentRef:eC,deleteComment:em,editComment:()=>{F(!0)},editHistoryComponent:void 0,hideComment:e=>{Y({commentDatabaseId:o.databaseId,reason:e,onCompleted:()=>{O(!0),g?.(v)},onError:()=>{H(!1),el("Failed to hide comment")}})},onBlock:et?eh:void 0,onUnblock:en?ef:void 0,onMinimize:O,onSuccessfulBlock:()=>{setTimeout(()=>N.cg?.location.reload(),800)},isMinimized:M,commentAuthorLogin:o.author?.login??I.login,navigate:eb.l,commentSubjectAuthorLogin:o.reference?.author?.login??"",commentSubjectType:d.commentSubjectType,onReplySelect:y,unhideComment:()=>{J({commentDatabaseId:o.databaseId,onCompleted:()=>{O(!1),g?.(v)},onError:()=>{H(!1),el("Failed to unhide comment")}})},hideActions:h,isReply:eN,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:T,isOutdated:a,commentAuthorSlug:"copilot"===o.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===o.reviewVariantType?"Bot":void 0};return(0,r.jsxs)(nH.az,{ref:eC,id:e?ey:void 0,tabIndex:n?es?0:-1:0,"data-first-thread-comment":f,"data-marker-navigation-comment-thread-id":v,"data-marker-navigation-comment-id":o.id,...es?{role:"document","aria-roledescription":"comment","aria-label":eN?void 0!==j?`Reply ${t} to Comment ${j}`:`Reply ${t}`:void 0!==j?`Comment ${j}`:"Comment"}:{},sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":ev,":focus":ev,scrollMarginTop:e?"120px":0},children:[ej&&(0,r.jsx)(nH.az,{sx:{display:"flex",pl:+!!eN},children:(0,r.jsx)(nH.az,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,r.jsx)(nH.az,{sx:{px:3,pt:2*!ej,pb:0},children:(0,r.jsx)(n8.v,{...ek,commentBody:o.body,threadCommentCount:C,isInDialogMode:es,actions:h?void 0:(0,r.jsx)(n9.p,{...ek}),isOutdated:a})}),er&&(0,r.jsxs)(L.A,{variant:"danger",className:"m-3",children:[(0,r.jsx)(u.StopIcon,{className:"mr-2"}),er]}),(0,r.jsxs)(nH.az,{sx:{display:"flex",pl:+!!eN},children:[eN&&(0,r.jsx)(nH.az,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...i&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===ew&&(0,r.jsx)("div",{className:(0,S.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",eN?"pl-0":"pl-2"),children:(0,r.jsxs)(n3,{ref:ei,label:"Update comment",value:P,onChange:e=>{V({text:e}),B(e),K(void 0)},onPrimaryAction:ep,subject:d.commentBoxSubject,suggestedChangesConfig:w,markdownErrorMessage:z,children:[(0,r.jsx)(n4.xR,{variant:"default",onClick:()=>{F(!1),G(),B(o.body)},children:"Cancel"}),(0,r.jsx)(n4.xR,{disabled:U||!P.length,variant:"primary",onClick:ep,children:"Update"})]})}),"visible"===ew&&(0,r.jsx)(nH.az,{sx:eN?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:o.bodyHTML&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($.vb,{ref:ea,className:"markdown-body","comment-testid":`Comment body html for comment ${o.id}`,html:o.bodyHTML,sx:{mt:1,fontSize:1}}),"copilot"===o.reviewVariantType&&(0,r.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,r.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===o.reviewVariantType&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(n7.Z,{commentUrl:o.url,commentId:o.databaseId?.toString()??""})}),o.reactionGroups&&Z?(0,r.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,r.jsx)(ie.P,{reactionGroups:o.reactionGroups,onReact:(e,t)=>{Z?.({commentDatabaseId:o.databaseId,threadId:v,reaction:e,viewerHasReacted:t,onCompleted:()=>{g?.(v)},onError:()=>{H(!1),R({type:"error",message:"Failed to react to comment"})}})},canReact:o.viewerCanReact})}):!D&&(0,r.jsx)(nH.az,{sx:{display:"flex",flexDirection:"column",mt:3},children:ee?(0,r.jsx)(c.Suspense,{fallback:(0,r.jsx)(it.e,{}),children:(0,r.jsx)(ii.ReactionViewerRelayQueryComponent,{id:o.id,subjectLocked:!o.viewerCanReact})}):(0,r.jsx)(ii.ReactionViewerRelay,{reactionGroups:o,subjectId:o.id,canReact:o.viewerCanReact})})]}),e_&&k&&(0,r.jsx)(iN,{comment:o,commentBodyRef:ea,commentingImplementation:d,filePath:m,isOutdated:a,isThreadResolved:l,databaseId:o.databaseId,suggestedChangesConfig:w,applySuggestedChangesValidationData:k,subject:b,viewerData:E})]})})]})]})}try{ij.displayName||(ij.displayName="ReviewThreadComment")}catch{}let i_={StaticDiffPreview:"StaticUnifiedDiffPreview-module__StaticDiffPreview--R_cuY",HeaderContainer:"StaticUnifiedDiffPreview-module__HeaderContainer--l3mJd"};function iw({subject:e,tabSize:t,hideHeaderDetails:n,className:i,diffTableClassName:a}){if(!e?.diffLines||e?.diffLines.length<1)return null;let l=(0,eq.c7)(e.diffLines);return(0,r.jsxs)("div",{className:(0,S.$)(i_.StaticDiffPreview,i),children:[!n&&(0,r.jsx)("div",{className:i_.HeaderContainer,children:(0,r.jsxs)("span",{className:"text-small fgColor-muted",children:["Line"," ",(0,x.Ah)({originalStartLine:e.originalStartLine,originalEndLine:e.originalEndLine,startDiffSide:e.startDiffSide,endDiffSide:e.endDiffSide}),", commit ",(0,r.jsx)("code",{children:e.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,r.jsx)(x.l4,{lineWidth:l,lines:e.diffLines,tabSize:t,className:a})]})}try{iw.displayName||(iw.displayName="StaticUnifiedDiffPreview")}catch{}function ik({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:i,commentsConnectionId:a,filePath:l,hideDiffPreview:s,isInlineComment:o,onRefreshThread:d,enterDialogMode:u,repositoryId:m,subject:h,subjectId:f,tabSize:p,thread:g,threadPositionNumber:y,threadsConnectionId:x,shouldLimitHeight:b=!0,suggestedChangesConfig:C,viewerData:v,ghostUser:j}){let[_,w]=(0,c.useState)(!1),[k,S]=(0,c.useState)(void 0),{sendAnalyticsEvent:E}=(0,nB.s)(),{addThreadReply:L}=i,I=(0,c.useRef)(null),D=e=>{S(e),w(!0)};if(null===g.commentsData.comments||g.commentsData.comments.length<1)return null;let T=function(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}(g),R="LINE"===g.subjectType?{lineRange:T}:void 0;return(0,r.jsx)("div",{"data-testid":"review-thread",children:(0,r.jsxs)(nH.az,{sx:b?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!s&&g.isOutdated&&(0,r.jsx)(iw,{subject:g.subject,tabSize:p??4}),g.commentsData.comments.map((e,t)=>(0,r.jsx)(ij,{enterDialogMode:u,isAnchorable:!0,index:t,threadPositionNumber:y,isFirstComment:0===t,isInlineComment:o,isLastChild:t===g.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:g.commentsData.__id,commentingImplementation:i,filePath:l,isOutdated:g.isOutdated,repositoryId:m,subject:h,subjectId:f,threadId:g.id,onRefreshThread:d,onQuoteReply:D,threadCommentCount:g.commentsData.comments.length,threadsConnectionId:x,isThreadResolved:!!g.isResolved,suggestedChangesConfig:C,applySuggestedChangesValidationData:R,viewerData:v,ghostUser:j},e.id)),g.reviewCommentsLimitExceeded&&(0,r.jsx)(eO.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(g.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),g.viewerCanReply&&(0,r.jsxs)("div",{className:"rounded-bottom-2 p-2",children:[_&&(0,r.jsx)(n5,{batchingEnabled:e,batchPending:t,commentBoxSubject:i.commentBoxSubject,condensed:!1,fileLevelComment:!0,filePath:l,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{w(!1),E("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),N.cg?.requestAnimationFrame(()=>I.current?.focus())},repositoryId:m,quotedText:k,subjectId:f,threadId:g.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let r=[];g.commentsData.__id&&r.push(g.commentsData.__id),a&&r.push(a),L({commentsConnectionIds:r,filePath:l,thread:g,text:e,submitBatch:i,onCompleted:e=>{e&&nG(e.toString()),t?.(),d?.(g.id)},onError:n,threadsConnectionId:x}),E("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:C}),!_&&(0,r.jsx)(nV.z,{ref:I,onClick:()=>{E("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),w(!0)},children:"Write a reply"})]})]})})}try{ik.displayName||(ik.displayName="ReviewThread")}catch{}function iS({children:e}){return(0,r.jsx)("span",{className:"text-semibold fgColor-default",children:e})}function iE({thread:e}){return void 0!==e&&e?.diffSide&&e.line?e.startLine&&e.startDiffSide?iI({thread:e}):iL({thread:e}):null}function iL({thread:e}){let t="LEFT"===e.diffSide?"L":"R";return(0,r.jsxs)("h2",{className:nK.inlineReviewThreadHeading,children:["Comment on line"," ",(0,r.jsxs)(iS,{children:[t,e.line]})]})}function iI({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,r.jsxs)("h2",{className:nK.inlineReviewThreadHeading,children:["Comment on lines"," ",(0,r.jsxs)(iS,{children:[t,e.startLine]})," ","to"," ",(0,r.jsxs)(iS,{children:[n,e.line]})]})}function iD({commentingImplementation:e,fileAnchor:t,filePath:n,threadId:i,threadPositionNumber:a,isOutdated:l,threads:s,threadsConnectionId:d,isFirstThread:m,enterDialogMode:h,ghostUser:f,manuallyUpdateCommentsWithThisThreadId:p,suggestedChangesConfig:g,...y}){let[x,b]=(0,c.useState)(void 0),{fetchThread:C,shouldRefetchThread:v}=e,N=(0,c.useRef)(null),j=(0,nP.A)("localStorage"),_=x?.isResolved,[w,k]=(0,c.useState)(""),[E,I]=(0,c.useState)(_??!1);(0,c.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${i}`);null!==e?I(JSON.parse(e)):_&&I(!0)},[_,i]);let D=(0,c.useCallback)(async(e,t=!0)=>{b(await C(e,t))},[C]);(0,c.useEffect)(()=>{D(i,!1)},[D,p,i]),n_({commentSubjectType:e.commentSubjectType,markerRef:N,isThread:!0,thread:x}),(0,c.useEffect)(()=>{x||D(i,!1)},[i,x,C,D]);let T=(0,c.useMemo)(()=>{if(t&&x&&x.subject?.startDiffSide&&x.subject?.endDiffSide&&x.subject?.startLine&&x.subject?.endLine&&g?.configureSuggestedChangesFromLineRange){let e=x.subject?.startLine??x?.subject?.endLine,n=x.subject?.startDiffSide??x?.subject?.endDiffSide,i={diffAnchor:t,endLineNumber:x?.subject?.endLine,endOrientation:x.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===n?"left":"right",startOrientation:"LEFT"===n?"left":"right"};return g?.configureSuggestedChangesFromLineRange(i)}},[t,x,g]);(0,c.useEffect)(()=>{x&&v?.(x)&&D(i,!0)},[D,v,x,i,s]);let{sendAnalyticsEvent:R}=(0,nB.s)(),{resolveThread:A,unresolveThread:F,resolvingEnabled:M}=e,O=s.find(e=>e.id===i);if(!x||!(x.commentsData.comments.length>0))return null;let $=!!x.isResolved,P=O?.commentsConnectionId,B=M&&x.commentsData.comments.some(e=>e.state?.toUpperCase()!=="PENDING");return(0,r.jsx)(o.t,{fallback:(0,r.jsx)(nz,{}),children:(0,r.jsxs)("div",{className:"rounded-2 bgColor-default",ref:N,children:[(0,r.jsxs)("div",{className:(0,S.$)("px-1",nK.ReviewThreadContainer),children:[(0,r.jsx)(nH.K0,{"aria-label":E?"Expand comment":"Collapse comment",icon:E?u.ChevronRightIcon:u.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{j.setItem(`reviewThreadIsCollapsed_${i}`,JSON.stringify(!E))}),I(e=>!e)},"data-is-first-collapse-button":m}),(0,r.jsx)(iE,{thread:O}),(0,r.jsxs)("div",{className:nK.ResolvableContainer,children:[$&&(0,r.jsx)(V.A,{variant:"secondary",children:"Resolved"}),B&&(0,r.jsx)(nU.m,{text:$?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,r.jsx)(nH.K0,{"aria-labelledby":"resolve-conversation",icon:$?u.CheckCircleFillIcon:u.CheckCircleIcon,sx:{color:$?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:$?()=>{x&&(F({threadId:x.id,onCompleted:()=>{v||D(x.id),I(!1),j.removeItem(`reviewThreadIsCollapsed_${i}`)},onError:()=>{k("Failed to unresolve thread")}}),R("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{x&&(A({threadId:x.id,onCompleted:()=>{v||D(x.id),I(!0),j.removeItem(`reviewThreadIsCollapsed_${i}`)},onError:()=>{k("Failed to resolve thread")}}),R("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))}})})]})]}),(0,r.jsxs)(c.Suspense,{fallback:(0,r.jsxs)("div",{className:nK.ThreadLoading,children:[(0,r.jsx)(t_.A,{}),(0,r.jsx)("p",{children:"Loading comments"})]}),children:[w&&(0,r.jsxs)(L.A,{variant:"danger",className:"m-2",children:[(0,r.jsx)(u.StopIcon,{className:"mr-2"}),w]}),!E&&(0,r.jsx)(ik,{enterDialogMode:h,commentingImplementation:e,commentsConnectionId:P,filePath:n,isInlineComment:!0,onRefreshThread:D,thread:x,threadPositionNumber:a,threadsConnectionId:d,suggestedChangesConfig:T,shouldLimitHeight:!1,...y,ghostUser:f})]})]})})}try{iS.displayName||(iS.displayName="Emphasis")}catch{}try{iE.displayName||(iE.displayName="ThreadBanner")}catch{}try{iL.displayName||(iL.displayName="SingleLineThreadBanner")}catch{}try{iI.displayName||(iI.displayName="MultineLineThreadBanner")}catch{}try{iD.displayName||(iD.displayName="InlineReviewThread")}catch{}let iT={[e8.Failure]:0,[e8.Warning]:1,[e8.Notice]:2};function iR(e){return(0,r.jsx)(nC,{children:(0,r.jsx)(iA,{...e})})}function iA({annotations:e,children:t,commentingImplementation:n,conversationListThreads:i,inlineMarkersRef:a,isMarkerListOpen:l,isRowSelected:s,fileAnchor:o,filePath:d,gutterSizeOffset:m,lineType:h,onAnnotationSelected:f,onCloseConversationList:p,onCloseFocusMode:g,onThreadSelected:y,returnFocusRef:x,selectedAnnotationId:b,selectedThreadId:C,threadsConnectionId:v,suggestedChangesConfig:N,manuallyUpdateCommentsWithThisThreadId:j,ghostUser:_,enterDialogMode:w,...k}){let E=(0,c.useCallback)(async e=>{let t=await n.fetchThread(e,!1);t&&i.push(t),I({})},[n,i]),[L,I]=(0,c.useState)({});(0,c.useEffect)(()=>{0===i.length&&j&&""!==j&&E(j)},[n,i.length,E,j]);let{isInDialogMode:D,enableInlineCommentDialogMode:T}=no(),R=(0,c.useRef)(null),A=(0,c.useMemo)(()=>[...e].sort((e,t)=>iT[e.annotationLevel]-iT[t.annotationLevel]),[e]),F=(0,c.useMemo)(()=>t?[...i,{id:"new-comment"},...A]:[...i,...A],[t,i,A]);return!function({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous",selectedMarkerId:a}){let r=(0,c.useRef)(void 0),l=(0,c.useRef)(void 0);(0,c.useEffect)(()=>{l.current=new MarkerNavigator(t,r.current?.focusedMarker?.id||a||void 0),r.current=l.current},[t,a]);let s=(0,c.useCallback)((e,t,n)=>{let i=n.key,a=!t?.hasAttribute("data-marker-id")&&!t?.hasAttribute("data-marker-navigation-comment-id");switch(!0){case a&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return t?.closest("[data-marker-navigation-comment-id]")||t?.closest("[data-marker-id]")||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(l.current&&t?.hasAttribute("data-marker-id")){let e=l.current.moveToNextMarker(i,t);if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(l.current&&t?.hasAttribute("data-marker-navigation-comment-id")){let e=l.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(t?.hasAttribute("data-marker-navigation-comment-id"))return t;if(t?.hasAttribute("data-marker-id"))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(t?.hasAttribute("data-marker-id"))return t;if(t?.hasAttribute("data-marker-navigation-comment-id"))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[l]);(0,tT.G)({containerRef:e,bindKeys:nv,getNextFocusable:s,focusableElementFilter:e=>e.hasAttribute("data-marker-id")||e.hasAttribute("data-marker-navigation-comment-id"),focusInStrategy:i,disabled:n},[s,n])}({containerRef:R,markers:F,disabled:!D,selectedMarkerId:C}),(0,r.jsxs)("div",{className:(0,S.$)("d-flex pt-1",D?n$.markersDialogActive:""),style:D?{marginRight:`-${m}`,backgroundColor:tu(h,!0,s)}:{marginRight:`-${m}`},onFocus:()=>{D||T()},"data-inline-markers":!0,ref:a,children:[(0,r.jsxs)("div",{className:n$.markersWrapper,ref:R,children:[i.map((e,t)=>(0,r.jsx)("div",{className:(0,S.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===F.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:D?0:-1,children:(0,r.jsx)(iD,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:j,enterDialogMode:w,isFirstThread:0===t,commentingImplementation:n,filePath:d,fileAnchor:o,threadId:e.id,isOutdated:e.isOutdated,threads:i,threadsConnectionId:v,onThreadSelected:y,suggestedChangesConfig:N,ghostUser:_,...k})},`review-thread-${e.id}`)),t,A.map((e,t)=>{let i=0===t&&e===F[0];return(0,r.jsx)(nO,{annotation:e,commentingImplementation:n,isFirstMarker:i},`annotation-${e.id}`)})]}),D&&(0,r.jsx)(K.K,{icon:u.UndoIcon,className:(0,S.$)(n$.closeMarkersDialogButton,"ml-2 position-relative",0===i.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:g,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&g()}})]})}try{iR.displayName||(iR.displayName="InlineMarkers")}catch{}try{iA.displayName||(iA.displayName="InlineMarkersInternal")}catch{}var iF=n(9745),iM=n(63557);function iO({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:i,onAddComment:a,onClose:l,viewerData:s,threadsConnectionId:o,showOnCloseIcon:d=!0,...c}){return(0,r.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[(0,r.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,r.jsxs)(iM.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2",children:[(0,r.jsx)(nw.r,{alt:s.login,size:24,src:s.avatarUrl||"",className:"mr-2"}),(0,r.jsx)("span",{children:e??"Add a comment"})]}),l&&d&&(0,r.jsx)(K.K,{variant:"invisible",icon:u.XIcon,onClick:l,"aria-label":"Cancel"})]}),(0,r.jsx)(n5,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:i,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:r})=>{a({text:e,onError:i,onCompleted:(e,n)=>{n&&nG(n.toString()),t?.(e,n)},submitBatch:r,filePath:n,threadsConnectionId:o})},onCancelComment:l,side:t?"LEFT":"RIGHT",...c})]})}try{iO.displayName||(iO.displayName="StartThreadComment")}catch{}function i$({align:e="end",anchorRef:t,isOpen:n,isDialog:i=!0,returnFocusRef:a,onCloseCommentDialog:l,suggestedChangesConfig:s,...o}){let{sendAnalyticsEvent:d}=(0,nB.s)(),{isInDialogMode:u}=no(),m=(0,c.useMemo)(()=>{if(n&&s?.configureSuggestedChangesFromLineRange)return s.configureSuggestedChangesFromLineRange(s?.selectedDiffRowRange,s?.shouldStartNewConversationWithSuggestedChange)},[n,s]);return n?i?(0,r.jsx)(iF.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",preventOverflow:!1,returnFocusRef:a,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:eb.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:l,children:(0,r.jsx)(iO,{onClose:()=>{l(),d("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:m,...o})}):(0,r.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-id":"new-comment",tabIndex:u?0:-1,children:(0,r.jsx)(iO,{onClose:()=>{l(),d("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:m,...o})}):null}try{i$.displayName||(i$.displayName="StartConversation")}catch{}function iP({cellId:e,actionBarRef:t,onOpenInLineThread:n}){let{replaceSelectedDiffRowRange:i}=tg(),{fileAnchor:a}=tI(),[r,l]=(0,c.useState)(t),{annotations:s,openDialog:o,closeDialog:d,selectedAnnotationId:u,selectAnnotationId:m,selectedThreadId:h,selectThreadId:f,openContextMenuCell:p,openNewConversationCell:g,openMarkerDetailsCell:y,threads:x,anyMenuOpen:b}=nf(),{sendAnalyticsEvent:C}=(0,nB.s)(),v=(0,c.useMemo)(()=>g?.cellId===e,[e,g]),N=(0,c.useMemo)(()=>g?.withSuggestedChange,[g]),j=(0,c.useCallback)(t=>{n?.(),o("new-conversation",e,t)},[e,n,o]),_=(0,c.useCallback)(()=>{j()},[j]),w=(0,c.useCallback)(()=>{j({withSuggestedChange:!0}),C("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[j,C]),k=(0,c.useCallback)(()=>{d("new-conversation")},[d]),S=(0,c.useMemo)(()=>p===e,[e,p]),E=(0,c.useCallback)(()=>{o("context-menu",e)},[e,o]),L=(0,c.useCallback)(()=>{l(t),E()},[t,E]),I=(0,c.useCallback)(()=>{d("context-menu")},[d]),D=(0,c.useCallback)(()=>{S?I():E()},[I,S,E]),T=(0,c.useCallback)(()=>{l(t),D()},[t,D]),R=(0,c.useMemo)(()=>y===e?h:void 0,[e,y,h]),A=(0,c.useMemo)(()=>y===e?u:void 0,[e,y,u]),F=(0,c.useCallback)(()=>{n?.()},[n]),M=tf((e,t={skipLineSelection:!1})=>{if(f(e),F(),t.skipLineSelection)return;let n=x.find(t=>t.id===e);if(n&&n.diffSide&&n.line){let e=n.startLine??n.line,t=n.startDiffSide??n.diffSide;i({diffAnchor:a,endLineNumber:n.line,endOrientation:"LEFT"===n.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}});return{isNewConversationDialogOpen:v,startNewConversation:_,closeNewConversation:k,startNewConversationWithSuggestedChange:w,shouldStartNewConversationWithSuggestedChange:N,isContextMenuOpen:S,openContextMenu:E,openContextMenuFromActionBar:L,closeContextMenu:I,toggleContextMenu:D,toggleContextMenuFromActionBar:T,optimizedSelectedThreadId:R,optimizedSelectedAnnotationId:A,selectThread:M,selectAnnotation:tf((e,t={skipLineSelection:!1})=>{if(m(e),F(),t.skipLineSelection)return;let n=s.find(t=>t.id===e);n&&i({diffAnchor:a,endLineNumber:n.endLine,endOrientation:"right",startLineNumber:n.startLine,startOrientation:"right",firstSelectedLineNumber:n.startLine,firstSelectedOrientation:"right"})}),openMarkersDialog:F,closeMarkerListDialog:(0,c.useCallback)(()=>{d("marker-list")},[d]),annotations:s,returnFocusRef:r,threads:x,anyMenuOpen:b}}function iB({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=nf(),[a,r]=(0,c.useState)(!1),l=(0,c.useCallback)(()=>{t()},[t]),s=(0,c.useCallback)(t=>{!i&&(e.current&&e.current.contains(t.relatedTarget)||n())},[i,e,n]),o=(0,c.useCallback)(()=>{t()},[t]),d=(0,c.useCallback)(()=>{!i&&(e.current===document.activeElement||e.current?.contains(document.activeElement)||n())},[i,e,n]),u=(0,c.useCallback)(t=>{e.current&&(i||(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&r(!1):(n(),r(!1))))},[i,e,n]);return{isActionBarFocused:a,handleCellBlur:s,handleCellFocus:l,handleCellMouseEnter:o,handleCellMouseLeave:d,handleActionBarBlur:u,handleActionBarFocusCapture:(0,c.useCallback)(e=>{i||(e.stopPropagation(),r(!0))},[i]),handleActionBarKeydownCapture:(0,c.useCallback)(e=>{!i&&nn(e.key)&&e.stopPropagation()},[i])}}function iU({fileAnchor:e}){let{isSplit:t,isLeftSide:n,diffLine:i}=tI(),{selectedDiffRowRange:a}=tg(),{getDiffSingleLineCode:r,getUnifiedDiffMultiLineCode:l,getSplitDiffMultiLineCode:s}=function(e,t){let{selectedDiffLines:n,getDiffLinesByDiffAnchor:i}=tg();return{getUnifiedDiffMultiLineCode:()=>{let n=i(e);if(!n||!t)return"";let{startOrientation:a,endOrientation:r,startLineNumber:l,endLineNumber:s}=t,o=0,d=0;return n.length>1&&(o=n.findIndex(e=>"left"===a?e.left===l:e.right===l),d=n.findIndex(e=>"left"===r?e.left===s:e.right===s)),tc(n.slice(o,d+1))},getDiffSingleLineCode:(t,n)=>{if(!t||!n)return"";let a=i(e)?.find(e=>"left"===t?e.left===n:e.right===n);return a?tc([a]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?tc(n.leftLines):tc(n.rightLines)}}(e,a);return(0,c.useCallback)(async()=>{let e=window.getSelection();return e&&""!==e.toString()?void document.execCommand("copy"):void 0===a||a?.startOrientation===a?.endOrientation&&a?.startLineNumber===a?.endLineNumber?void await (0,ng.D)(r(n?"left":"right",n?i?.left:i?.right)):t?void await (0,ng.D)(s(n?"left":"right")):void await (0,ng.D)(l())},[a,t,l,r,n,i?.left,i?.right,s])}function iH(e,t){switch(t){case"SHOW_MARKERS":return{userMinimized:!1,showMarkers:!0};case"USER_EXPANDED_MARKERS":return{showMarkers:!0,userMinimized:!1};case"USER_MINIMIZED_MARKERS":return{userMinimized:!0,showMarkers:!1};case"USER_EXITED_MARKERS_DIALOG":return{...e,showMarkers:!1}}}var iz=n(64515);let iK={"action-bar-position":"ActionBar-module__action-bar-position--INpbt","left-action-bar":"ActionBar-module__left-action-bar--B2Plj","left-action-bar-draft-compact":"ActionBar-module__left-action-bar-draft-compact--ru7MJ","left-action-bar-draft-relaxed":"ActionBar-module__left-action-bar-draft-relaxed--nHQ2x","left-action-bar-new":"ActionBar-module__left-action-bar-new--Emc9g",addCommentButtonNew:"ActionBar-module__addCommentButtonNew--EgyyF",actionBarArrowSizing:"ActionBar-module__actionBarArrowSizing--Fp2kh",actionBarHeight:"ActionBar-module__actionBarHeight--rjbc7",actionBarStartCommentWidth:"ActionBar-module__actionBarStartCommentWidth--f77cS","action-bar-button-group":"ActionBar-module__action-bar-button-group--mW855"};var iV=n(81817);let iG={commentIndicatorContainer:"CommentIndicator-module__commentIndicatorContainer--js8be",AvatarStack:"CommentIndicator-module__AvatarStack--jEc1l",Compact:"CommentIndicator-module__Compact--ZE18o",Relaxed:"CommentIndicator-module__Relaxed--BloMn",textStyles:"CommentIndicator-module__textStyles--F0_Xp"},iq={compact:{avatarSize:18},relaxed:{avatarSize:20}};function iW({shouldAnimateRef:e,lineSpacingPreference:t="relaxed"}){let{diffLine:n}=tI(),{ghostUser:i}=e2();(0,c.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:a}=iq[t],l=(n.threadsData?.totalCommentsCount||0)+(n.annotationsData?.totalCount||0);if(0===l)return null;let s={},o=[];n.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&o.push({id:e.id,level:e.annotationLevel})}),n.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?s[e?.author.login]=e.author:i?.login&&(s[i.login]=i)}));let d=[...o.sort((e,t)=>(nR[e.level]?.priority||0)<(nR[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,r.jsx)(nT,{annotationLevel:t.level},t.id):(0,r.jsx)(nI,{annotationLevel:t.level},t.id)),...Object.keys(s).map(e=>{let t=s[e]?.login,n=s[e]?.avatarUrl??(i?.avatarUrl||" ");return(0,r.jsx)(nw.r,{alt:t,size:20,src:n},t)})].slice(0,3),u=l>9?"9+":`${l}`;return(0,r.jsxs)("div",{className:(0,S.$)("d-flex","flex-justify-between","flex-items-center",iG.commentIndicatorContainer),children:[(0,r.jsx)(iV.A,{disableExpand:!0,size:a,className:(0,S.$)(iG.AvatarStack,"relaxed"===t?iG.Relaxed:iG.Compact),children:d}),(0,r.jsx)("span",{className:(0,S.$)("fgColor-default","ml-1",iG.textStyles),children:u})]})}try{iW.displayName||(iW.displayName="CommentIndicator")}catch{}var iQ=n(89141),iX=n(50874);function iY(){let{nextHunk:e,currentHunk:t,previousHunk:n}=tI(),{addInjectedContextLines:i}=e2(),a=!!t&&0!==t.startBlobLineNumber,r=!!t&&!!e;return{expandStartOfHunk:()=>{a&&t&&i({start:Math.max(0,t.startBlobLineNumber-20),end:t.startBlobLineNumber})},expandEndOfHunk:()=>{r&&t&&i({start:t.endBlobLineNumber+1,end:t.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:r,canExpandStartOfHunk:a}}let iJ={left:"L",right:"R"},iZ="Add comment",i0="Suggest change";function i1(e,t,n){let i=n&&!tn(t)?iJ.left:iJ.right;return`${e} on line ${i}${t.blobLineNumber}`}function i2({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let n,i,a,{selectedDiffRowRange:l,selectedDiffLines:s,replaceSelectedDiffRowRange:o}=tg(),{commentingEnabled:d}=e2(),{diffLine:m,isLeftSide:h,isSplit:f,diffContext:p}=tI(),g=(0,c.useMemo)(()=>s.leftLines[0],[s.leftLines]),y=(0,c.useMemo)(()=>s.leftLines[s.leftLines.length-1],[s.leftLines]),x=(0,c.useMemo)(()=>s.leftLines.every(e=>!tt(e)&&"DELETION"!==e.type),[s.leftLines]),b=(0,c.useMemo)(()=>s.rightLines[0],[s.rightLines]),C=(0,c.useMemo)(()=>s.rightLines[s.rightLines.length-1],[s.rightLines]),v=(0,c.useMemo)(()=>0===s.rightLines.length,[s.rightLines]),N=(0,c.useMemo)(()=>0===s.leftLines.length,[s.leftLines]),j=(0,c.useMemo)(()=>!(s.leftLines.find(e=>!tt(e)&&!tn(e)&&"INJECTED_CONTEXT"!==e.type)||s.rightLines.find(e=>!tt(e)&&!tn(e)&&"INJECTED_CONTEXT"!==e.type)),[s.leftLines,s.rightLines]),_=(0,c.useCallback)((n,i)=>{!(!l||!y||!g||tt(y)||tt(g))&&g.left&&y.left&&(o({diffAnchor:l.diffAnchor,endLineNumber:y.left,endOrientation:"left",startLineNumber:g.left,startOrientation:"left",firstSelectedLineNumber:g.left,firstSelectedOrientation:"left"}),i?.withSuggestedChange?e():t())},[l,y,g,o,e,t]),w=(0,c.useCallback)((n,i)=>{!(!l||!C||!b||tt(C)||tt(b))&&b.right&&C.right&&(o({diffAnchor:l.diffAnchor,endLineNumber:C.right,endOrientation:"right",startLineNumber:b.right,startOrientation:"right",firstSelectedLineNumber:b.right,firstSelectedOrientation:"right"}),i?.withSuggestedChange?e():t())},[l,C,b,o,e,t]),k="DELETION"!==m.type&&("pr"===p||void 0===p),S=(0,c.useMemo)(()=>!!l&&(l.startOrientation!==l.endOrientation||l.startLineNumber!==l.endLineNumber),[l]);if(!d)return null;let E=!1,L=!1;if(l&&S){let s=iJ[l.startOrientation],o=iJ[l.endOrientation];return a=` on lines ${s}${l.startLineNumber}-${o}${l.endLineNumber}`,!tt(g)&&!tt(y)&&g&&y&&(E=!0,n=g.left===y.left?v?` on line L${g.left}`:`, original line L${g.left}`:v?` on lines L${g.left}-L${y.right}`:`, original lines L${g.left}-L${y.left}`),!tt(b)&&!tt(C)&&b&&C&&(L=!0,i=b.right===C.right?N||f&&j?` on line R${b.right}`:`, modified line R${C.right}`:N||f&&j?` on lines R${b.right}-R${C.right}`:`, modified lines R${b.right}-R${C.right}`),(0,r.jsx)(r.Fragment,{children:f?(0,r.jsx)(r.Fragment,{children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(es.l.Item,{onSelect:w,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.PlusIcon,{})}),iZ+i,(0,r.jsx)(es.l.TrailingVisual,{children:(0,r.jsx)(iX.U,{keys:"Alt+n"})})]}),(0,r.jsxs)(es.l.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.PlusCircleIcon,{})}),i0+i]})]}):(0,r.jsxs)(r.Fragment,{children:[E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(es.l.Item,{onSelect:_,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.PlusIcon,{})}),iZ+n,(0,r.jsx)(es.l.TrailingVisual,{children:(0,r.jsx)(iX.U,{keys:v?"Alt+n":"Alt+Shift+N"})})]}),x&&(0,r.jsxs)(es.l.Item,{onSelect:e=>_(e,{withSuggestedChange:!0}),children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.PlusCircleIcon,{})}),i0+n]})]}):null,L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(es.l.Item,{onSelect:w,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.PlusIcon,{})}),iZ+i,(0,r.jsx)(es.l.TrailingVisual,{children:(0,r.jsx)(iX.U,{keys:"Alt+n"})})]}),(0,r.jsxs)(es.l.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.PlusCircleIcon,{})}),i0+i]})]}):null]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(es.l.Item,{onSelect:t,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.PlusIcon,{})}),iZ+a]}),k&&x&&(0,r.jsxs)(es.l.Item,{onSelect:e,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.PlusCircleIcon,{})}),i0+a]})]})})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(es.l.Item,{onSelect:t,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.PlusIcon,{})}),i1(iZ,m,h)]}),k&&(0,r.jsxs)(es.l.Item,{onSelect:e,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.PlusCircleIcon,{})}),i1(i0,m,h)]})]})}try{i2.displayName||(i2.displayName="StartConversationContextMenuItems")}catch{}function i4(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i6,{...e}),(0,r.jsx)(i8,{fileDiffReference:e.copilotChatReference}),(0,r.jsx)(ai,{handleCopyCode:e.handleCopyCode}),(0,r.jsx)(i9,{}),(0,r.jsx)(i3,{}),(0,r.jsx)(aa,{})]})}function i3(){let{diffLine:e,fileAnchor:t}=tI(),{selectedDiffRowRange:n}=tg(),i=(0,c.useCallback)(()=>{let i=tl({line:e,range:n,fileAnchor:t});i&&(0,ng.D)(i)},[t,e,n]);return(0,r.jsxs)(es.l.Item,{onSelect:i,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.LinkIcon,{})}),"Copy link",(0,r.jsx)(es.l.TrailingVisual,{children:(0,r.jsx)(iX.U,{keys:"Mod+Alt+y"})})]})}function i5(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ar,{}),(0,r.jsx)(i9,{})]})}let i8=e=>{let{selectedDiffRowRange:t}=tg(),{diffLine:n,isLeftSide:i,fileAnchor:a}=tI(),l=((e,t,n,i)=>{let a;if(e)return e;if(!tt(t)){let e=(n?t.left:t.right)??0,r=n?"left":"right";a={startOrientation:r,endOrientation:r,startLineNumber:e,endLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:r,diffAnchor:i}}return a})(t,n,i,a);return e.fileDiffReference?(0,r.jsx)(iQ.w,{showDivider:!0,selectedRange:l,fileDiffReference:e.fileDiffReference}):null};function i9(){let{fileAnchor:e}=tI();return(0,r.jsxs)(es.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.MultiSelectIcon,{})}),"Select all",(0,r.jsx)(es.l.TrailingVisual,{children:(0,r.jsx)(iX.U,{keys:"Mod+a"})})]})}function i6({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t,showStartConversation:n,startConversationCurrentLine:i,startConversationWithSuggestedChange:a}){let{commentingEnabled:l}=e2(),{annotations:s,threads:o}=nf(),d=s.length>0;return l&&(n||o||d)?(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsx)(i2,{handleStartConversation:i,handleStartConversationWithSuggestedChange:a}),(0,r.jsx)(i7,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}),(0,r.jsx)(es.l.Divider,{})]}):null}function i7({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{commentingEnabled:n}=e2(),{isSplit:i}=tI(),{viewerData:a}=e2();return n&&a.commentsPreference!==y.sI.Visible?i?(0,r.jsx)(ae,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}):(0,r.jsx)(at,{onSelect:()=>e(),shouldDisplayCollapseComments:t}):null}function ae({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{originalLineHasThreads:n,modifiedLineHasThreads:i,isLeftSide:a}=tI(),{annotations:l}=nf(),s=l.length>0;return a?(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsx)(an,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")}),(i||s)&&(0,r.jsx)(an,{text:t?"Collapse comments, modified line":"Expand comments, modified line",onSelect:()=>e("RIGHT")})]}):(0,r.jsxs)(r.Fragment,{children:[(i||s)&&(0,r.jsx)(an,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")}),n&&(0,r.jsx)(an,{text:t?"Collapse comments, original line":"Expand comments, original line",onSelect:()=>e("LEFT")})]})}function at({onSelect:e,shouldDisplayCollapseComments:t}){let{ghostUser:n}=e2(),{diffLine:i}=tI(),{annotations:a}=nf();return i&&tD(i.threadsData,n).length>0||a.length>0?(0,r.jsx)(an,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e()}):null}function an({onSelect:e,text:t}){return(0,r.jsxs)(es.l.Item,{onSelect:e,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.CommentDiscussionIcon,{})}),t]})}function ai({handleCopyCode:e}){return(0,r.jsxs)(es.l.Item,{onSelect:e,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.CopyIcon,{})}),"Copy",(0,r.jsx)(es.l.TrailingVisual,{children:(0,r.jsx)(iX.U,{keys:"Mod+c"})})]})}function aa(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=iY(),{previousHunk:n,nextHunk:i}=tI();return e||t||n||i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(es.l.Divider,{}),(0,r.jsx)(ar,{}),(0,r.jsx)(al,{})]}):null}function ar(){let{canExpandStartOfHunk:e,expandEndOfHunk:t,expandStartOfHunk:n,canExpandEndOfHunk:i}=iY();return(0,r.jsxs)(r.Fragment,{children:[e&&(0,r.jsxs)(es.l.Item,{onSelect:n,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.FoldUpIcon,{})}),"Expand above"]}),i&&(0,r.jsxs)(es.l.Item,{onSelect:t,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.FoldDownIcon,{})}),"Expand below"]})]})}function al(){let{previousHunk:e,nextHunk:t}=tI(),{fileAnchor:n}=tI();return(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsxs)(es.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.MoveToBottomIcon,{})}),"Go to next hunk",(0,r.jsx)(es.l.TrailingVisual,{children:"Page Down"})]}):null,e?(0,r.jsxs)(es.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.MoveToTopIcon,{})}),"Go to previous hunk",(0,r.jsx)(es.l.TrailingVisual,{children:"Page Up"})]}):null]})}try{i4.displayName||(i4.displayName="CellContextMenu")}catch{}try{i3.displayName||(i3.displayName="CopyAnchorLink")}catch{}try{i5.displayName||(i5.displayName="EmptyCellContextMenu")}catch{}try{i9.displayName||(i9.displayName="SelectAllListItem")}catch{}try{i6.displayName||(i6.displayName="MarkerListItems")}catch{}try{i7.displayName||(i7.displayName="ViewMarkerListItems")}catch{}try{ae.displayName||(ae.displayName="SplitDiffMarkersListItems")}catch{}try{at.displayName||(at.displayName="UnifiedDiffMarkerListItem")}catch{}try{an.displayName||(an.displayName="MarkerListItem")}catch{}try{ai.displayName||(ai.displayName="CopyContentListItems")}catch{}try{aa.displayName||(aa.displayName="HunkListItems")}catch{}try{ar.displayName||(ar.displayName="ExpandHunksListItems")}catch{}try{al.displayName||(al.displayName="JumpToHunkListItems")}catch{}var as=n(17998);let ao={InProgressCommentIndicatorBackground:"InProgressCommentIndicator-module__InProgressCommentIndicatorBackground--zV0pN",InProgressCommentIndicatorContainer:"InProgressCommentIndicator-module__InProgressCommentIndicatorContainer--HrW1B"};function ad({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n,sx:i}){return(0,r.jsx)(as.k,{altText:`${t}'s avatar image with pending indicator`,icon:u.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,sx:{...i},backgroundClassName:ao.InProgressCommentIndicatorBackground,className:ao.InProgressCommentIndicatorContainer})}try{ad.displayName||(ad.displayName="InProgressCommentIndicator")}catch{}let ac=(0,c.forwardRef)(function({authorAvatarUrl:e,authorLogin:t,cellId:n,cellRef:i,showStartConversation:a,hasDraftComment:l,copilotChatReference:s,handleCopyCode:o,onOpenInLineThread:d,shouldDisplayCollapseComments:m,toggleViewingMarkers:h},f){let p=(0,c.useRef)(null),g=(0,c.useRef)(null),{commentingEnabled:x,viewerData:{lineSpacingPreference:b,commentsPreference:C}}=e2(),{diffLine:v}=tI(),N=(0,c.useRef)(null),j=p.current?p:g;(0,iz.T)(f,j);let _=v.threadsData?.totalCommentsCount||0,w=v.annotationsData?.totalCount||0,{isActionBarFocused:k,handleActionBarBlur:E,handleActionBarFocusCapture:L,handleActionBarKeydownCapture:I}=iB({cellRef:i}),{annotations:D,isContextMenuOpen:T,startNewConversation:R,startNewConversationWithSuggestedChange:A,anyMenuOpen:F,threads:M,toggleContextMenu:O,toggleContextMenuFromActionBar:$}=iP({cellId:n,actionBarRef:N,onOpenInLineThread:d}),P=x&&_+w>0&&C===y.sI.Collapsed,B=x&&a,U={onBlur:E,onFocusCapture:L,onKeyDownCapture:I};return(0,r.jsxs)(r.Fragment,{children:[B&&(0,r.jsx)("div",{"aria-hidden":!k,className:(0,S.$)("d-flex","flex-row",iK["left-action-bar"]),children:(0,r.jsx)(r.Fragment,{children:l?(0,r.jsx)(H.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,S.$)("py-0","compact"===b?iK["left-action-bar-draft-compact"]:iK["left-action-bar-draft-relaxed"],iK.actionBarHeight),onClick:R,...U,children:(0,r.jsx)(ad,{lineSpacingPreference:b,authorAvatarUrl:e,authorLogin:t})}):(0,r.jsx)(H.Q,{icon:u.PlusIcon,"aria-label":"Add comment",ref:g,size:"small",className:(0,S.$)("fgColor-muted","bgColor-accent-emphasis","fgColor-onEmphasis","px-0",iK["left-action-bar-new"],iK.addCommentButtonNew,iK.actionBarHeight,iK.actionBarStartCommentWidth),onClick:R,...U})})}),(0,r.jsx)("div",{"aria-hidden":!k,className:(0,S.$)("d-flex","flex-row",iK["action-bar-position"]),children:(0,r.jsxs)(io.A,{className:iK["action-bar-button-group"],...U,children:[P&&(0,r.jsx)(H.Q,{ref:p,"aria-expanded":F,"aria-label":"View comments",size:"small",className:(0,S.$)("py-0","px-1",iK.actionBarHeight),onClick:e=>{(1===M.length||1===D.length)&&e.preventDefault(),h?.()},children:(0,r.jsx)(iW,{lineSpacingPreference:b})}),(0,r.jsxs)(nx.W,{anchorRef:N,open:T,onOpenChange:O,children:[(0,r.jsx)(nx.W.Anchor,{children:(0,r.jsx)(H.Q,{ref:N,"aria-haspopup":"true","aria-label":"More actions",icon:u.TriangleDownIcon,size:"small",className:(0,S.$)("fgColor-muted",iK.actionBarArrowSizing),onClick:$})}),(0,r.jsx)(nx.W.Overlay,{width:"medium",children:(0,r.jsx)(es.l,{children:(0,r.jsx)(i4,{shouldDisplayCollapseComments:m,copilotChatReference:s,showStartConversation:a,handleCopyCode:o,handleViewMarkersSelection:h,startConversationCurrentLine:R,startConversationWithSuggestedChange:A})})})]})]})})]})});ac.displayName="ActionBar";let au={visibilityHidden:"DiffHighlightedOverlay-module__visibilityHidden--OT0yL",userSelectNone:"DiffHighlightedOverlay-module__userSelectNone--ubGdL",focusedResultStyles:"DiffHighlightedOverlay-module__focusedResultStyles--JG6X3",nonFocusedResultStyles:"DiffHighlightedOverlay-module__nonFocusedResultStyles--JUCld",nonHunkStyles:"DiffHighlightedOverlay-module__nonHunkStyles--JFK7K"};function am({searchResults:e,focusedSearchResult:t,className:n,styleObject:i}){let a=0,l=e[0]?.text??"",s=e[0]?.diffLineNumIndex??-1,o=`overlay-${s}-${l}`;return(0,r.jsxs)("span",{className:(0,S.$)(n,"position-absolute",au.userSelectNone,!e[0].isHunk&&au.nonHunkStyles),style:{...i},children:[e.map(e=>{var n,i;let s=e.indexWithinPathDigest===t,o=(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:(0,S.$)(au.visibilityHidden,au.userSelectNone),children:l.substring(a,e.column)}),(0,r.jsx)("span",{className:(0,S.$)(au.userSelectNone,s&&au.focusedResultStyles,!s&&au.nonFocusedResultStyles),children:(0,r.jsx)("span",{className:(0,S.$)(!s&&au.visibilityHidden),id:(n=e.indexWithinPathDigest,i=e.pathDigest,`match-${i}-${n}`),children:l.substring(e.column,e.columnEnd)})})]},`find-match-${e.diffLineNumIndex}-${e.column}`);return a=e.columnEnd,o}),(0,r.jsx)("span",{className:(0,S.$)(au.visibilityHidden,au.userSelectNone),children:l.substring(a)})]},o)}try{am.displayName||(am.displayName="DiffHighlightedOverlay")}catch{}function ah({diffLine:e}){let t=function(e){let t=(e.annotationsData?.annotations??[]).length>0,n=(e.threadsData?.threads??[]).length>0;switch(!0){case t&&n:return"Code has comments and alerts. Press enter to view.";case n:return"Code has comments. Press enter to view.";case t:return"Code has alerts. Press enter to view.";default:return""}}(e);return t?(0,r.jsx)("span",{className:"sr-only user-select-none",children:t}):null}try{ah.displayName||(ah.displayName="DiffLineScreenReaderSummary")}catch{}let af={"comment-indicator":"DiffLineTableCellParts-module__comment-indicator--EOzeT","in-progress-comment-indicator":"DiffLineTableCellParts-module__in-progress-comment-indicator--DmbGA"},ap=["CONTEXT","INJECTED_CONTEXT"];function ag(e){let{rowId:t}=tI();if(t)return te(t,e)}let ay=(0,c.forwardRef)(function({children:e,ContextMenu:t,className:n,columnIndex:i,handleDiffCellClick:a,handleDiffCellMouseDown:l,handleExitDialogMode:s,handleHideMarkersFromFocus:o,handleDiffSideCellSelectionBlocking:d,handleStartConversation:u,handleUserClosedMarkersDialog:m,lineAnchor:h,firstLineNumberSelection:f,commentDialogOpen:p,enterDialogMode:g,hasThreads:y,...x},b){let{diffLine:C,fileAnchor:v,isRowSelected:j,isLeftSide:_}=tI(),w=(0,c.useRef)(null);(0,c.useImperativeHandle)(b,()=>w.current,[]);let[k,S]=(0,c.useState)(!1),{selectedDiffRowRange:E}=tg(),{disableInlineCommentDialogMode:L,isInDialogMode:I}=no(),D=(0,c.useRef)(null),T=(0,ny.U)(e=>{if(!e.target)return;let t=e.target;if(!k||D.current?.contains(t)||w.current?.contains(t)||2!==e.button?w.current?.contains(t)&&e.target.closest("button")?.contains(t)&&S(!1):S(!1),I){let t=!e.target.closest("[data-inline-markers]"),n=!e.target.closest("#__primerPortalRoot__");t&&n&&L()}});(0,c.useEffect)(()=>(N.XC?.addEventListener("mousedown",T),()=>N.XC?.removeEventListener("mousedown",T)),[T]),(0,c.useEffect)(()=>()=>N.XC?.removeEventListener("mousedown",T),[]);let R=(0,c.useCallback)(()=>{let e=tl({line:C,range:E,fileAnchor:v});e&&(0,ng.D)(e)},[v,C,E]),A=(0,c.useCallback)(()=>{f?.current&&(f.current=null)},[f]),F=(0,c.useCallback)(e=>{let t=e.target?.closest("td"),n=t?.classList.contains("diff-line-number");e.shiftKey?e.preventDefault():n?l?.():f&&(f.current=null),f&&n&&(f.current=_?C.left:C.right),d?.(e)},[d]),M=(0,c.useCallback)(()=>{w.current?.focus(),L(),s?.(),m?.()},[L,s,m]),O=iU({fileAnchor:v}),$=(0,c.useCallback)(async e=>{if(e.target===w.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault(),await O();return}if(e.target===w.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void R();if(w.current?.contains(e.target)&&e?.key==="Escape")return void M();if(w.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),w.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(w.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),w.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===w.current&&"Enter"===e.key&&(g?.(),!1===y&&u?.(),e.preventDefault())},[O,R,M,g,y,u]),P=`inline-dialog-heading-${(0,c.useId)()}`;return(0,r.jsxs)("td",{ref:w,"data-grid-cell-id":ag(i),"data-line-anchor":h,"data-selected":j,role:I?"dialog":"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${i<3?"left-side":""}`:"focusable-grid-cell",onKeyDown:$,onBlur:e=>e.target.ariaSelected="false",onClick:a,onFocus:e=>e.target.ariaSelected="true",onMouseDown:F,onMouseUp:A,"aria-labelledby":I?P:void 0,...x,children:[I&&(0,r.jsx)("h1",{id:P,className:"sr-only",children:"Comment view"}),e,t&&k&&(0,r.jsx)(nx.W,{anchorRef:w,open:!0,onOpenChange:S,children:(0,r.jsx)(nx.W.Overlay,{width:e?"medium":"small",children:(0,r.jsx)(es.l,{children:t})})})]})});function ax(){let{isSplit:e}=tI();return(0,r.jsx)("div",{className:(0,S.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,r.jsx)(u.KebabHorizontalIcon,{})})}let ab=(0,c.forwardRef)(function({searchResultsForLine:e,focusedSearchResult:t,columnIndex:n,lineAnchor:i,firstLineNumberSelection:a,handleDiffCellClick:l,handleDiffSideCellSelectionBlocking:s,filePath:o,copilotChatReference:d},m){let{diffLine:h,fileAnchor:f,isLeftSide:p,isRowSelected:g}=tI(),x=(0,O.u)("react_diff_line_type_character_correction"),[b,C]=ti(h.html,h.type,x),v=C&&["+","-"].includes(C),[N,j]=(0,c.useState)(""),{isActionBarVisible:_}=nf(),{selectedDiffRowRange:w,selectedDiffLines:k}=tg(),{commentBatchPending:E,commentingEnabled:L,commentingImplementation:I,initialExpandedThreadId:D,markerNavigationImplementation:T,repositoryId:R,subjectId:A,subject:F,viewerData:M}=e2(),{hasPersistedComment:P}=nZ({diffSide:p?"LEFT":"RIGHT",filePath:o,line:h.blobLineNumber,subjectId:A,fileLevelComment:!1}),{isInDialogMode:B,enableInlineCommentDialogMode:U,disableInlineCommentDialogMode:H}=no(),z=(0,c.useRef)(null),K=(0,c.useRef)(null);(0,c.useImperativeHandle)(m,()=>K.current,[]);let V=!!h.threadsData?.threads?.length||!!h.annotationsData?.annotations?.length,G=function({hasThreads:e}){return e?"80px":"24px"}({hasThreads:V&&M.commentsPreference===y.sI.Collapsed}),q=function(e,t,n){let{selectedDiffRowRange:i}=tg();return(0,c.useMemo)(()=>{let a="Add a comment on",r=!!i&&i.startLineNumber!==i.endLineNumber;if(i&&r&&n){let e={left:"L",right:"R"},t=e[i.startOrientation],n=e[i.endOrientation];a+=i.startLineNumber!==i.endLineNumber?` lines ${t}${i.startLineNumber} to ${n}${i.endLineNumber}`:` line ${t}${i.startLineNumber}`}else{let n=t&&!tn(e)?"L":"R";a+=` line ${n}${e.blobLineNumber}`}return a},[e,t,i,n])}(h,!!p,g),W=ag(n),{handleCellBlur:Q,handleCellFocus:X,handleCellMouseEnter:Y,handleCellMouseLeave:J}=iB({cellRef:K}),Z=(0,c.useRef)(null),[ee,et]=function(e){let[t,n]=(0,c.useReducer)(iH,{userMinimized:e===y.sI.Collapsed,showMarkers:!1}),i=(0,c.useRef)(e);return(0,c.useEffect)(()=>{i.current!==e&&(i.current=e,e===y.sI.Visible?n("SHOW_MARKERS"):n("USER_MINIMIZED_MARKERS"))},[e,n]),[t,n]}(M.commentsPreference),en=(0,c.useCallback)((e=!0)=>{K.current?.classList.contains("diff-text-cell")&&(U(),et("USER_EXPANDED_MARKERS"),e&&setTimeout(()=>{K.current?.querySelector('[data-first-marker="true"]')?.focus()},0))},[et,U]),ei=(0,c.useCallback)(()=>{setTimeout(()=>K.current?.focus()),H(),et("USER_MINIMIZED_MARKERS")},[H,et]),ea=(0,c.useCallback)(()=>{M.commentsPreference===y.sI.Collapsed&&ee.showMarkers?ei():en()},[ei,en,ee.showMarkers,M.commentsPreference]),{annotations:er,isNewConversationDialogOpen:el,shouldStartNewConversationWithSuggestedChange:es,startNewConversation:eo,startNewConversationWithSuggestedChange:ed,selectAnnotation:ec,selectThread:eu,closeNewConversation:em,closeMarkerListDialog:eh,returnFocusRef:ef,optimizedSelectedAnnotationId:ep,optimizedSelectedThreadId:eg,threads:ey}=iP({cellId:W,actionBarRef:z,onOpenInLineThread:en}),ex=(0,c.useMemo)(()=>{var e;return!el&&(e=M.viewerCanComment,L&&e&&((e,t)=>{if(!e)return!1;let n=t.leftLines.concat(t.rightLines);return n.length>0&&n.includes(e)?n.every(e=>!tt(e)&&td.includes(e.type)):!tt(e)&&td.includes(e.type)})(h,k))},[el,L,M.viewerCanComment,h,k]);(0,c.useEffect)(()=>{I&&D&&eg!==D&&ey.map(e=>e.id).includes(D)&&eu(D,{skipLineSelection:!0})},[D]),(0,c.useEffect)(()=>{if(!T)return;let{activeGlobalMarkerID:e}=T;if(e){let t=ey.map(e=>e.id),n=er.map(e=>e.id);t.includes(e)?eu(e,{skipLineSelection:!0}):n.includes(e)&&ec(e,{skipLineSelection:!0})}},[eu,ey,T,er,ec]);let eb=function(e,t,n){let{sendAnalyticsEvent:i}=(0,nB.s)(),{getDiffLinesFromLineRange:a,selectedDiffRowRange:r}=tg(),l=tf(function(n,r){if(!e)return;let l=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=a(e)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(n);return{isValidSuggestionRange:l,showSuggestChangesButton:l,sourceContentFromDiffLines:l?function(e){let n=a(e)?.selectedRightLines;if(e&&n&&n.length>1)return tc(n);if(!t)return"";let[i]=ti(t.text,t.type);return i}(n):void 0,onInsertSuggestedChange:()=>{i("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:r}});return(0,c.useMemo)(()=>({selectedDiffRowRange:r,configureSuggestedChangesFromLineRange:l,shouldStartNewConversationWithSuggestedChange:n}),[r,l,n])}(I?.suggestedChangesEnabled,h,es),eC=(0,c.useCallback)(()=>{en?.(),eo?.()},[en,eo]),ev=(0,c.useCallback)(()=>{B||0!==(K.current?.querySelectorAll(":focus")??[]).length||H()},[H,B]),eN=(0,c.useRef)(!0),{ghostUser:ej}=e2(),e_=iU({fileAnchor:f}),ew=(0,c.useMemo)(()=>V&&M.commentsPreference===y.sI.Collapsed?!ee.userMinimized:(!!el||!!V)&&!!L&&(M.commentsPreference===y.sI.Collapsed&&(!!el||!!B)||M.commentsPreference===y.sI.Visible&&(!!V||!!el||!!ee.showMarkers)||!1),[L,V,B,el,ee.showMarkers,ee.userMinimized,M.commentsPreference]),ek=(0,c.useMemo)(()=>!!(h.text.length<1&&("CONTEXT"===h.type||"INJECTED_CONTEXT"===h.type)||("DELETION"===h.type||"ADDITION"===h.type)&&1===h.text.length&&["+","-"].includes(h.text.charAt(0))),[h]);return(0,r.jsxs)(ay,{ref:K,columnIndex:n,commentDialogOpen:el,handleDiffCellClick:l,enterDialogMode:en,handleDiffSideCellSelectionBlocking:s,handleExitDialogMode:()=>et("USER_EXITED_MARKERS_DIALOG"),handleUserClosedMarkersDialog:()=>et("USER_MINIMIZED_MARKERS"),lineAnchor:i,firstLineNumberSelection:a,handleStartConversation:eC,hasThreads:V,ContextMenu:(0,r.jsx)(i4,{shouldDisplayCollapseComments:ew,copilotChatReference:d,showStartConversation:ex,handleViewMarkersSelection:ea,startConversationCurrentLine:eC,startConversationWithSuggestedChange:ed}),className:(0,S.$)(`diff-text-cell ${p?"left-side-diff-cell":"right-side-diff-cell"} ${ek?"pt-4":""}`,{"border-right":p&&"HUNK"!==h.type}),style:{backgroundColor:tu(h.type,!1,g),paddingRight:G},onBlur:e=>{Q(e),ev()},onFocus:X,onMouseEnter:Y,onMouseLeave:J,children:[(0,r.jsxs)("code",{className:(0,S.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===h.type,deletion:"DELETION"===h.type}),children:[v&&(0,r.jsx)("span",{className:"diff-text-marker",children:C}),e&&e.length>0&&(0,r.jsx)(am,{searchResults:e,focusedSearchResult:t,className:(0,S.$)("diff-text-inner",{"color-fg-muted":"HUNK"===h.type})}),(0,r.jsx)($.$6,{html:b,className:(0,S.$)("diff-text-inner",{"color-fg-muted":"HUNK"===h.type})})]}),h.displayNoNewLineWarning&&(0,r.jsx)(u.NoEntryIcon,{size:16,className:"fgColor-danger"}),_&&(0,r.jsx)(ac,{shouldDisplayCollapseComments:ee.showMarkers,copilotChatReference:d,authorAvatarUrl:M.avatarUrl,authorLogin:M.login,ref:z,cellId:W,cellRef:K,hasDraftComment:P,showStartConversation:ex,onOpenInLineThread:en,handleCopyCode:e_,toggleViewingMarkers:ea}),I&&T&&(0,r.jsx)(r.Fragment,{children:ew?(0,r.jsx)(iR,{gutterSizeOffset:G,inlineMarkersRef:Z,manuallyUpdateCommentsWithThisThreadId:N,annotations:er,enterDialogMode:en,batchPending:E,batchingEnabled:I.batchingEnabled,commentingImplementation:{...I,deleteComment:({onCompleted:e,...t})=>{I&&h&&I.deleteComment({...t,onCompleted:()=>{e?.(),ey.length<=1&&setTimeout(()=>K.current?.focus())},filePath:o})}},conversationListThreads:ey,fileAnchor:f,filePath:o,onCloseFocusMode:ei,isMarkerListOpen:!!K.current?.classList.contains("diff-text-cell")&&ey.length>0,isRowSelected:g,lineType:h.type,repositoryId:R,returnFocusRef:ef,selectedAnnotationId:ep,selectedThreadId:eg||(K.current?.classList.contains("diff-text-cell")&&ey.length>0?ey[0]?.id:null),subjectId:A,subject:F,suggestedChangesConfig:eb,onCloseConversationList:eh,onAnnotationSelected:ec,onThreadSelected:eu,viewerData:M,ghostUser:ej,children:el&&(0,r.jsx)("div",{className:(0,S.$)(" border rounded-2 color-border-default",(ey.length,"mt-2 mb-1")),children:(0,r.jsx)(i$,{isDialog:!1,addCommentDialogTitle:q,anchorRef:K,batchPending:E,batchingEnabled:I.batchingEnabled,commentBoxSubject:I.commentBoxSubject,filePath:o,isLeftSide:!!p,isOpen:el,lineNumber:g?w?.endLineNumber:h.blobLineNumber,repositoryId:R,returnFocusRef:ef,startLineNumber:g?w?.startLineNumber:void 0,subjectId:A,suggestedChangesConfig:eb,viewerData:M,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!I||!h)return;let{leftLines:i,rightLines:a}=k;if(w){var r;let e="left"===w.endOrientation?i:a,n=e[e.length-1];n&&(r=n)&&r!==e9&&n.threadsData?.__id&&(t=n.threadsData?.__id)}I.addThread({...n,diffLine:h,isLeftSide:p,isLineSelected:g,selectedDiffRowRange:w,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),eu(t),j(t)}})},onCloseCommentDialog:()=>{ei(),em()}})})}):null}),!_&&M.commentsPreference===y.sI.Collapsed&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===M.lineSpacingPreference?"-1px":"-2px"},className:(0,S.$)("position-absolute top-0 d-flex user-select-none",af["in-progress-comment-indicator"]),children:P&&(0,r.jsx)(ad,{lineSpacingPreference:M.lineSpacingPreference,authorAvatarUrl:M.avatarUrl,authorLogin:M.login})}),(0,r.jsx)("div",{"aria-hidden":"true",className:(0,S.$)("position-absolute top-0 d-flex user-select-none",af["comment-indicator"]),children:(0,r.jsx)(iW,{shouldAnimateRef:eN,lineSpacingPreference:M.lineSpacingPreference})})]}),(0,r.jsx)(ah,{diffLine:h})]})}),aC=(0,c.memo)(ab),av=(0,c.memo)(aN);function aN({children:e,columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:i,firstLineNumberSelection:a,filePath:l,copilotChatReference:s,contentRef:o,...d}){let u=(0,c.useRef)(null),{diffLine:m,fileAnchor:h,isLeftSide:f,isRowSelected:p}=tI(),{updateSelectedDiffRowRange:g}=tg(),y=(0,c.useCallback)(()=>{a&&null!==a.current&&g(h,f?m.left:m.right,f?"left":"right",!0,!0)},[h,f,m.left,m.right,a,g]),x=(0,c.useCallback)(()=>{g(h,f?m.left:m.right,f?"left":"right",!1,!0)},[h,f,m.left,m.right,g]);return(0,r.jsx)(ay,{ref:u,className:(0,S.$)("diff-line-number position-relative",ap.includes(m.type)&&"diff-line-number-neutral"),columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:i,firstLineNumberSelection:a,style:{backgroundColor:tu(m.type,!0,p),textAlign:"center"},handleDiffCellMouseDown:x,onMouseEnter:y,...d,children:(0,r.jsx)("code",{children:e})})}function aj({ContextMenu:e,renderHunkButton:t,searchResultsForLine:n,focusedSearchResult:i}){let a=(0,c.useRef)(null),[l,s]=function(e){let[t,n]=(0,c.useState)(!1),[i,a]=(0,c.useState)(!1),r=(0,c.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]),l=(0,c.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),s=(0,c.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),a(!1)},[e]),o=(0,c.useCallback)(e=>{e.stopPropagation(),a(!0)},[]);return[{onFocus:l,onBlur:r},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:s,onFocusCapture:o,onKeyDownCapture:(0,c.useCallback)(e=>{nn(e.key)&&e.stopPropagation()},[])}]}(a),{diffLine:o}=tI();return(0,r.jsx)(ay,{ref:a,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...l,className:"diff-hunk-cell",children:(0,r.jsxs)("div",{className:"d-flex flex-row",children:[t?.(s)??(0,r.jsx)(ax,{}),(0,r.jsxs)("code",{className:"diff-text-cell hunk",children:[n&&n.length>0&&(0,r.jsx)(am,{searchResults:n,focusedSearchResult:i,className:(0,S.$)("diff-text-inner",{"color-fg-muted":"HUNK"===o.type})}),(0,r.jsx)($.$6,{className:"diff-text-inner color-fg-muted",html:o.html})]})]})})}function a_({columnIndex:e,showRightBorder:t}){return(0,r.jsx)(ay,{ContextMenu:(0,r.jsx)(i5,{}),className:(0,S.$)("empty-diff-line",{"border-right":t}),columnIndex:e})}try{ay.displayName||(ay.displayName="Cell")}catch{}try{ax.displayName||(ax.displayName="HunkKebabIcon")}catch{}try{ab.displayName||(ab.displayName="ContentCellUnmemoized")}catch{}try{aC.displayName||(aC.displayName="ContentCell")}catch{}try{av.displayName||(av.displayName="LineNumberCell")}catch{}try{aN.displayName||(aN.displayName="LineNumberCellUnmemoized")}catch{}try{aj.displayName||(aj.displayName="HunkCell")}catch{}try{a_.displayName||(a_.displayName="EmptyCell")}catch{}let aw=({resultsForLine:e,focusedSearchResult:t,handleDiffSideCellSelectionBlocking:n,handleDiffRowClick:i,lineAnchor:a,filePath:l,copilotChatReference:s,firstLineNumberSelection:o})=>{let{diffLine:d,hasHiddenUnicodeCharacters:u,isLeftSide:m,isSplit:h,setInGridMode:f}=tI(),p=(0,c.useRef)(null),g="ADDITION"!==d.type,y=!h||m,x=y&&!g,b="DELETION"!==d.type,C=!h||!m,v=C&&!b,N=(0,c.useCallback)(e=>{d.left&&i(e,d.left,"left",e.shiftKey,!0)},[i,d.left]),j=(0,c.useCallback)(e=>{d.left&&i(e,d.left,"left",e.shiftKey,!1)},[i,d.left]),_=(0,c.useCallback)(e=>{d.right&&i(e,d.right,"right",e.shiftKey,!0)},[i,d.right]),w=(0,c.useCallback)(e=>{d.right&&i(e,d.right,"right",e.shiftKey,!1)},[i,d.right]),k=(0,c.useCallback)(()=>{n&&n("left")},[n]),S=(0,c.useCallback)(()=>{n&&n("right")},[n]);return(0,r.jsxs)(nh,{line:d,children:[y&&(0,r.jsxs)(av,{copilotChatReference:s,columnIndex:0,filePath:l,handleDiffCellClick:x?_:N,handleDiffSideCellSelectionBlocking:S,firstLineNumberSelection:o,contentRef:p,children:[u&&!b&&(0,r.jsx)(aS,{children:(0,r.jsx)(nr.o,{})}),g&&d.left]}),C&&(0,r.jsxs)(av,{copilotChatReference:s,columnIndex:h?2:1,filePath:l,handleDiffCellClick:v?N:_,handleDiffSideCellSelectionBlocking:k,firstLineNumberSelection:o,contentRef:p,children:[u&&b&&(0,r.jsx)(aS,{children:(0,r.jsx)(nr.o,{})}),b&&d.right]}),(0,r.jsx)(ns,{enableDiffGridMode:f,children:(0,r.jsx)(aC,{copilotChatReference:s,columnIndex:h?m?1:3:2,filePath:l,handleDiffCellClick:m?j:w,lineAnchor:a,handleDiffSideCellSelectionBlocking:m?S:k,searchResultsForLine:e,focusedSearchResult:t,firstLineNumberSelection:o,ref:p})})]})},ak=({resultsForLine:e,focusedSearchResult:t,fileAnchor:n,filePath:i,handleDiffRowClick:a,handleDiffSideCellSelectionBlocking:l,copilotChatReference:s,firstLineNumberSelection:o})=>{let{diffLine:d,isLeftSide:c}=tI();if(tt(d))return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a_,{columnIndex:2*!c}),(0,r.jsx)(a_,{columnIndex:c?1:3,showRightBorder:c})]});let u=c?"left":(0,eq.XU)(d.type),m="left"===u?d.left:d.right,h=(0,eq.IQ)(n,u,m??0);switch(d.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,r.jsx)(aL,{copilotChatReference:s,filePath:i,handleDiffRowClick:a,handleDiffSideCellSelectionBlocking:l,lineAnchor:h,resultsForLine:e,focusedSearchResult:t,firstLineNumberSelection:o});default:throw Error(`cannot handle type ${d.type}`)}};function aS({children:e}){return(0,r.jsx)("span",{className:"position-absolute",style:{left:"-1px",zIndex:"1"},children:e})}let aE=c.memo(ak),aL=c.memo(aw);try{aw.displayName||(aw.displayName="CodeDiffLineUnmemoized")}catch{}try{ak.displayName||(ak.displayName="DiffLineSideUnmemoized")}catch{}try{aS.displayName||(aS.displayName="DiffCodeAlert")}catch{}try{aE.displayName||(aE.displayName="DiffLineSide")}catch{}try{aL.displayName||(aL.displayName="CodeDiffLine")}catch{}let aI={"expand-button-line":"ExpandableHunkHeaderDiffLine-module__expand-button-line--iUeM1","expand-up-and-down":"ExpandableHunkHeaderDiffLine-module__expand-up-and-down--_W5im","expand-button-unified":"ExpandableHunkHeaderDiffLine-module__expand-button-unified--zEXxI"};function aD({direction:e,icon:t,label:n,onClick:i,ariaLabel:a,className:l,...s}){let{sendAnalyticsEvent:o}=(0,nB.s)(),{isSplit:d}=tI();return(0,r.jsx)("button",{onClick:()=>{i(),o("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,S.$)("Button Button--iconOnly Button--invisible",aI["expand-button-line"],!d&&aI["expand-button-unified"],l),"aria-label":a??n,"data-direction":e,...s,children:(0,r.jsx)(t,{})})}function aT({nextLine:e,prevLine:t,resultsForLine:n,focusedSearchResult:i}){let{fileLineCount:a,diffLine:l}=tI(),{expandStartOfHunk:s,expandEndOfPreviousHunk:o}=iY(),d=!t,m=!e,h=0===l.blobLineNumber,f=d||m,p=m&&l.blobLineNumber===a,g=(0,c.useMemo)(()=>!f&&!(l.blobLineNumber<=0)&&(!!(l.blobLineNumber-t.blobLineNumber<=20)||!!(e.blobLineNumber-l.blobLineNumber>=20)),[f,l,e,t]),y=(0,c.useMemo)(()=>!f&&!p&&l.blobLineNumber-t.blobLineNumber>20,[f,p,l,t]),x=(0,c.useMemo)(()=>!(l.blobLineNumber<=0)&&!h&&!!d,[d,h,l]),b=(0,c.useMemo)(()=>!d&&!p&&!!m,[d,m,p]),C=(0,c.useMemo)(()=>{switch(!0){case g:return"expand-all";case y:return"expand-up-and-down";case x:return"expand-up";case b:return"expand-down"}},[g,y,x,b]),v=()=>s(),N=()=>o(),j=()=>s();return(0,r.jsx)(aj,{searchResultsForLine:n,focusedSearchResult:i,renderHunkButton:n=>{switch(C){case"expand-all":return(0,r.jsx)(aD,{...n,direction:"all",icon:u.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:j});case"expand-up-and-down":return(0,r.jsxs)("div",{className:"d-flex flex-column",children:[(0,r.jsx)(aD,{...n,direction:"down",icon:u.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,className:aI["expand-up-and-down"],onClick:N}),(0,r.jsx)(aD,{...n,direction:"up",icon:u.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,className:aI["expand-up-and-down"],onClick:v})]});case"expand-up":return(0,r.jsx)(aD,{...n,direction:"up",icon:u.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:v});case"expand-down":return(0,r.jsx)(aD,{...n,direction:"down",icon:u.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:N});default:return null}},ContextMenu:(0,r.jsx)(aR,{handleCopyContent:()=>{let[e]=ti(ta(l.html),l.type);(0,ng.D)(e)},handleExpandAbove:v,handleExpandAll:j,handleExpandBelow:N,shouldCopyContent:!!l.html,shouldExpandAbove:y||x,shouldExpandBelow:y||b})})}function aR({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:n,handleExpandAll:i,handleExpandBelow:a,handleExpandAbove:l,handleCopyContent:s}){let o={includeShiftKey:!0,key:"["},d={key:"]"},c={key:"["},m={key:"C"};return(0,r.jsx)(nx.W.Overlay,{width:"medium",children:(0,r.jsxs)(es.l,{children:[(0,r.jsxs)(es.l.Item,{"aria-keyshortcuts":to(o),onSelect:i,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.UnfoldIcon,{})}),"Expand all",(0,r.jsx)(es.l.TrailingVisual,{children:(0,r.jsx)("span",{children:`${ts(o)}`})})]}),t?(0,r.jsxs)(es.l.Item,{"aria-keyshortcuts":to(d),onSelect:l,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.FoldUpIcon,{})}),"Expand above",(0,r.jsx)(es.l.TrailingVisual,{children:(0,r.jsx)("span",{children:`${ts(d)}`})})]}):null,e?(0,r.jsxs)(es.l.Item,{"aria-keyshortcuts":to(c),onSelect:a,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.FoldDownIcon,{})}),"Expand below",(0,r.jsx)(es.l.TrailingVisual,{children:(0,r.jsx)("span",{children:`${ts(c)}`})})]}):null,(0,r.jsx)(al,{}),n?(0,r.jsxs)(es.l.Item,{"aria-keyshortcuts":to(m),onSelect:s,children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.CopyIcon,{})}),"Copy",(0,r.jsx)(es.l.TrailingVisual,{children:(0,r.jsx)("span",{children:`${ts(m)}`})})]}):null]})})}try{aD.displayName||(aD.displayName="ExpandButtonLine")}catch{}try{aT.displayName||(aT.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{aR.displayName||(aR.displayName="HunkContextMenu")}catch{}let aA=(0,c.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:i,diffEntryId:a,diffHasHiddenUnicodeCharacters:l,diffLines:s,fileAnchor:o,fileLineCount:d,filePath:u,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:h,replaceSelectedDiffRowRangeFromGridCells:f,selectedDiffRowRange:p,setInGridMode:g,showHiddenUnicode:y,tableRef:x,updateDiffLines:b,copilotChatReference:C,inGridMode:v,firstLineNumberSelection:N}){let{leftLines:j,rightLines:_}=function(e){let t=e.reduce((e,t)=>e+(t.threadsData?.totalCount??0),0)??0,{leftLines:n,rightLines:i}=(0,c.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(e9);for(;n.length<t.length;)n.push(e9)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":var a;i();let[e,l]=[{...a=r,threadsData:void 0,annotationsData:void 0},{...a,threadsData:a.threadsData?{...a.threadsData,threads:a.threadsData.threads,totalCommentsCount:a.threadsData.totalCommentsCount,totalCount:a.threadsData.totalCount}:void 0}];t.push(e),n.push(l);break;case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}})(e),[e,t]);return{leftLines:n,rightLines:i}}(s),{ghostUser:w}=e2();ni({clearSelectedDiffRowRange:i,containerRef:x,fileAnchor:o,isSplitDiff:!0,leftLines:j,replaceSelectedDiffRowRangeFromGridCells:f,rightLines:_,disabled:!v});let k=(0,c.useMemo)(()=>{if(p)return tm({selectedDiffRowRange:p,leftLines:j,rightLines:_,isNumberCell:!0})},[p,j,_]);(0,c.useEffect)(()=>{b(o,s)},[s,o,b]);let S=(0,c.useMemo)(()=>tN(j),[j]),E=new Map,L=new Map,I=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(E.has(n.leftLineNumber)?E.get(n.leftLineNumber)?.push(n):-1!==n.leftLineNumber&&E.set(n.leftLineNumber,[n]),I.has(n.hunkLineNumber)?I.get(n.hunkLineNumber)?.push(n):n.isHunk&&I.set(n.hunkLineNumber,[n]),L.has(n.rightLineNumber)?L.get(n.rightLineNumber)?.push(n):-1!==n.rightLineNumber&&L.set(n.rightLineNumber,[n]))}let D=e=>{let t=!1;return l&&!tt(e)&&(t=(0,eQ.Y)(e.text),y&&t&&(e=e.html?{...e,html:(0,tS.Gx)(e.html)??e.html}:{...e,text:(0,eQ.TA)(e.text)})),[e,t]},T=[];for(let e=0;e<j.length;e++){let i=j[e],l=_[e],s=j[e-1],[c,f]=D(i),[p,y]=D(l),x=tt(j[e+1])?_[e+1]:j[e+1],b=!!c&&c!==e9&&"HUNK"===c.type,v=e7(o,c,p),R=tt(c)?tt(p)?void 0:p:c;if(!R)continue;let A=tt(c)?void 0:c.threadsData,F=tt(p)?void 0:p.threadsData,{currentHunk:M,nextHunk:O,previousHunk:$}=tv(R,S),P=E.get(tt(c)?-2:c.left??-2),B=L.get(tt(p)?-2:p.right??-2),U=I.get(R.blobLineNumber),H=U?.[0]?.rightLineNumber===p?.right?n:void 0,z=P?.[0]?.leftLineNumber===c?.left?n:void 0,K=B?.[0]?.rightLineNumber===p?.right?n:void 0,V=tD(F,w),G=tD(A,w),q={currentHunk:M,diffEntryId:a,fileAnchor:o,fileLineCount:d,filePath:u,isRowSelected:(k?.isRowSelected(i)||k?.isRowSelected(l))??!1,nextHunk:O,previousHunk:$,rowId:v,isSplit:!0,diffContext:t,setInGridMode:g};T.push((0,r.jsx)("tr",{className:"diff-line-row",children:b?(0,r.jsx)(tL,{...q,hasHiddenUnicodeCharacters:f||y,diffLine:R,modifiedLineThreads:V,originalLineThreads:G,children:(0,r.jsx)(aT,{nextLine:x,prevLine:s,focusedSearchResult:H,resultsForLine:U})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tL,{...q,diffLine:c,hasHiddenUnicodeCharacters:f,isLeftSide:!0,modifiedLineThreads:V,originalLineThreads:G,children:(0,r.jsx)(aE,{copilotChatReference:C,fileAnchor:o,filePath:u,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:h,resultsForLine:P,focusedSearchResult:z,firstLineNumberSelection:N})}),(0,r.jsx)(tL,{...q,diffLine:p,hasHiddenUnicodeCharacters:y,modifiedLineThreads:V,originalLineThreads:G,children:(0,r.jsx)(aE,{copilotChatReference:C,fileAnchor:o,filePath:u,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:h,resultsForLine:B,focusedSearchResult:K,firstLineNumberSelection:N})})]})},v))}return(0,r.jsx)(r.Fragment,{children:T})});try{aA.displayName||(aA.displayName="SplitDiffLines")}catch{}let aF=(0,c.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:i,diffEntryId:a,diffHasHiddenUnicodeCharacters:l,diffLines:s,fileLineCount:o,fileAnchor:d,filePath:u,tableRef:m,selectedDiffRowRange:h,showHiddenUnicode:f,handleDiffRowClick:p,updateDiffLines:g,replaceSelectedDiffRowRangeFromGridCells:y,copilotChatReference:x,setInGridMode:b,inGridMode:C,firstLineNumberSelection:v}){ni({clearSelectedDiffRowRange:i,containerRef:m,fileAnchor:d,isSplitDiff:!1,leftLines:s,replaceSelectedDiffRowRangeFromGridCells:y,disabled:!C});let N=(0,c.useMemo)(()=>{if(h)return tm({selectedDiffRowRange:h,leftLines:s,isNumberCell:!0})},[h,s]),j=(0,c.useMemo)(()=>tN(s.map(e=>e)),[s]);(0,c.useEffect)(()=>{g(d,s)},[s,d,g]);let _=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(e&&_.has(n.diffLineNumIndex)?_.get(n.diffLineNumIndex)?.push(n):e&&_.set(n.diffLineNumIndex,[n]))}let w=s.map((e,i)=>{let c=e,m=s[i+1],h=s[i-1],g="HUNK"===e.type,y=(0,eq.IQ)(d,(0,eq.XU)(c.type),c.blobLineNumber),{currentHunk:C,nextHunk:w,previousHunk:k}=tv(c,j),S=_.get(i),E=i===S?.[0]?.diffLineNumIndex?n:void 0,L=N?.isRowSelected(e)??!1,I=e7(d,c,c),D=l&&(0,eQ.Y)(c.text);f&&D&&(c=c.html?{...c,html:(0,tS.Gx)(c.html)??c.html}:{...c,text:(0,eQ.TA)(c.text)});let T={diffEntryId:a,diffLine:c,currentHunk:C,fileAnchor:d,fileLineCount:o,filePath:u,hasHiddenUnicodeCharacters:D,isLeftSide:"DELETION"===c.type,isRowSelected:L,isSplit:!1,nextHunk:w,previousHunk:k,diffContext:t,rowId:I,setInGridMode:b};return(0,r.jsx)("tr",{className:"diff-line-row",children:(0,r.jsx)(tL,{...T,children:g?(0,r.jsx)(aT,{nextLine:m,prevLine:h,focusedSearchResult:E,resultsForLine:S}):(0,r.jsx)(aL,{filePath:u,copilotChatReference:x,handleDiffRowClick:p,firstLineNumberSelection:v,lineAnchor:y,resultsForLine:S,focusedSearchResult:E})})},I)});return(0,r.jsx)(r.Fragment,{children:w})});try{aF.displayName||(aF.displayName="UnifiedDiffLines")}catch{}function aM({diffAnchor:e,children:t}){return(0,r.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let aO=(0,c.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,diffEntryData:i,diffLinesManuallyUnhidden:a,baseHelpUrl:l,onHandleLoadDiff:s,copilotChatReference:o,hasExpandedAllRanges:d,...c}){let u=`diff-${i.pathDigest}`;if(i.isBinary)return(0,r.jsx)(aM,{diffAnchor:u,children:"Binary file not shown."});if((0,eB.dK)(i))return(0,r.jsx)(aM,{diffAnchor:u,children:"File renamed without changes."});if((0,eB.Jc)(i))return(0,r.jsx)(aM,{diffAnchor:u,children:"File copied without changes."});if((0,eB.Sn)(i,i.status,i.oldTreeEntry?.mode,i.newTreeEntry?.mode))return(0,r.jsx)(aM,{diffAnchor:u,children:"File mode changed."});if(!a&&(0,eB.HI)(i))return(0,r.jsx)(tk,{diffAnchor:u,onLoadDiff:s,children:(0,eB.l_)(i.truncatedReason)});if((0,eB.s8)(i))return(0,r.jsx)(aM,{diffAnchor:u,children:"Whitespace-only changes."});if(!a&&(0,eB.lO)(i))return(0,r.jsx)(tk,{diffAnchor:u,onLoadDiff:s,children:"This file was deleted."});if(!a&&(0,eB.xW)(i))return(0,r.jsxs)(tk,{diffAnchor:u,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${l}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:s,children:["Some generated files are not rendered by default. Learn more about"," "]});if(i.isTooBig&&0===i.diffLines.length)if(a)return(0,r.jsxs)(aM,{diffAnchor:u,children:["Diff is too big to render. To view,"," ",(0,r.jsx)(z.A,{inline:!0,href:`${l}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});else return(0,r.jsx)(tk,{diffAnchor:u,onLoadDiff:s,children:"Large diffs are not rendered by default."});return i.diffLines?(0,r.jsx)(e1,{...c,children:(0,r.jsx)(tx,{children:(0,r.jsx)(a$,{diffAnchor:u,diffContext:t,diffEntryData:i,viewerData:c.viewerData,focusedSearchResult:n,searchResults:e,copilotChatReference:o,hasExpandedAllRanges:d})})}):null});function a$({diffAnchor:e,viewerData:t,diffEntryData:n,searchResults:i,focusedSearchResult:a,copilotChatReference:l,diffContext:s,hasExpandedAllRanges:o}){let d=(0,c.useRef)(null),[u,m]=(0,c.useState)(!0),[h,f]=(0,c.useState)(null),[p,g]=(0,c.useState)(!1),y=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,b=(0,c.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<y?n.diffLines.concat({__id:tb.finalLineId,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,y]),{diffViewPreference:C,lineSpacingPreference:v,tabSizePreference:j}=t,{selectedDiffRowRange:_,replaceSelectedDiffRowRange:w,replaceSelectedDiffRowRangeFromGridCells:k,clearSelectedDiffRowRange:E,updateDiffLines:L,updateSelectedDiffRowRange:I}=tg(),D=(0,c.useCallback)(e=>{if(!d.current||!e.target)return;let t=e.target,n=t.closest("td.diff-line-number"),i=d.current.contains(t);n&&!i&&(E(),$.current=null)},[E,d]);(0,c.useEffect)(()=>(N.XC?.addEventListener("mousedown",D),()=>{N.XC?.removeEventListener("mousedown",D)}),[D]);let T=e===_?.diffAnchor,R=(0,c.useMemo)(()=>{let e,t=n.status,i=n.oldTreeEntry?.path,a=n.newTreeEntry?.path;if(i||a)return e="RENAMED"===t?`${i} renamed to ${a}`:"DELETED"===t||"REMOVED"===t?i:a,`Diff for: ${e}`},[n]);(0,c.useEffect)(()=>{if(!T)return;let e=function(e,t){if(!e)return;if(!t)return e;let n=!1,i=!1,a=!1;for(let r of t)if(r&&(i||(i=e6(r,e.startLineNumber,e.startOrientation)),a||(a=e6(r,e.endLineNumber,e.endOrientation)),(n=a&&!i)||i&&a))break;return n?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation}:e}(_,b);e&&e!==_&&w(e)},[b,_,T,w]);let A=N.cg?.location.search,F=(0,c.useMemo)(()=>"split"===new URLSearchParams(A).get("diff")||"split"===C,[A,C]),M=(0,eq.c7)(b),O=(0,c.useCallback)(e=>{f(e)},[f]),$=(0,c.useRef)(null),P=(0,c.useCallback)(e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!o&&u&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},[o,u,n.path]),B=(0,c.useCallback)((t,n,i,a,r)=>{!function(e){let t=document.getElementById("__primerPortalRoot__");return!!t&&!!e&&t.contains(e)}(t.target)&&!t.defaultPrevented&&r&&I(e,n,i,a,r)},[e,I]),U=(0,c.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${F?`, ${"left"===h?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else 1===t.rangeCount?n.push(t.toString()):n.push(i.textContent)}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},[h,F]),H=(0,c.useMemo)(()=>b.some(e=>(0,eQ.Y)(e.text)),[b]),z={searchResults:i,diffContext:s,focusedSearchResult:a,clearSelectedDiffRowRange:E,diffEntryId:n.objectId,diffHasHiddenUnicodeCharacters:H,diffLines:b,fileAnchor:e,fileLineCount:y,filePath:n.path,handleDiffRowClick:B,handleDiffSideCellSelectionBlocking:O,replaceSelectedDiffRowRangeFromGridCells:k,selectedDiffRowRange:T?_:null,showHiddenUnicode:p,tableRef:d,updateDiffLines:L,updateSelectedDiffRowRange:I,copilotChatReference:l,setInGridMode:m,inGridMode:u,firstLineNumberSelection:$};return(0,r.jsxs)(r.Fragment,{children:[H&&(0,r.jsx)(eW.a,{isShown:p,toggleShowHiddenCharacters:()=>g(!p)}),(0,r.jsx)("table",{"aria-label":R,onKeyDown:P,ref:d,className:(0,S.$)("tab-size","width-full",tj.tableLayoutFixed,{[tj.compact]:"compact"===v}),"data-block-diff-cell-selection":h,"data-diff-anchor":e,"data-tab-size":j,"data-paste-markdown-skip":!0,onCopy:U,role:"grid",style:{"--line-number-cell-width":`${M}px`,"--line-number-cell-width-unified":`${2*parseFloat(M)}px`},children:F?(0,r.jsx)(x.wj,{lineWidth:M,children:(0,r.jsx)(aA,{...z})}):(0,r.jsx)(x.Qe,{lineWidth:M,children:(0,r.jsx)(aF,{...z})})})]})}try{aM.displayName||(aM.displayName="PlainTextStatus")}catch{}try{aO.displayName||(aO.displayName="DiffLines")}catch{}try{a$.displayName||(a$.displayName="CodeDiffLines")}catch{}var aP=n(78049);let aB={filesActionList:"SubmoduleDiff-module__filesActionList--bnkEy",fileRowLinkItem:"SubmoduleDiff-module__fileRowLinkItem--B6ZhJ",path:"SubmoduleDiff-module__path--M3Bxi",fileRow:"SubmoduleDiff-module__fileRow--HYQLm",linesAdded:"SubmoduleDiff-module__linesAdded--db7oX",linesDeleted:"SubmoduleDiff-module__linesDeleted--zx_Ak"};function aU({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:i,newCommitOid:a,oldCommitOid:l,status:s,submoduleUrl:o}=e,d=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===s,m=(0,c.useMemo)(()=>{switch(s){case"ADDED":return(0,r.jsx)(aK,{commitOid:a,contentsUrl:i,type:"added"});case"DELETED":case"REMOVED":return(0,r.jsx)(aK,{commitOid:l,contentsUrl:i,type:"deleted"});default:return(0,r.jsx)(aV,{newCommitOid:a,oldCommitOid:l,changedFiles:n,contentsUrl:i})}},[a,l,s,n,i]);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:`px-3 py-2 ${d?"border-bottom bgColor-muted":""}`,children:[(0,r.jsx)(u.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,r.jsx)(aH,{basePath:t,submoduleUrl:o}),m]}),d&&(0,r.jsx)(es.l,{className:aB.filesActionList,showDividers:!0,variant:"full",children:e.summary.map(e=>(0,r.jsx)(aG,{compareUrl:`${i}/compare/${l}...${a}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})}function aH({basePath:e,submoduleUrl:t}){return(0,r.jsxs)(r.Fragment,{children:["Submodule"," ",t?(0,r.jsx)(z.A,{inline:!0,href:t,children:e}):e," "]})}function az(e){return e.slice(0,7)}function aK({commitOid:e="",contentsUrl:t,type:n}){let i="added"===n?"added at":"deleted from";return t?(0,r.jsxs)(r.Fragment,{children:[i," ",(0,r.jsx)(z.A,{inline:!0,href:`${t}/tree/${e}`,children:az(e)})]}):(0,r.jsxs)(r.Fragment,{children:[i," ",az(e)]})}function aV({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:i}){let a=n>0&&i?`${n} ${1===n?"file":"files"}`:`from ${az(t)} to ${az(e)}`;return(0,r.jsxs)(r.Fragment,{children:["updated"," ",i?(0,r.jsx)(z.A,{inline:!0,href:`${i}/compare/${t}...${e}`,children:a}):a]})}function aG({compareUrl:e,linesAdded:t,linesDeleted:n,path:i,pathDigest:a,status:l}){return(0,r.jsx)(es.l.LinkItem,{href:`${e}#diff-${a}`,className:aB.fileRowLinkItem,children:(0,r.jsxs)(M.B,{gap:"condensed",direction:"horizontal",align:"center",className:aB.fileRow,children:[(0,r.jsx)(aP.E,{status:l}),(0,r.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,r.jsx)("span",{className:aB.path,children:i}),(t>0||n>0)&&(0,r.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,r.jsx)("div",{className:aB.linesAdded,children:t>0&&(0,r.jsxs)(eP.C,{isAddition:!0,children:["+",aq(t)]})}),(0,r.jsx)("div",{className:aB.linesDeleted,children:n>0&&(0,r.jsxs)(eP.C,{isAddition:!1,children:["-",aq(n)]})})]})]})]})})}function aq(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{aU.displayName||(aU.displayName="SubmoduleDiff")}catch{}try{aH.displayName||(aH.displayName="SubmodulePath")}catch{}try{aK.displayName||(aK.displayName="SubmoduleCommitChange")}catch{}try{aV.displayName||(aV.displayName="SubmoduleModified")}catch{}try{aG.displayName||(aG.displayName="SubmoduleFileRow")}catch{}function aW(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position}:{...e,position:null,threadsData:void 0}})}var aQ=n(78252);function aX({oid:e,path:t,repo:n,isViewable:i=!0,copilotDiffChatProps:a}){return(0,r.jsxs)(nx.W,{children:[(0,r.jsx)(nx.W.Anchor,{children:(0,r.jsx)("button",{className:"Button Button--iconOnly Button--invisible","aria-label":"More options",children:(0,r.jsx)(u.KebabHorizontalIcon,{})})}),(0,r.jsx)(nx.W.Overlay,{children:(0,r.jsxs)(es.l,{children:[(0,r.jsxs)(es.l.LinkItem,{href:(0,C.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:i?void 0:"Action unavailable",children:[(0,r.jsx)(es.l.LeadingVisual,{children:(0,r.jsx)(u.EyeIcon,{})}),"View file"]}),a&&(0,r.jsx)(aQ.$,{...a})]})})]})}try{aX.displayName||(aX.displayName="BlobActionsMenu")}catch{}var aY=n(33671),aJ=n(8934);function aZ({dependencyDiffPath:e,fileRendererInfo:t,proseDiffHtml:n,loading:i}){return i?(0,r.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,r.jsx)(t_.A,{size:"large"})}):n?(0,r.jsx)("div",{className:"prose-diff position-relative",children:(0,r.jsx)($.vb,{html:n})}):t?(0,r.jsx)(aY.default,{...t}):e?(0,r.jsx)(aJ.x,{src:e,children:(0,r.jsxs)("div",{className:"text-center py-3",children:[(0,r.jsx)(t_.A,{size:"medium"}),(0,r.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})}):(0,r.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})}try{aZ.displayName||(aZ.displayName="RichDiff")}catch{}let a0=(0,c.memo)(function({commitOid:e,path:t,proseDiffHtml:n,fileRendererInfo:i,dependencyDiffPath:a}){let{loaded:s,richDiffData:o}=function(e,t,n,i){let a=!!t.proseDiffHtml||!!t.fileRendererInfo||!!i,r=(0,l.t)(),[s,o]=(0,c.useState)(a),[d,u]=(0,c.useState)(t),m=(0,c.useCallback)(async()=>{let t=await (0,eN.lS)(`${(0,C.$Qz)({owner:r.ownerLogin,repo:r.name,commitish:e})}/rich_diff/${encodeURIComponent(n)}`);t.ok&&u(await t.json()),o(!0)},[e,n,r]);return(0,c.useEffect)(()=>{a||m()},[a,m]),{loaded:s,richDiffData:d}}(e,{proseDiffHtml:n,fileRendererInfo:i},t,a);return(0,r.jsx)(aZ,{dependencyDiffPath:a,fileRendererInfo:o.fileRendererInfo,loading:!s,proseDiffHtml:o.proseDiffHtml})});try{a0.displayName||(a0.displayName="CommitRichDiff")}catch{}let a1={diffHeaderWrapper:"Diff-module__diffHeaderWrapper--DiwLD"},a2={isInMergeQueue:!1,state:"OPEN"},a4=c.memo(a3);function a3({diffMatches:e,focusedSearchResult:t,diffEntryData:n,contextLinePathURL:i,recalcTotalHeightOfVirtualWindow:a,onOptionCollapseToggle:l,helpUrl:o,headerStickyOffset:u=0,repo:m,oid:h,index:f,ignoreWhitespace:p,virtualizerScrollTo:y}){let x=(0,s.i)(),{data:b}=(0,g.ID)();void 0===b&&(b=g.aX);let C=(0,c.useMemo)(()=>({filteredMarkers:[],activeGlobalMarkerID:"",decrementActiveMarker:eb.l,incrementActiveMarker:eb.l,overlayPortalContainerName:"commit-details-marker-portal"}),[]),v=(0,d.B)().commentInfo,{getThreadDataByPathAndPosition:N,getInlineCommentInfoByPathAndPosition:j,updateInlineCommentMapWithNewComment:_,initialExpandedThreadId:w}=(0,eU.B)(),{commentBoxSubject:k}=(0,eH.X)(),S=function(e,t,n){let i=(0,d.B)(),{commit:a,commentInfo:r,repoOwnerGlobalRelayId:l}=i,s=(0,ez.I)({commit:a,repo:i.repo,viewerCanReply:r.canComment,repoOwnerGlobalRelayId:l,getInlineCommentInfoByPathAndPosition:t}),{addComment:o,deleteComment:u,editComment:m,hideComment:h,unhideComment:f}=(0,eH.X)(),{findInlineComment:p,findInlineCommentWithRelay:g}=(0,eU.B)(),y=(0,c.useCallback)(({filePath:e,onCompleted:t,onError:n,text:i,thread:a})=>{let[r,l]=a.id.split("::");if(!r||!l)return void n(Error("Invalid threadId"));o(i,e,l).then(e=>{e.comment?t?.(e.comment.id):n(Error("Failed to add comment"))})},[o]),x=(0,c.useCallback)(({text:e,diffLine:t,filePath:i,onCompleted:a,onError:r})=>{t&&t.position&&o(e,i,t.position.toString()).then(e=>{if(e.comment){let r=e.comment.id,l=`${i}::${t.position}`;n?.(i,t.position??0,[e.comment],!0),s(l,!0),a?.(l,r)}else r?.(Error("Failed to add comment"))})},[o,n,s]),b=(0,c.useCallback)(({comment:e,text:t,onCompleted:n,onError:i})=>{let a=g(e.id);if(!a)return void i(Error("Comment not found"));m(t,{id:a.id,bodyVersion:a.bodyVersion}).then(e=>{e.updatedFields?n?.():i(Error("Failed to edit comment"))})},[m,g]),C=(0,c.useCallback)(({commentId:e,onCompleted:t,onError:n})=>{let i=g(e);if(!i)return void n?.(Error("Comment not found"));u(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n?.(Error("Failed to delete comment"))})},[u,g]),v=(0,c.useCallback)(({commentDatabaseId:e,reason:t,onCompleted:n,onError:i})=>{let a=p(e);if(!a)return void i?.(Error("Comment not found"));h(a.id.toString(),t).then(e=>{"success"===e?n?.():"error"===e&&i(Error("Failed to hide comment"))})},[p,h]),N=(0,c.useCallback)(({commentDatabaseId:e,onCompleted:t,onError:n})=>{let i=p(e);if(!i)return void n?.(Error("Comment not found"));f(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n(Error("Failed to unhide comment"))})},[p,f]);return(0,c.useMemo)(()=>({batchingEnabled:!1,commentSubjectType:"commit",commentBoxSubject:e,multilineEnabled:!1,resolvingEnabled:!1,suggestedChangesEnabled:!1,lazyFetchReactionGroups:!0,addThread:x,addThreadReply:y,deleteComment:C,editComment:b,pendingSuggestedChangesBatch:[],submitSuggestedChanges:eb.l,addSuggestedChangeToPendingBatch:eb.l,removeSuggestedChangeFromPendingBatch:eb.l,addFileLevelThread:eb.l,resolveThread:eb.l,unresolveThread:eb.l,hideComment:v,unhideComment:N,fetchThread:s}),[x,y,C,b,s,v,N,e])}(k,j,_),[E,L]=(0,c.useState)(a5(n.current[f],N)),I=(0,c.useCallback)(e=>{L(a5(e,N))},[N]),[D,T]=(0,c.useState)(E.collapsed),[R,A]=(0,c.useState)(E.defaultToRichDiff),F=E.isSubmodule&&!!E.submodule,M=!F&&!R,[O,$]=(0,c.useState)(E.diffManuallyExpanded),P=(0,c.useRef)(!1);(0,c.useEffect)(()=>{T(E.collapsed)},[E.collapsed]);let B=(0,c.useRef)([]),U=(0,c.useCallback)(async e=>{B.current.push(e);let t=await eV(B.current,i,E.pathDigest);if(void 0!==t){let e={...E};e.diffLines=aW(e.diffLines,t.diffEntryWithContext),I(e),n.current[f]=e,a()}},[i,n,E,f]),H=async()=>{B.current=[],P.current||((E.newTreeEntry?.lineCount??0)<5e3?B.current.push({start:1,end:Math.max(E.oldTreeEntry?.lineCount??0,E.newTreeEntry?.lineCount??0)}):B.current=function(e,t){let n=[];for(let t=0;t<e.length;t++)if("HUNK"===e[t].type){let i=e[t-1>=0?t-1:0],a=e[t+1<e.length?t+1:e.length-1],r=i?.blobLineNumber,l=a?.blobLineNumber;r&&l&&(n.push({start:r,end:r+40}),n.push({start:Math.max(l-40,1),end:l}))}let i=e[e.length-1].blobLineNumber;return i<t&&n.push({start:i,end:i+40}),n}(E.diffLines,E.newTreeEntry?.lineCount??0)),P.current=!P.current;let e=await eV(B.current,i,E.pathDigest);if(void 0!==e){let t={...E};t.diffLines=aW(t.diffLines,e.diffEntryWithContext),I(t),n.current[f]=t,a()}},z=(0,c.useCallback)(async()=>{if(0===E.diffLines.length){let e;try{e=await eG({repo:m,sha1:E.oldOid,sha2:E.newOid,entry:E.diffNumber.toString()})}catch{throw Error("Error fetching diff lines")}let t={...E};t.diffLines=e,I(t),n.current[f]=t}E.diffManuallyExpanded=!0,n.current[f].diffManuallyExpanded=!0,$(!0),a(),requestAnimationFrame(()=>{y?.(f,{align:"center"})})},[n,E,f,a]);(0,c.useEffect)(()=>{I(n.current[f]),B.current=[]},[p,f,n,h,m.name,m.ownerLogin,E.path,I]);let K=(0,c.useMemo)(()=>{if(E.isBinary||E.isSubmodule||(0,eB.dK)(E))return!1;if(P.current||(n.current[f]?.diffLines?.[1]?.blobLineNumber||0)>1)return!0;let e=n.current[f]?.diffLines?.length||0,t=n.current[f]?.diffLines?.[e-1]?.blobLineNumber||0,i=n.current[f]?.newTreeEntry?.lineCount||0;return!!(t<i)||!!(e-1<i)},[n.current[f]?.diffLines,n.current[f]?.newTreeEntry?.lineCount,f,n,E]),V=(0,c.useMemo)(()=>({avatarUrl:x?.avatarURL??"",diffViewPreference:b.splitPreference,isSiteAdmin:!1,commentsPreference:b.commentsPreference,login:x?.login??"",lineSpacingPreference:b.lineSpacing,tabSizePreference:x?.tabSize??4,viewerCanComment:v.canComment,viewerCanApplySuggestion:!1}),[x?.avatarURL,x,x?.login,x?.tabSize,b]),G=(0,c.useMemo)(()=>{if(E.copilotChatReference)return{copilotChatReference:E.copilotChatReference}},[E]),q=(0,c.useId)(),W=`heading-${q}`;return(0,r.jsxs)("div",{role:"region","aria-labelledby":W,className:"position-relative",style:{contain:"layout"},children:[(0,r.jsx)("div",{className:a1.diffHeaderWrapper,style:{"--header-sticky-offset":`${u}px`},children:(0,r.jsx)(eP.B,{areLinesExpanded:P.current,canExpandOrCollapseLines:K,fileLinkHref:`#diff-${E.pathDigest}`,isCollapsed:D,isBinary:E.isBinary,isSubmodule:F,headingId:W,size:E.diffSize,canToggleRichDiff:E.canToggleRichDiff,linesAdded:E.linesAdded,linesChanged:E.linesChanged,linesDeleted:E.linesDeleted,newMode:E.newTreeEntry?.mode,newPath:E.newTreeEntry?.path,oldMode:E.oldTreeEntry?.mode,oldPath:E.oldTreeEntry?.path,patchStatus:E.status,path:E.path,onToggleExpandAllLines:H,onToggleFileCollapsed:e=>{e.altKey?l(!D):(E.collapsed=!D,n.current[f].collapsed=!D,T(!D))},onToggleDiffDisplay:e=>A(e),rightSideContent:(0,r.jsx)(aX,{oid:"REMOVED"===E.status&&E.deletedSha?E.deletedSha:h,path:E.path,repo:m,isViewable:!E.isSubmodule,copilotDiffChatProps:G}),showRichDiff:R})}),D?null:(0,r.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[F&&E.submodule&&(0,r.jsx)(aU,{submodule:E.submodule}),R&&(0,r.jsx)(a0,{commitOid:h,path:E.path,proseDiffHtml:E.proseDifffHtml,fileRendererInfo:E.renderInfo,dependencyDiffPath:E.dependencyDiffPath}),M&&(0,r.jsx)(aO,{diffContext:"commit",copilotChatReference:E.copilotChatReference,searchResults:e,focusedSearchResult:t,diffEntryData:E,baseHelpUrl:o,commentingEnabled:!0,commentBatchPending:!1,repositoryId:m.id.toString(),subject:a2,subjectId:h,viewerData:V,newCommitOid:E.newOid,oldCommitOid:E.oldOid,addInjectedContextLines:U,commentingImplementation:S,markerNavigationImplementation:C,diffLinesManuallyUnhidden:O,onHandleLoadDiff:z,initialExpandedThreadId:w})]})]},`${E.pathDigest}_${E.diffLines.length}`)}function a5(e,t){for(let n of e.diffLines??[]){let i=t(e.path,n.position);i?n.threadsData={totalCommentsCount:i.count,totalCount:i.count,threads:(i.threads??[]).map(e=>({id:e.id,diffSide:e.diffSide,commentsData:e.commentsData,line:n.blobLineNumber,isOutdated:!1}))}:n.threadsData=void 0}return e}try{a4.displayName||(a4.displayName="Diff")}catch{}try{a3.displayName||(a3.displayName="DiffUnmemoized")}catch{}var a8=n(27028);let a9=(0,c.memo)(a6);function a6({treeToggleElement:e,headerInfo:t,searchBox:n,ignoreWhitespace:i}){let a=(0,c.useRef)(null),l=function(e){let[t,n]=(0,c.useState)(!1),i=(0,c.useCallback)(e=>{let i=e[e.length-1].intersectionRatio<1;i!==t&&n(i)},[t,n]);return(0,c.useEffect)(()=>{let t=e.current,n=new IntersectionObserver(i,{root:t?.ownerDocument,threshold:[1],rootMargin:"-1px 0px 0px 0px"});return e.current&&n.observe(e.current),()=>{t&&n.unobserve(t)}},[e,i]),t}(a),s=l?"d-none d-sm-flex":"";return(0,r.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between gap-2 pt-3 pt-lg-4 pb-2 position-sticky top-0 color-bg-default",style:{zIndex:2},ref:a,children:[(0,r.jsxs)("div",{className:"d-flex flex-items-center",children:[e,(0,r.jsxs)(iM.A,{as:"h2",className:"mx-2 f4",children:[t.filesChangedString," file",t.filesChanged>1?"s":""," changed"]}),(0,r.jsxs)(eP.C,{className:s,isAddition:!0,children:["+",t.additions]}),(0,r.jsxs)(eP.C,{className:s,isAddition:!1,children:["-",t.deletions]}),(0,r.jsx)("span",{className:`${s} ml-2 fgColor-muted text-small`,style:{whiteSpace:"nowrap"},children:"lines changed"})]}),(0,r.jsxs)("div",{className:"d-flex gap-2 flex-items-center",children:[l&&(0,r.jsx)(a7,{}),void 0!==n&&n,(0,r.jsx)(a8.G,{reloadOnWhitespaceChange:!0,defaultHideWhitespace:i})]})]})}let a7=()=>(0,r.jsx)(H.Q,{leadingVisual:u.ArrowUpIcon,variant:"invisible",className:"fgColor-default px-2 f6 gap-1",onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:"Top"});try{a9.displayName||(a9.displayName="DiffsHeader")}catch{}try{a6.displayName||(a6.displayName="DiffsHeaderUnmemoized")}catch{}try{a7.displayName||(a7.displayName="GoToTopButton")}catch{}let re=c.memo(rt);function rt(){return(0,r.jsx)("div",{className:"pt-3",children:(0,r.jsxs)("div",{className:"border borderColor-muted rounded-top-2",children:[(0,r.jsx)("div",{className:"gap-2 p-3 border-bottom borderColor-muted bgColor-muted rounded-top-2",children:(0,r.jsx)(B.O,{height:"sm",variant:"rounded",width:"140px"})}),(0,r.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",children:[(0,r.jsx)(B.O,{height:"sm",variant:"rounded",width:"random"}),(0,r.jsx)(B.O,{height:"sm",variant:"rounded",width:"random"}),(0,r.jsx)(B.O,{height:"sm",variant:"rounded",width:"random"}),(0,r.jsx)(B.O,{height:"sm",variant:"rounded",width:"random"})]})]})})}try{re.displayName||(re.displayName="LoadingContentBlock")}catch{}try{rt.displayName||(rt.displayName="LoadingContentBlockUnmemoized")}catch{}function rn({diffEntryData:e,contextLinePathURL:t,repo:n,oid:i,treeToggleElement:a,headerInfo:l,totalFileCount:s}){let o=(0,c.useRef)(e),u=(0,eC.X)(),m=(0,d.B)();return(0,r.jsxs)("div",{"data-hpc":!0,children:[s>40&&(0,r.jsx)(e$,{}),(0,r.jsx)(a9,{treeToggleElement:a,headerInfo:l}),e.map((e,a)=>a>=10?null:(0,r.jsx)("div",{className:0===a?"pt-0":"pt-3",children:(0,r.jsx)(a4,{onOptionCollapseToggle:eb.l,diffEntryData:o,index:a,helpUrl:u.helpUrl,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:eb.l,repo:n,ignoreWhitespace:m.ignoreWhitespace,oid:i})},e.pathDigest))]})}try{rn.displayName||(rn.displayName="SSRDiffs")}catch{}let ri=(0,c.memo)(ra);function ra({totalFileCount:e,diffEntryData:t,contextLinePathURL:n,unselectedFileExtensions:i,repo:a,oid:l,ignoreWhitespace:s,filterTerm:o,searchTerm:u,setSearchTerm:m,isTreeExpanded:h,treeToggleElement:f,headerInfo:p}){let y=function(){let[e,t]=(0,c.useState)(""),n=(0,c.useCallback)(()=>{t((eE(N.fV.hash??"")??"").replace("diff-",""))},[]);return(0,c.useEffect)(()=>(window.addEventListener("hashchange",n),n(),()=>{window.removeEventListener("hashchange",n)}),[n]),e}(),{data:x}=(0,g.ID)();void 0===x&&(x=g.aX);let b=x.lineSpacing,v=(0,g.Qn)(s),j=(0,d.B)(),_=(0,c.useCallback)(()=>k({}),[]),[w,k]=(0,c.useState)({}),S=(0,c.useRef)(t),{findInDiffWorkerPath:E}=(0,q.D)(),I=(0,c.useRef)(t),D=(0,c.useRef)(e>40),T=(0,c.useRef)(null),[R,A]=(0,c.useState)(v),F=(0,c.useRef)(0),M=(0,c.useRef)(e),[O,$]=(0,c.useState)(l),{focusedSearchResult:P,setFocusedSearchResult:B,searchResults:U,currentIndex:H,setCurrentIndex:z}=function(e,t,n,i){let[a,r]=(0,c.useState)(new Map),[l,s]=(0,c.useState)(void 0),[o,d]=(0,c.useState)(0),u=c.useRef();!u.current&&t&&(u.current=new eT.N(new eD.z(n,eR),200,e=>1!==e.query.length));let m=(0,c.useRef)(t);m.current=t;let h=(0,c.useRef)("");(0,c.useEffect)(()=>function(){u.current?.terminate()},[]);let f=(0,c.useRef)([]);return u.current&&e!==f.current&&(u.current.onResponse=e=>{e.query===m.current&&(r(e.matchingDiffs),h.current=m.current)},f.current=e),(0,c.useEffect)(()=>{if(!e||!u.current||!h.current||""===h.current){r(new Map),s(void 0);return}r(new Map),s(void 0),u.current.post({query:h.current,diffEntryInfo:e,currentDiffEntryData:void 0})},[e?.length,e]),(0,c.useEffect)(()=>{if(e&&u.current)if(""===t)r(new Map),s(void 0),d(0),h.current="";else{var n;if(!((n=t).length>0&&n.length<=1e3))return;let i=h.current.length>0&&t.startsWith(h.current);u.current.post({query:t,diffEntryInfo:e,currentDiffEntryData:i?a:void 0}),d(0)}},[t,i]),{focusedSearchResult:l,setFocusedSearchResult:s,searchResults:a,currentIndex:o,setCurrentIndex:d}}(S.current,u,E,w);function K(e){for(let t of S.current)t.collapsed=e;_()}(0,c.useEffect)(()=>{if(i&&i.size>0?S.current=I.current.filter(e=>!i.has((0,ex.QC)(e.path))):S.current=I.current,o&&(S.current=S.current.filter(e=>e.path.toLowerCase().includes(o.toLowerCase()))),M.current!==S.current.length||0===S.current.length){let e=S.current.length;!function(e,t=0){if(void 0===N.XC)return;let n=N.XC.getElementById("screenReaderAnnouncementDiv")??void 0;if(n||(n=function(){if(void 0===N.XC)return;let e=N.XC.createElement("div");return e.classList.add("sr-only","mt-n1"),e.id="screenReaderAnnouncementDiv",e.setAttribute("role","alert"),e.setAttribute("data-testid","screenReaderAnnouncement"),e.setAttribute("aria-live","assertive"),N.XC.body.appendChild(e),e}()),!n)return;let i=n.textContent===e?`${e}\u00A0`:e;setTimeout(()=>{n&&(n.textContent=i)},t)}(0===e?"There are no files selected for viewing":`${e} file${1===e?"":"s"} remain${1===e?"s":""}`,150)}M.current=S.current.length,D.current=S.current.length>40,_()},[i?.size,o]),(0,c.useEffect)(()=>{S.current=t,I.current=t,D.current=e>40,_(),A(s),$(l)},[j.path]);let V=(0,eC.X)(),G=(0,C.VWf)({owner:j.repo.ownerLogin,repo:j.repo.name,sha1:j.commit.sha1,sha2:j.commit.sha2,oid:j.commit.oid}),W=function(e,t,n,i,a,r){let[l,s]=(0,c.useState)(ej),o=(0,c.useRef)([]),d=(0,c.useRef)(n);return(0,c.useEffect)(()=>{if(!i||!a)return;let r=!1,l=async(e,t,n)=>{s(ej);let a=await (0,eN.lS)(`${i}&start_entry=${e}&bytes=${t}&lines=${n}`);if(!r)try{if(a.ok){let e=await a.json();e&&(e.loading=e.loadMore,o.current=o.current.concat(e.extraDiffEntries),e.extraDiffEntries=o.current,e.loadMore&&d.current!==e.asyncDiffLoadInfo.startIndex?(d.current=e.asyncDiffLoadInfo.startIndex,s(e),setTimeout(()=>l(e.asyncDiffLoadInfo.startIndex,e.asyncDiffLoadInfo.byteCount,e.asyncDiffLoadInfo.lineShownCount),0)):(d.current===e.asyncDiffLoadInfo.startIndex?e.error=!0:e.error=!1,e.loading=!1,s(e)))}else s(e=>({...e,loading:!1,error:!0,extraDiffEntries:o.current}))}catch{s(e=>({...e,loading:!1,error:!0,extraDiffEntries:o.current}))}};return l(n,e,t),function(){r=!0}},[e,t,a,n,i,r]),(0,c.useEffect)(()=>{o.current=[],d.current=n},[i,n,r]),l}(j.asyncDiffLoadInfo.byteCount,j.asyncDiffLoadInfo.lineShownCount,j.asyncDiffLoadInfo.startIndex,G,j.moreDiffsToLoad,s);(0,c.useEffect)(()=>{let e=t.concat(W.extraDiffEntries);i&&i.size>0?S.current=e.filter(e=>!i.has((0,ex.QC)(e.path))):S.current=e,o&&(S.current=S.current.filter(e=>e.path.toLowerCase().includes(o.toLowerCase()))),I.current=e,_()},[W.extraDiffEntries.length]);let Q=(0,c.useRef)(null),X=(0,ev.CK)({parentRef:Q,shouldUseScrollRef:D.current,size:h?0:S.current.length,estimateSize:(0,c.useCallback)(e=>{var t;let n;if(!D.current)return 0;let i=(t=S.current[e],n=57,t?.collapsed?n:t?.newTreeEntry?.isGenerated&&!t?.diffManuallyExpanded?199:t?.isTooBig?104:(t?.diffLines&&("compact"===b?n+=20*t.diffLines.length:n+=25*t.diffLines.length),t?.newTreeEntry?.lineCount&&t.newTreeEntry.lineCount>(t?.diffLines[t?.diffLines.length-1]?.right??0)&&(n+=32),n));return 0===e&&(i-=16),i},[S.current.length,w]),rangeExtractor(e){if(!D.current)return(0,ev.vp)(e);let t=eE(N.fV.hash.substring(1)),n=document.querySelector("[data-path-digest]:focus-within")?.getAttribute("data-path-digest"),i=S.current.findIndex(e=>e.pathDigest===n),a=S.current.findIndex(e=>t?.endsWith(e.pathDigest));return i<0&&a<0?(0,ev.vp)(e):Array.from(new Set([...(0,ev.vp)(e),...[i,a].filter(e=>e>-1)])).sort((e,t)=>e-t)}});(0,c.useEffect)(()=>{let e=y.includes("R"),t=y.includes("L"),n=t||e,i=n?t?y.split("L")[0]:y.split("R")[0]:y,a=rr(i??y,S.current);if(-1===a){if(W.error&&null!==T){let e=T.current?.childNodes[0];e?.focus(),e?.scrollIntoView({block:"center"})}return}if(D.current)X.scrollToIndex(a,{align:"center"}),requestAnimationFrame(()=>{if(n&&rl(Q,y));else{let e=Q.current?.querySelectorAll(`[aria-label="collapse file: ${S.current[a]?.path}"]`);e&&1===e.length&&e[0].focus()}});else if(n&&rl(Q,y));else{let e=Q.current?.querySelectorAll(`[data-diff-anchor=diff-${i}]`);if(e&&1===e.length){let t=e[0].getBoundingClientRect().top+(N.cg?.scrollY??0)-57-60;N.cg?.scrollTo(0,t);let n=Q.current?.querySelectorAll(`[aria-label="collapse file: ${S.current[a]?.path}"]`);n&&1===n.length&&n[0].focus()}}},[y,W]);let Y=(0,r.jsx)(ek,{currentPathDigestIndex:F,searchTerm:u,focusedSearchResult:P,currentIndex:H,setCurrentIndex:z,setFocusedSearchResult:B,setSearchTerm:m,searchResults:U,scrollDiffCellIntoView:e=>{let t=rr(e?.pathDigest??"",S.current);-1!==t&&(X.scrollToIndex(t,{align:"center"}),requestAnimationFrame(()=>{!function(e,t){let n=N.XC?.getElementById(`match-${t}-${e}`);n&&n.scrollIntoView({block:"center"})}(e?.indexWithinDigest??0,e?.pathDigest??"")}))}});return(0,r.jsxs)("div",{"data-hpc":!0,ref:Q,children:[D.current&&(0,r.jsx)(e$,{}),(0,r.jsx)(a9,{treeToggleElement:f,headerInfo:p,searchBox:Y,ignoreWhitespace:R}),!D.current&&S.current.map((e,t)=>{let i,l;return U.has(e?.pathDigest??"")&&(i=U.get(e?.pathDigest??"")??[]),P&&e?.pathDigest===P?.pathDigest&&(l=P?.indexWithinDigest??-1),(0,r.jsx)("div",{style:{paddingTop:16*(0!==t),left:3,right:3},children:(0,r.jsx)(a4,{diffEntryData:S,diffMatches:i,focusedSearchResult:l,onOptionCollapseToggle:K,index:t,contextLinePathURL:n,recalcTotalHeightOfVirtualWindow:eb.l,repo:a,helpUrl:V.helpUrl,oid:O,ignoreWhitespace:R})},e.pathDigest)}),D.current&&(0,r.jsx)("div",{style:{height:X.totalSize,width:"100%",position:"relative"},children:X.virtualItems.map(e=>{let t,i,l=S.current[e.index];return(U.has(l?.pathDigest??"")&&(t=U.get(l?.pathDigest??"")??[]),P&&l?.pathDigest===P?.pathDigest&&(i=P?.indexWithinDigest??-1),l)?(0,r.jsx)("div",{ref:e.measureRef,"data-key":e.key,style:{position:"absolute",paddingTop:16*(0!==e.index),left:3,right:3,transform:`translateY(${e.start}px)`},children:(0,r.jsx)(a4,{diffMatches:t,focusedSearchResult:i,diffEntryData:S,index:e.index,contextLinePathURL:n,onOptionCollapseToggle:K,recalcTotalHeightOfVirtualWindow:_,headerStickyOffset:-e.start,helpUrl:V.helpUrl,repo:a,oid:O,ignoreWhitespace:R,virtualizerScrollTo:X.scrollToIndex})},l.pathDigest):null})}),j.moreDiffsToLoad&&(0,r.jsxs)(r.Fragment,{children:[W.loading&&(0,r.jsx)(re,{}),W.error&&(0,r.jsx)("div",{style:{justifyContent:"center",paddingTop:"16px"},ref:T,children:(0,r.jsx)(L.A,{variant:"danger",tabIndex:0,children:(0,r.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"There was a problem loading the remainder of the diff."})})})]})]})}function rr(e,t){for(let n=0;n<t.length;n++)if(e===t[n]?.pathDigest)return n;return -1}function rl(e,t){let n=e.current?.querySelectorAll(`[data-line-anchor=diff-${t}]`);return!!n&&1===n.length&&(n[0].focus(),!0)}try{ri.displayName||(ri.displayName="Diffs")}catch{}try{ra.displayName||(ra.displayName="DiffsUnmemoized")}catch{}var rs=n(70170),ro=n(56051),rd=n(1946),rc=n(94195);let ru="diff_file_tree",rm=(0,c.memo)(rh);function rh({contentId:e,diffs:t,onFileSelected:n,diffsHeader:i,unselectedFileExtensions:a,onFilterTextChange:l,onFileExtensionsChange:s}){let[o,d]=(0,c.useState)(""),{getCommentCountByPath:u}=(0,eU.B)(),m=(0,c.useRef)(null),h=(0,c.useRef)(null),f=(0,c.useRef)(null),p=(0,c.useMemo)(()=>(0,ex.s2)(t),[t]),g=t;a&&a.size>0&&(g=g.filter(e=>!a.has((0,ex.QC)(e.path))));let y=(o?g.filter(e=>e.path.toLowerCase().includes(o.toLowerCase())):g).map(e=>{let t=u(e.path);return{...e,totalCommentsCount:t??0}});return(0,r.jsxs)("div",{className:"d-flex flex-column gap-2",id:ru,tabIndex:-1,children:[(0,r.jsx)(j.ak,{commands:{"pull-requests-diff-file-tree:focus-file-tree":function(){let t=document.getElementById(e),n=document.getElementById(ru),i=!1;if(t?.contains(document.activeElement)&&(i=!0),i){let e=f.current||n;h.current=t?.contains(document.activeElement)?document.activeElement:null,e?.focus()}else{let e=h.current||t;f.current=n?.contains(document.activeElement)?document.activeElement:null,e?.focus()}}}}),(0,r.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,r.jsx)("div",{className:"d-md-none",ref:m,children:i}),(0,r.jsx)(rf,{filterText:o,onFilterTextChange:e=>{d(e),l(e)},fileExtensions:p,unselectedFileExtensions:a,onFileExtensionsChange:s}),(0,r.jsx)(rd.oj,{diffs:y,onSelect:()=>{n((0,rc.nn)(window.innerWidth)<=rc.Gy.medium?"close_tree":void 0)},sortByDiffOrder:!1})]})}function rf({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:i,onFileExtensionsChange:a}){let l=(0,c.useRef)((0,rs.s)(e=>t(e),250));return(0,r.jsx)(ro.kF,{filterText:e,fileExtensions:n,unselectedFileExtensions:i,onFilterTextChange:e=>l.current(e),onFilterChange:(e,t)=>{a(e,t.extension)}})}try{rm.displayName||(rm.displayName="FileTree")}catch{}try{rh.displayName||(rh.displayName="FileTreeUnmemoized")}catch{}try{rf.displayName||(rf.displayName="FileFilter")}catch{}var rp=n(21935);async function rg({repo:e,commitOid:t,untilCommentId:n}){let i=await (0,eN.Sr)((0,eK.RD)((0,C.clg)({owner:e.ownerLogin,repo:e.name,commitOid:t,untilCommentId:n})));if(i.ok){let e=await i.json();return(0,eK.Av)(e),e}throw Error("Failed to fetch comment data")}let ry=(0,c.createContext)({diffFindOpen:!1,setDiffFindOpen:()=>void 0});function rx({children:e,searchTerm:t,setSearchTerm:n}){let i=(0,c.useRef)(""),[a,l]=(0,c.useState)(!1),s=(0,c.useCallback)(e=>{e&&""===t&&""!==i.current?n(i.current):e||""===t||(i.current=t,n("")),l(e)},[t,n]),o=(0,c.useMemo)(()=>({diffFindOpen:a,setDiffFindOpen:s}),[a,s]);return(0,r.jsx)(ry.Provider,{value:o,children:e})}try{ry.displayName||(ry.displayName="DiffFindOpenContext")}catch{}try{rx.displayName||(rx.displayName="DiffFindOpenProvider")}catch{}var rb=n(46001);let rC={SplitPageLayout_Content:"Commit-module__SplitPageLayout_Content--uy_M4",HiddenPane:"Commit-module__HiddenPane--CH19B",Pane:"Commit-module__Pane--jjRPV",MobileExpanded:"Commit-module__MobileExpanded--TvGDJ",TreeExpanded:"Commit-module__TreeExpanded--mn5GU"},rv=(0,v.E7)(),rN="diff-content-parent";function rj(){(0,w.L)(!0);let e=(0,d.B)(),{splitPagePaneHidden:t,splitPageContentHidden:n,treeToggleElement:i,collapseTree:a,isMobileTreeExpanded:s,isTreeExpanded:u}=(0,rb.q)(ru,e.fileTreeExpanded,e.currentUser),[m,h]=(0,c.useState)(()=>new Set),[f]=(0,_.I)(()=>!1,!0,[]),[v,L]=(0,c.useState)(""),[I,D]=(0,c.useState)(""),[T,R]=(0,c.useState)(!1),M=(0,c.useCallback)(e=>{"close_tree"===e&&a()},[a]),O=function(e){let t=(0,l.t)(),[n,i]=(0,c.useState)({branches:[],tags:[],loading:!0});return(0,c.useEffect)(()=>{let n=!1;return(async()=>{i({branches:[],tags:[],loading:!0});let a=await (0,eN.lS)((0,C.jnS)({owner:t.ownerLogin,repo:t.name,commitish:e}));if(!n)try{if(a.ok){let e=await a.json();e.loading=!1,e&&i({...e,loading:!1})}else i({branches:[],tags:[],loading:!1})}catch{i({branches:[],tags:[],loading:!1})}})(),function(){n=!0}},[t.ownerLogin,t.name,e]),n}(e.commit.oid),$=(0,C.t0c)({owner:e.repo.ownerLogin,repo:e.repo.name,commitish:e.commit.oid}),{mutate:P}=(0,p.U)({onSuccess:()=>{},onError:()=>{}}),B=(0,g.C0)(e.splitViewPreference),U=(0,c.useMemo)(()=>({splitPreference:B,lineSpacing:e.diffLineSpacingPreference,commentsPreference:e.commentsPreference}),[e.commentsPreference,e.diffLineSpacingPreference,B]),{data:H}=(0,g.ID)(U),z=(0,c.useCallback)(()=>{P({commentsPreference:H?.commentsPreference===y.sI.Visible?y.sI.Collapsed:y.sI.Visible})},[H?.commentsPreference,P]),K=(0,c.useCallback)((e,t)=>{let n=new Set(m);"selectFileExtension"===e?n.delete(t):"unselectFileExtension"===e&&n.add(t),h(n)},[m]);(0,c.useEffect)(()=>{h(new Set)},[e.commit]),(0,c.useEffect)(()=>{(N.cg?.scrollY??0)>0&&N.cg?.scrollTo(0,0)},[e.path]);let{deferredCommentData:V,state:G}=function(e,t){let[n,i]=(0,c.useState)(void 0),[a,r]=(0,c.useState)("initial");return(0,c.useEffect)(()=>{let n;i(void 0),r("loading");let a=N.cg?.location.hash;a&&/^#commitcomment-\d+$/.test(a)&&(n=a.replace("#commitcomment-","")),(async()=>{try{let a=await rg({repo:e,commitOid:t,untilCommentId:n});i(a),r("loaded")}catch{r("error")}})()},[t,e]),{deferredCommentData:n,state:a}}(e.repo,e.commit.oid),q=V?.threadMarkers,W=V?.inlineComments,[Q,X]=(0,c.useState)(void 0);if((0,c.useEffect)(()=>{if("loaded"===G){let e=N.cg?.location.hash.slice(1);if(e&&V){if(/^commitcomment-\d+$/.test(e))V?.discussionComments.comments.find(t=>t.urlFragment===e)&&N.cg?.requestAnimationFrame(()=>{let t=document.getElementById(e??"");t&&(t.scrollIntoView({block:"center"}),t.focus())});else if(/^r\d+$/.test(e)){let t=e.replace("r","");for(let e of V.threadMarkers)if(e.threads){for(let n of e.threads)if(n.commentsData.comments){for(let e of n.commentsData.comments)if(e&&e.id&&e.id.toString()===t)return void X(n.id)}}}}}},[V,G]),e.unavailableReason)return(0,r.jsx)(eg,{commit:e.commit,commitInfo:O,unavailableReason:e.unavailableReason});let[Y,J]=function(e){let t=e.findIndex(e=>void 0===e.oldOid)-1;return[-2===t?e:e.slice(0,t+1),e.map(e=>({path:e.path,changeType:e.status,pathDigest:e.pathDigest}))]}(e.diffEntryData);return(0,r.jsx)(E.RelayEnvironmentProvider,{environment:rv,children:(0,r.jsxs)(eU.r,{initialInlineComments:W,initialFiles:q,initialExpandedThreadId:Q,children:[(0,r.jsx)(j.ak,{commands:{"commit-diff-view:create-permalink":()=>{let t=(0,C.$Qz)({owner:e.repo.ownerLogin,repo:e.repo.name,commitish:e.commit.oid});(0,b.kd)(t)},"commit-diff-view:collapse-expand-comments":z}}),(0,r.jsxs)(k.O7,{children:[(0,r.jsxs)(k.O7.Header,{children:[(0,r.jsx)(A,{commitBranchState:O,oid:e.commit.oid,repo:e.repo}),(0,r.jsx)(em,{commit:e.commit,commitInfo:O,repo:e.repo})]}),(0,r.jsx)(k.O7.Pane,{position:"start",sticky:!0,divider:{regular:"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!0,className:(0,S.$)(t?rC.HiddenPane:rC.Pane,s&&rC.MobileExpanded,u&&rC.TreeExpanded),children:(0,r.jsx)(o.t,{fallback:(0,r.jsx)("span",{children:"File tree failed to load."}),children:(0,r.jsx)(rm,{contentId:rN,diffs:J,onFileSelected:M,unselectedFileExtensions:m,diffsHeader:(0,r.jsx)(a9,{treeToggleElement:i,headerInfo:e.headerInfo}),onFileExtensionsChange:K,onFilterTextChange:L})})}),(0,r.jsx)(k.O7.Content,{as:"div",width:"full",hidden:n,padding:"none",className:rC.SplitPageLayout_Content,children:(0,r.jsxs)("div",{id:rN,tabIndex:-1,children:[f?(0,r.jsx)(rn,{diffEntryData:Y,contextLinePathURL:$,repo:e.repo,oid:e.commit.oid,treeToggleElement:i,headerInfo:e.headerInfo,totalFileCount:e.diffEntryData?.length??0}):(0,r.jsx)(rx,{searchTerm:I,setSearchTerm:D,children:(0,r.jsx)(ri,{totalFileCount:e.diffEntryData?.length??0,treeToggleElement:i,headerInfo:e.headerInfo,isTreeExpanded:s,searchTerm:I,setSearchTerm:D,ignoreWhitespace:e.ignoreWhitespace,diffEntryData:Y,contextLinePathURL:$,filterTerm:v,unselectedFileExtensions:m,repo:e.repo,oid:e.commit.oid})}),(0,r.jsx)(rp.c,{comments:V?.discussionComments?.comments,commentCount:V?.discussionComments?.count,canLoadMore:V?.discussionComments?.canLoadMore,subscribed:V?.subscribed,providerState:G,repo:e.repo,commitOid:e.commit.oid,children:(0,r.jsx)(F.$,{commit:e.commit,commentInfo:e.commentInfo,repoOwnerGlobalRelayId:e.repoOwnerGlobalRelayId})}),(0,r.jsx)(x.nq,{})]})})]})]})})}try{rj.displayName||(rj.displayName="Commit")}catch{}var r_=n(69599);function rw({url:e}){return(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"color-fg-muted f6 mt-4",children:["Seeing something unexpected? Take a look at the",(0,r.jsxs)(z.A,{inline:!0,href:e,children:[" ","GitHub commits guide"]}),"."]})})}try{rw.displayName||(rw.displayName="CommitHelpMessage")}catch{}let rk=(0,c.createContext)({since:null,until:null,author:null,currentBlobPath:"",pagination:{hasNextPage:!1,hasPreviousPage:!1,endCursor:"",startCursor:""},newPath:null,originalBranch:null});function rS({filters:e,children:t}){return(0,r.jsx)(rk.Provider,{value:e,children:t})}function rE(){return(0,c.useContext)(rk)}try{rk.displayName||(rk.displayName="FilterContext")}catch{}try{rS.displayName||(rS.displayName="FilterProvider")}catch{}var rL=n(34745),rI=n(4095);let rD={TimelineRow:"FileHistory-module__TimelineRow--IgQLc"};var rT=n(89830);function rR(){let e=rE();return e.newPath&&e.originalBranch}function rA(){let e=(0,l.t)(),t=rE();return rR()?(0,r.jsx)(rT.s,{className:rD.TimelineRow,children:(0,r.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,r.jsx)(rT.s.Heading,{as:"h3",title:`Renamed to ${t.newPath}`,"data-testid":"commit-note-title"}),(0,r.jsx)(er.N,{to:(0,C.GpY)({owner:e.ownerLogin,repo:e.name,ref:t.originalBranch,path:t.newPath}),children:"(Browse History)"})]})}):null}function rF(){let e=(0,rI.ej)();return e?.hasRenameCommits?(0,r.jsx)(rT.s,{children:(0,r.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,r.jsx)(rT.s.Heading,{as:"h3",title:`Renamed from ${e?.oldName}`,"data-testid":"commit-note-title"}),(0,r.jsx)(er.N,{to:e?.historyUrl,children:"(Browse History)"})]})}):null}function rM(){let e=(0,rI.ej)();return e?.hasRenameCommits?null:(0,r.jsx)(rT.s,{clipTimeline:"bottom",children:(0,r.jsx)(rT.s.Heading,{as:"h3",title:"End of commit history for this file","data-testid":"commit-note-title"})})}function rO(){let e=rE(),t=(0,rI.xs)();return!e.currentBlobPath||e.currentBlobPath&&e.pagination.hasNextPage?null:(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)(rT.s,{leadingVisual:(0,r.jsx)(t_.A,{size:"small"})}),!t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(rF,{}),(0,r.jsx)(rM,{})]})]})}try{rA.displayName||(rA.displayName="RenamedToHistory")}catch{}try{rF.displayName||(rF.displayName="RenamedFromHistory")}catch{}try{rM.displayName||(rM.displayName="EndOfFileHistory")}catch{}try{rO.displayName||(rO.displayName="EndOfFile")}catch{}function r$({commitGroups:e,deferredDataUrl:t,softNavToCommit:n}){let i=rE(),a=(0,l.t)(),s=(0,W.wu)(t);return(0,r.jsxs)("div",{className:"mb-3","data-hpc":!0,children:[(0,r.jsx)(iM.A,{as:"h2",className:"sr-only",children:"Commit History"}),(0,r.jsx)(rL.f,{leadingContent:(0,r.jsx)(rA,{}),commitGroups:e,trailingContent:(0,r.jsx)(rO,{}),repository:a,deferredCommitData:s,shouldClipTimeline:function(){let e=rR(),t=rE();return!e&&!t.pagination.hasPreviousPage}(),currentBlobPath:i.currentBlobPath,softNavToCommit:n})]})}try{r$.displayName||(r$.displayName="CommitList")}catch{}var rP=n(78328),rB=n(4817),rU=n(54589),rH=n(89169);let rz={Box:"CopilotCommitRecapPanel-module__Box--FD5ej",Box_1:"CopilotCommitRecapPanel-module__Box_1--nhXX2",Box_2:"CopilotCommitRecapPanel-module__Box_2--xtWb6",Octicon:"CopilotCommitRecapPanel-module__Octicon--mL7Wb",Heading:"CopilotCommitRecapPanel-module__Heading--xNRxb",Box_3:"CopilotCommitRecapPanel-module__Box_3--j9Ce0",Box_4:"CopilotCommitRecapPanel-module__Box_4--G1Y8S",Text:"CopilotCommitRecapPanel-module__Text--M5_1P",Box_5:"CopilotCommitRecapPanel-module__Box_5--iXw2r",Box_6:"CopilotCommitRecapPanel-module__Box_6--_r4Ho",Box_7:"CopilotCommitRecapPanel-module__Box_7--C0btw",Text_1:"CopilotCommitRecapPanel-module__Text_1--SYCkI",Box_8:"CopilotCommitRecapPanel-module__Box_8--ETSez",Text_2:"CopilotCommitRecapPanel-module__Text_2--B03jL",fadeInAuthor:"CopilotCommitRecapPanel-module__fadeInAuthor--sP6yf",avatarLink:"CopilotCommitRecapPanel-module__avatarLink--o9oMm",headerContainer:"CopilotCommitRecapPanel-module__headerContainer--DVfrh",authorNameLink:"CopilotCommitRecapPanel-module__authorNameLink--iNSl5",authorNameText:"CopilotCommitRecapPanel-module__authorNameText--GppXf",prLink:"CopilotCommitRecapPanel-module__prLink--zm2QK",commitMetadataContainer:"CopilotCommitRecapPanel-module__commitMetadataContainer--zl5sU",commitCountLink:"CopilotCommitRecapPanel-module__commitCountLink--OK0QX",commitCountText:"CopilotCommitRecapPanel-module__commitCountText--Ym2YE",Footer:"CopilotCommitRecapPanel-module__Footer--MlgKD",FeedbackButtons:"CopilotCommitRecapPanel-module__FeedbackButtons--fU6am",isHidden:"CopilotCommitRecapPanel-module__isHidden--XMEtq",relativeTime:"CopilotCommitRecapPanel-module__relativeTime--dlXGT"},rK=({size:e})=>(0,r.jsxs)(V.A,{className:"ml-2",variant:(e=>{switch(e.toUpperCase()){case"XS":case"S":return"success";case"M":return"attention";case"L":return"severe";case"XL":return"danger";default:return"secondary"}})(e),size:"small",children:["size: ",e]}),rV=({initials:e})=>(0,r.jsx)("div",{className:rz.Box,children:e.toUpperCase()}),rG=({login:e,avatarUrl:t,name:n,repoOwner:i,repoName:a,refName:l})=>{let s=(e=>{let t=e.trim();if(!t)return"??";let n=t.split(/\s+/).filter(e=>e.length>0);return n.length>=2?(n[0]?.charAt(0)||"")+(n[n.length-1]?.charAt(0)||""):t.charAt(0)+(t.charAt(1)||"")})(e||n);if(t&&e){let n=`/${encodeURIComponent(i)}/${encodeURIComponent(a)}/commits${l?`/${encodeURIComponent(l)}`:""}?author=${encodeURIComponent(e)}`;return(0,r.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer nofollow",className:rz.avatarLink,children:(0,r.jsx)(nw.r,{src:t,size:24,alt:`@${e}`})})}return(0,r.jsx)(rV,{initials:s})},rq=({author:e,repoOwner:t,repoName:n,refName:i,className:a})=>{if(e.login){let l=`/${encodeURIComponent(t)}/${encodeURIComponent(n)}/commits${i?`/${encodeURIComponent(i)}`:""}?author=${encodeURIComponent(e.login)}`;return(0,r.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer nofollow",className:`${a} ${rz.authorNameLink}`,children:e.name})}return(0,r.jsx)("span",{className:`${a} ${rz.authorNameText}`,children:e.name})},rW=({pr:e,repoOwner:t,repoName:n})=>{let i=`/${encodeURIComponent(t)}/${encodeURIComponent(n)}/pull/${encodeURIComponent(e.number)}`;return(0,r.jsxs)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:rz.prLink,children:[(0,r.jsx)("span",{style:{color:"merged"===e.state?"var(--fgColor-done)":"var(--fgColor-open)"},children:(0,r.jsx)(u.GitPullRequestIcon,{size:16})}),(0,r.jsxs)("span",{children:["#",e.number]})]})},rQ=({pr:e,commits:t,size:n,repoOwner:i,repoName:a})=>{let l=(()=>{if(1===t.length&&t[0])return(0,C.$Qz)({owner:i,repo:a,commitish:t[0].oid});if(t.length>=2){let e=t.filter(e=>e.author?.date&&""!==e.author.date.trim());if(e.length>=2){let t=[...e].sort((e,t)=>new Date(e.author.date).getTime()-new Date(t.author.date).getTime());if(t.length>=2){let e=t[0],n=t[t.length-1];if(e&&n)return`/${encodeURIComponent(i)}/${encodeURIComponent(a)}/compare/${e.oid}^...${n.oid}`}}}return null})(),s=t.length;return(0,r.jsxs)("div",{className:rz.commitMetadataContainer,children:[(0,r.jsxs)("div",{className:"d-flex flex-items-center",children:[l?(0,r.jsxs)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:rz.commitCountLink,children:[(0,r.jsx)(u.GitCommitIcon,{size:16}),1===s?"1 commit":`${s} commits`]}):(0,r.jsxs)("span",{className:rz.commitCountText,children:[(0,r.jsx)(u.GitCommitIcon,{size:16}),1===s?"1 commit":`${s} commits`]}),n&&(0,r.jsx)(rK,{size:n})]}),e&&(0,r.jsx)(rW,{pr:e,repoOwner:i,repoName:a})]})},rX=[];function rY({isVisible:e,isLoading:t,analysis:n,repoOwner:i,repoName:a,refName:l,onClose:s,commitGroups:o=rX}){let d=(0,c.useRef)(null),m=(0,c.useRef)(null),{sendClickAnalyticsEvent:h}=(0,nB.S)(),[f,p]=(0,c.useState)(!1),g=n.analysisData,y=n.errorMessage,x=(0,c.useMemo)(()=>{let e=new Map;for(let t of g)e.set(t.oid,{summary:t.summary,size:t.size});return e},[g]),b=(0,c.useMemo)(()=>o&&0!==o.length?o.map((e,t)=>{let n=new Map;for(let t of e.commits)if(t.author){let e=t.author.login||t.author.name;n.has(e)||n.set(e,{login:t.author.login,avatarUrl:t.author.avatar_url,name:t.author.name})}return{groupIndex:t,authors:Array.from(n.values()),commitCount:e.commits.length,commits:e.commits,pr:e.pr}}):[],[o]),C=!!y,v=(0,c.useCallback)(e=>{h({category:"copilot.commit-recap",action:`feedback-${e}`,refName:l||""}),p(!0)},[h,l]),N=(0,c.useCallback)(()=>{h({category:"copilot.commit-recap",action:"panel-closed",refName:l||""}),s?.()},[s,h,l]);if((0,c.useEffect)(()=>{let e=m.current;if(!e)return;let t=e=>{let t=e.target.closest("a");t&&t.href&&h({category:"copilot.commit-recap",action:"link-clicked",refName:l||"",href:t.href})};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}},[e,l,g,h]),!e)return null;let j=0===g.length&&!C;return(0,r.jsxs)("div",{className:rz.Box_1,ref:m,children:[(0,r.jsxs)("div",{className:rz.Box_2,children:[(0,r.jsxs)("div",{className:rz.headerContainer,children:[(0,r.jsx)(I.A,{icon:u.CopilotIcon,className:rz.Octicon}),(0,r.jsx)(iM.A,{as:"h3",className:rz.Heading,children:"Commit Recap"}),(0,r.jsx)(rU.X,{className:"pl-2"})]}),s&&(0,r.jsx)(K.K,{"aria-label":"Close commit recap",icon:u.XIcon,size:"small",variant:"invisible",onClick:N})]}),j&&(0,r.jsxs)("div",{className:rz.Box_3,children:[(0,r.jsx)("div",{className:rz.Box_4,children:(0,r.jsx)(rP.A,{})}),(0,r.jsx)("span",{className:rz.Text,children:"Analyzing recent commits..."})]}),C&&(0,r.jsx)(L.A,{variant:"danger",className:rz.Box_4,children:y}),g.length>0&&!C&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{ref:d,className:`${rz.Box_5} ${rz.fadeInAuthor}`,children:b.map((e,n)=>{let s=e.commits[0]?.oid,o=s?x.get(s):void 0,d=e.authors,c=e.commits.reduce((e,t)=>{let n=new Date(t.author?.date||0);return n>e?n:e},new Date(0));return o?(0,r.jsxs)("div",{className:rz.Box_6,children:[d.length>0&&(0,r.jsxs)("div",{className:rz.Box_7,children:[d.slice(0,3).map((e,s)=>(0,r.jsx)("div",{className:`${rz.fadeInAuthor} ${t&&n===b.length-1?rz.isHidden:""}`,style:{animationDelay:`${200*n+100*s}ms`},children:(0,r.jsx)(rG,{login:e.login,avatarUrl:e.avatarUrl,name:e.name,repoOwner:i,repoName:a,refName:l})},e.login||e.name)),d.length>3&&(0,r.jsxs)("span",{className:rz.Text_1,children:["+",d.length-3]})]}),(0,r.jsxs)("div",{className:`${rz.Box_8} ${rz.fadeInAuthor}`,style:{animationDelay:`${200*n}ms`},children:[d.length>0&&(0,r.jsxs)("span",{children:[d.map((e,t)=>(0,r.jsxs)("span",{children:[(0,r.jsx)(rq,{author:e,repoOwner:i,repoName:a,refName:l,className:rz.fadeInAuthor}),t<d.length-1&&", "]},e.login||e.name)),(0,r.jsx)(rH.A,{className:`${rz.fadeInAuthor} ${rz.relativeTime}`,date:c})]}),(0,r.jsx)(rB.To,{markdown:o.summary,isStreaming:!1,openLinksInCurrentTab:!1})]}),e&&(0,r.jsx)("div",{className:`${rz.fadeInAuthor} ${t&&n===b.length-1?rz.isHidden:""}`,style:{animationDelay:`${200*n+300}ms`},children:(0,r.jsx)(rQ,{pr:e.pr,commits:e.commits,size:e.commits.length>0&&e.commits[0]?.oid?x.get(e.commits[0].oid)?.size:void 0,repoOwner:i,repoName:a})})]},`commitGroup-${e.groupIndex}`):null})})}),(0,r.jsxs)("div",{className:rz.Footer,children:[(0,r.jsx)("span",{className:rz.Text_2,children:"AI-generated content may be inaccurate. Please verify important information."}),f?(0,r.jsxs)("span",{className:rz.Text_2,children:["Thank you. This feature is under development and ",(0,r.jsx)("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSeKJgUAL0ENwW13Qy-QuiihzSfXfs81vzP0Jc5FZX-CCNDJnQ/viewform",children:"detailed feedback"})," is appreciated!"]}):(0,r.jsxs)("div",{className:rz.FeedbackButtons,children:[(0,r.jsx)(K.K,{"aria-label":"Good summary",icon:u.ThumbsupIcon,size:"small",variant:"invisible",onClick:()=>v("positive")}),(0,r.jsx)(K.K,{"aria-label":"Bad summary",icon:u.ThumbsdownIcon,size:"small",variant:"invisible",onClick:()=>v("negative")})]})]})]})}try{rK.displayName||(rK.displayName="SizeBadge")}catch{}try{rV.displayName||(rV.displayName="Monogram")}catch{}try{rG.displayName||(rG.displayName="AuthorAvatar")}catch{}try{rq.displayName||(rq.displayName="AuthorNameLink")}catch{}try{rW.displayName||(rW.displayName="RichPullRequestLink")}catch{}try{rQ.displayName||(rQ.displayName="CommitGroupMetadata")}catch{}try{rY.displayName||(rY.displayName="CopilotCommitRecapPanel")}catch{}var rJ=n(38411),rZ=n(96459),r0=n(40058),r1=n(57123),r2=n(84929),r4=n(96912),r3=n(5225);async function r5(e){let t=await (0,eN.lS)(e);return t.ok?await t.json():void 0}let r8=new Map,r9=(0,r3.A)(r5,{cache:r8});function r6(e,t){let n=new URL(N.fV.origin+N.fV.pathname+N.fV.search,N.fV.origin),i=n.searchParams;for(let e of t)i.has(e)&&i.delete(e);for(let[t,n]of Object.entries(e))i.set(t,n.toString());return n.pathname+n.search}var r7=n(6907);let le={calendarIcon:"ListHeader-module__calendarIcon--ubuuD",breadcrumbItem:"ListHeader-module__breadcrumbItem--UVN4V"},lt=(0,c.lazy)(()=>Promise.resolve().then(n.bind(n,83463)).then(e=>({default:e.DatePicker}))),ln=()=>(0,r.jsx)(I.A,{icon:u.CalendarIcon,className:(0,S.$)("fgColor-muted",le.calendarIcon)});function li({repo:e,refInfo:t,path:n,author:i,contributorsUrl:a,since:s,until:o,showCopilotButton:d=!1,showCopilotPopover:m=!1,onCopilotRecap:h,isLoadingCopilotRecap:f=!1}){let p=t.name;p===t.currentOid&&(p=(0,Q.F)(t.currentOid));let g=(0,rZ.Z)(),y=function(e){let t=(0,l.t)(),[n,i]=(0,c.useState)({users:[],error:!1,loading:!0});return(0,c.useEffect)(()=>{let t=!1;return(async()=>{i({users:[],error:!1,loading:!0});let n=await r9(e);if(t)return;let a=[],r=!1;try{n?a=n.authors:r=!0}catch{r=!0}i({users:a,error:r,loading:!1})})(),function(){t=!0}},[t,"",e,"all"]),n}(a),[x,b]=(0,c.useState)(m);c.useEffect(()=>{b(m)},[m]);let v=(0,c.useCallback)(async()=>{b(!1),await (0,eN.DI)("/settings/dismiss-notice/copilot_commit_recap_new_user_popover",{method:"POST"})},[]),N=c.useMemo(()=>{let e=(0,r2.H)(s??""),t=(0,r2.H)(o??"");return(0,r4.f)(e)&&(0,r4.f)(t)?{from:e,to:t}:null},[s,o]),j=n?.split("/");return(0,r.jsxs)(M.B,{direction:"horizontal",gap:"condensed",justify:"space-between",className:"mb-3",children:[n&&(0,r.jsx)("div",{className:"d-flex flex-items-center",children:(0,r.jsxs)("div",{className:"d-flex flex-items-baseline flex-column flex-sm-row",children:[(0,r.jsx)(iM.A,{as:"h2",className:"sr-only",children:"Breadcrumbs"}),(0,r.jsx)("span",{className:"fgColor-default no-wrap",children:"History for"}),(0,r.jsxs)(nH.BI,{className:"ml-1",children:[(0,r.jsx)(nH.BI.Item,{href:(0,C.GpY)({owner:e.ownerLogin,repo:e.name}),children:e.name}),j.map((n,i,a)=>{let l=(0,C.GpY)({owner:e.ownerLogin,repo:e.name,ref:t.name,path:a.slice(0,i+1).join("/")}),s=i===a.length-1;return(0,r.jsx)(nH.BI.Item,{sx:{...s?{fontWeight:"bold"}:{}},href:l,selected:s,className:le.breadcrumbItem,children:n},l)})]}),(0,r.jsxs)("div",{className:"no-wrap",children:[(0,r.jsx)("span",{className:"mr-2 ml-0 ml-sm-2 fgColor-default",children:"on"}),(0,r.jsx)(ee.A,{href:(0,C.IO9)({repo:e,commitish:t.name,action:"tree"}),children:p})]})]})}),!n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(iM.A,{as:"h2",className:"sr-only",children:"Branch selector"}),(0,r.jsx)(rJ.PI,{cacheKey:t.listCacheKey,canCreate:!1,hotKey:"w",currentCommitish:t.name,getHref:t=>(0,C.GpY)({owner:e.ownerLogin,repo:e.name,ref:t}),selectedRefType:t.refType,defaultBranch:e.defaultBranch,owner:e.ownerLogin,repo:e.name,idEnding:"commits"})]}),(0,r.jsxs)("div",{className:"d-flex flex-column flex-sm-row gap-2",children:[d&&(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)(H.Q,{variant:"default",leadingVisual:u.CopilotIcon,disabled:f,onClick:h,children:f?"Analyzing...":"Commit Recap"}),x&&(0,r.jsx)(r1.A,{relative:!1,open:!0,caret:"top",className:"mt-2",style:{left:"50%",transform:"translateX(-50%)"},children:(0,r.jsxs)(r1.A.Content,{overflow:"visible",className:"p-3",children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)("strong",{children:"Introducing the Commit Recap"})}),(0,r.jsx)("div",{className:"mb-3 text-small",children:"Groups together commits to cut through noise with summarized changes and linked PRs."}),(0,r.jsx)("div",{className:"d-flex gap-2",children:(0,r.jsx)(H.Q,{size:"small",onClick:v,children:"OK, got it"})})]})})]}),(0,r.jsx)(iM.A,{as:"h2",className:"sr-only",children:"User selector"}),(0,r.jsx)(r0.T,{defaultText:"All users",width:"medium",usersState:y,showTypedInUser:!0,currentUser:i??void 0,onOpenChange:e=>e,onSelect:e=>{e.login!==i?.login&&g(r6({author:e.login},["author","before","after"]))},renderCustomFooter:()=>(0,r.jsx)("div",{className:"px-2 py-3 border-top border-color-border-default",children:(0,r.jsx)(H.Q,{variant:"link",as:"a",href:r6({},["author"]),block:!0,children:"View commits for all users"})})}),(0,r.jsxs)(c.Suspense,{fallback:(0,r.jsx)(H.Q,{leadingVisual:ln,trailingVisual:u.TriangleDownIcon,children:"All time"}),children:[(0,r.jsx)(iM.A,{as:"h2",className:"sr-only",children:"Datepicker"}),(0,r.jsx)(lt,{variant:"range",value:N,maxDate:new Date,showTodayButton:!0,showClearButton:!0,compressedHeader:!0,onChange:e=>{if(!e)return void g(r6({},["since","until"]));let t=function(e){if(e)return{startDate:(0,r7.x)(e.from,{representation:"date"}),endDate:(0,r7.x)(e.to,{representation:"date"})}}(e);if(!t)return;let{startDate:n,endDate:i}=t;g(r6({since:n,until:i},["before","after"]))},placeholder:"All time",anchor:({children:e,...t})=>(0,r.jsx)(H.Q,{...t,"data-testid":"date-picker-commits",leadingVisual:ln,trailingVisual:u.TriangleDownIcon,children:e})})]})]})]})}try{lt.displayName||(lt.displayName="DatePicker")}catch{}try{ln.displayName||(ln.displayName="StyledCalendarIcon")}catch{}try{li.displayName||(li.displayName="ListHeader")}catch{}function la({paginationInfo:e}){let t=e.hasPreviousPage,n=e.hasNextPage,i=e=>e?{"aria-disabled":!0,sx:{backgroundColor:"transparent",border:"none",cursor:"default",color:"primer.fg.disabled",fontWeight:"normal"},onClick:e=>e.preventDefault()}:{};return t||n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(iM.A,{as:"h2",className:"sr-only",children:"Pagination"}),(0,r.jsx)("div",{className:"d-flex flex-justify-center mt-2",children:(0,r.jsxs)(io.A,{children:[(0,r.jsx)(H.Q,{as:er.N,to:lr(e,!1),className:"fgColor-accent text-normal",...i(!t),tabIndex:0,variant:"invisible","data-testid":"pagination-prev-button",leadingVisual:t?()=>(0,r.jsx)(I.A,{icon:u.ChevronLeftIcon,className:"fgColor-accent"}):null,children:"Previous"}),(0,r.jsx)(H.Q,{as:er.N,to:lr(e,!0),className:"fgColor-accent text-normal",...i(!n),tabIndex:0,variant:"invisible","data-testid":"pagination-next-button",trailingVisual:n?()=>(0,r.jsx)(I.A,{icon:u.ChevronRightIcon,className:"fgColor-accent"}):null,children:"Next"})]})})]}):null}function lr(e,t){return r6(t?{after:e.endCursor}:{before:e.startCursor},[t?"before":"after"])}try{la.displayName||(la.displayName="Pagination")}catch{}var ll=n(57271);let ls={LayoutHeader:"Layout-module__LayoutHeader--pSMxQ"};function lo({children:e,title:t}){return(0,r.jsxs)(ll.M,{rowGap:"none",children:[(0,r.jsx)(ll.M.Header,{divider:"line",className:ls.LayoutHeader,children:(0,r.jsx)("div",{className:"d-flex flex-items-center flex-justify-between",children:(0,r.jsx)(iM.A,{as:"h1",className:"f2 text-normal pb-2",id:"commits-pagehead",children:t})})}),(0,r.jsx)(ll.M.Content,{as:"div",children:(0,r.jsx)("div",{children:e})})]})}try{lo.displayName||(lo.displayName="Layout")}catch{}var ld=n(21067),lc=n(65411),lu=n(25641),lm=n(53419),lh=n(97286);let lf="Failed to generate commit recap";function lp(e,t,n,i,a){let r=i?` at path ${i}`:"";return`Below is a JSON array of metadata for a series of commits in the repository ${e}/${t}${r} on branch ${n}.

${JSON.stringify(a,null,2)}

Each entry in the array represents metadata for a group of commits. These groups represent logical units of work, such as those merged together from a pull request or by the same author in a short timeframe.

You will provide an analysis of each commit group, writing a brief summary and scoring its size in terms of the file.

#### oid

This is the oid value of the first commit in the commit group, used as an identifier to ensure proper ordering.

#### summary

- These are terse, succinct paragraphs of 1-2 sentences, summarizing the work represented by the commit group.
- Focus on the content of the included commit diffEntries as a source of truth.
- Prefer a past-tense imperative "changelog entry" style, in simple, even "telegraphic" terms. Start the first sentence with a verb.
- Avoid directly referencing the author or the pull request that contributed the change.
- Avoid using the file as an object in the sentence, it's self-evident that the changes are being made to the file.
- Consider both the specific structure of the changes (functions/templates/config values/etc) and the general impact on the nature and purpose of the file.
- Descriptive context like the explicit purpose/intent of a change (from the commit message, pull request title, or pull request body) of the change may be used.
- If that context includes links (such as to a GitHub issue) that are NOT the author or pull request, you may include them in markdown format.
- Obvious or implicit intent ("simplify the codebase", "improve maintainability", "resolve syntax error") should not be mentioned.
- Good examples of summaries:
  - "Extracted most of the module to another file as part of Project Tailspin, moving the encoding helpers and deleting some unused functions."
  - "Updated config values for the \`GreatApp\` integration to increase max instances and resolve [incident #49](https://github.com/foo/bar/issues/123).
  - "Removed unused function \`functionName\`."
  - "Fixed typo in a variable name."
- Bad examples of summaries:
  - "Deleted functions \`func1\`, \`func2\`, \`func3\` and \`func4\` from the file, improving the code for readability".
  - "This commit by @monalisa in [pull request #49](https://github.com/foo/bar/pulls/49) adds a new feature to the application, improving the user experience."

#### size
- This is a "t-shirt size" subjectively scoring both the scope and impact of the changes in the commit group.
- Sizes include XS, S, M, L, XL.
- This should be judged entirely from the commit diffEntries and the nature and purpose of the file.
- The cognitive complexity of the changes is more important than the number of lines changed. "Added" is simpler than "updated".
- Examples of XS changes:
  - cleanly deleting a large number of unused functions
  - renaming a variable throughout a file via find-and-replace
  - a simple typo fix
- Examples of S changes:
  - created the file, which is simple and contains a couple helper functions imported elsewhere
  - flipping a couple configuration values
  - adding a new function
  - removing a section of markup to get rid of some HTML content
- Examples of M changes:
  - adding couple new functions that supply a new data field in an existing function
  - updating how one complex function works without changing its interface
- Example of L changes:
  - broke one complex function into several simpler ones, but also changed the initial arguments provided from elsewhere
  - created the file, which contains several API handlers with callbacks, imported dependecies, and dynamic templating
- Example of XL changes:
  - removed one of the two sections of configuraiton encapsulated by this file
  - complete overhaul of a class, fundamentally changing its interface and internal logic

Return your analysis as a JSON array of objects each containing these three fields, corresponding to the order of the provided commit groups:

[
  {
    "oid": "commit_oid_1",
    "summary": "Brief summary of the changes",
    "size": "S"
  },
  {
    "oid": "commit_oid_2",
    "summary": "Brief summary of the changes",
    "size": "M"
  }
]
`}function lg(e){return Math.ceil(e.length/3)}function ly(e,t){let{refName:n,blobPath:i,...a}=t;(0,lm.BI)(`copilot.commit-recap.${e}`,{refName:n,blobPath:i||null,...a})}async function lx(e,t,n,i){let a=i.currentBlobPath||"",r=new URLSearchParams;r.append("name",n),i.since&&r.append("since",i.since),i.until&&r.append("until",i.until),i.author&&r.append("author",i.author.login);let l=a?`/${e}/${t}/commit_recap/${encodeURIComponent(a)}?${r}`:`/${e}/${t}/commit_recap.json?${r}`;try{let e=await (0,eN.lS)(l,{headers:{Accept:"application/json"}});if(!e.ok)throw ly("failed",{refName:n,blobPath:a,reason:"commit_groups_fetch_failed",statusCode:e.status}),Error(`Failed to fetch commit groups: ${e.status}`);let t=await e.json(),r=t.map(e=>e.type).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{});return ly("commit-groups-returned",{refName:n,blobPath:a,totalGroups:t.length,groupTypeCounts:r,hasAuthorFilter:!!i.author,hasDateFilters:!!(i.since||i.until)}),t}catch(e){throw ly("failed",{refName:n,blobPath:a,reason:"commit_groups_fetch_error",errorMessage:e instanceof Error?e.message:String(e)}),e}}async function lb(e,t,n,i){let a=new URLSearchParams;a.append("name",n);let r=i?`/${e}/${t}/commit_recap_check/${encodeURIComponent(i)}?${a}`:`/${e}/${t}/commit_recap_check.json?${a}`;try{let e=await (0,eN.lS)(r,{headers:{Accept:"application/json"}});if(!e.ok)throw Error(`Failed to check path: ${e.status}`);return await e.json()}catch(e){throw e}}async function lC(e,t,n,i){try{let a=i.currentBlobPath||"",r="pull_request"===n.type&&n.commits.length>0?[n.commits[0]?.oid].filter(Boolean):n.commits.map(e=>e.oid),l=new URLSearchParams;l.append("commit_oids",r.join(","));let s=a?`/${e}/${t}/commit_recap_diffs/${encodeURIComponent(a)}?${l}`:`/${e}/${t}/commit_recap_diffs.json?${l}`,o=await (0,eN.lS)(s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(o.ok){let e=await o.json();return{...n,diffEntries:e.diff_entries||[]}}return{...n,diffEntries:[]}}catch{return{...n,diffEntries:[]}}}async function lv(e,t,n,i,a,r,l){let s=lp(i,a,r,n,e),o=function(e){let t=e.map(e=>e.type).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{}),n=new Set,i=new Set;for(let t of e){for(let e of t.commits)e.author?.login&&n.add(e.author.login);t.pr?.number&&i.add(t.pr.number)}return{groupTypeCounts:t,authorsInBatch:n,pullRequestsInBatch:i,hasDiffData:e.some(e=>e.diffEntries&&e.diffEntries.length>0)}}(e);ly("capi-request-sent",{refName:r,blobPath:n,batchSize:e.length,tokenCount:lg(s),groupTypeCounts:o.groupTypeCounts,uniqueAuthorsCount:o.authorsInBatch.size,uniquePullRequestsCount:o.pullRequestsInBatch.size,hasDiffData:o.hasDiffData});try{let i=await (0,lu.p)({basePath:(0,ld._$)().copilotApiOverrideUrl||"https://api.githubcopilot.com",body:{messages:[{role:"user",content:s}],model:"gpt-4o-mini",stream:!1,responseFormat:{type:"json_schema",jsonSchema:{name:"CommitGroupAnalysisList",description:"Array of commit group analyses with summaries and size assessments",strict:!0,schema:{type:"array",items:{type:"object",additionalProperties:!1,properties:{oid:{type:"string",description:"The oid value of the first commit in the commit group, used as an identifier to ensure proper ordering."},summary:{type:"string",description:"A brief summary of the work represented by the commit group."},size:{type:"string",enum:["XS","S","M","L","XL"],description:"A t-shirt size scoring both the scope and impact of the changes in the commit group."}},required:["oid","summary","size"]}}}},temperature:.3},path:"/chat/completions",method:"POST",streamingResponse:!1,authToken:t,integrationId:"copilot-directory"});if(i.ok){let t,a=await i.json(),s=a.choices?.[0]?.message?.content;if(!s)throw Error("No analysis content received from Copilot API");if("object"==typeof s)t=s;else try{let e=s;e.startsWith(`\`\`\`json
`)&&e.endsWith(`
\`\`\``)?e=e.slice(8,-4):e.startsWith(`\`\`\`
`)&&e.endsWith(`
\`\`\``)&&(e=e.slice(4,-4)),t=JSON.parse(e)}catch{throw Error("Invalid analysis response format")}let d=new Map(e.filter(e=>e.commits.length>0).map((e,t)=>[e.commits[0]?.oid,t])),c=t?.sort((e,t)=>{let n=d.get(e.oid)??Number.MAX_SAFE_INTEGER,i=d.get(t.oid)??Number.MAX_SAFE_INTEGER;return n-i}),u=c.map(e=>(console.log(`Commit group ${e.oid}: Size ${e.size}`),e.summary)).join(`

`);l(e=>[...e,...c]),ly("capi-response-received",{refName:r,blobPath:n,batchSize:e.length,responseLength:u.length,linkedAuthorsPercentage:o.authorsInBatch.size>0?function(e,t){let n=0;for(let i of Array.from(t))(e.includes(`@${i}`)||e.includes(i))&&n++;return n}(u,o.authorsInBatch)/o.authorsInBatch.size:0,linkedPullRequestsPercentage:o.pullRequestsInBatch.size>0?function(e,t){let n=0;for(let i of Array.from(t))(e.includes(`#${i}`)||e.includes(`[#${i}]`))&&n++;return n}(u,o.pullRequestsInBatch)/o.pullRequestsInBatch.size:0})}else throw ly("failed",{refName:r,blobPath:n,reason:"capi_response_not_ok",statusCode:i.status}),Error(lf)}catch(e){throw ly("failed",{refName:r,blobPath:n,reason:"capi_request_failed",errorMessage:e instanceof Error?e.message:String(e)}),e}}var lN=n(57028);function lj(){let e=(0,l.t)(),t=(0,q.D)(),n=(0,d.B)(),i=n.filters,a=n.commitGroups,s=n.metadata?.softNavToCommit||!1,o=(0,r_.G7)("copilot_commit_recap"),{response:u,isLoadingCopilotRecap:m,commitGroups:h,showRecapPanel:f,showRecapButton:p,showRecapPopover:g,handleCopilotRecap:y,handleCloseRecap:x}=function({repoOwner:e,repoName:t,refName:n,defaultBranch:i,filters:a}){let[r,l]=(0,c.useState)([]),[s,o]=(0,c.useState)(""),[d,u]=(0,c.useState)(!1),[m,h]=(0,c.useState)(!1),f=(0,c.useRef)(!1),p=(0,c.useRef)(null),g=(0,r_.G7)("copilot_commit_recap"),y=n||i||"main",{data:x,isSuccess:b,isFetching:C,refetch:v}=(0,lh.I)({queryKey:["commit-rollup",e,t,y,a],queryFn:()=>lx(e,t,y,a),enabled:!1}),{data:N,isSuccess:j,refetch:_}=(0,lh.I)({queryKey:["path-check",e,t,y,a.currentBlobPath],queryFn:()=>lb(e,t,y,a.currentBlobPath||""),enabled:g&&!!a.currentBlobPath}),w=(0,c.useMemo)(()=>x||[],[x]),k=(0,c.useMemo)(()=>!!a.currentBlobPath&&(void 0===N||N?.is_file!==!1),[N,a.currentBlobPath]),S=(0,c.useMemo)(()=>k&&N?.show_popover===!0,[k,N]),E=(0,c.useCallback)(async n=>{if(0!==n.length&&!f.current){f.current=!0,h(!0),l([]),o("");try{let i=a.currentBlobPath||"",r=new lc.J([]),s=await r.getAuthToken(),o=lg(lp(e,t,y,i,[])),d=[],c=o;for(let r=0;r<n.length;r++){let u=n[r];if(!u)continue;let m=await lC(e,t,u,a),h=lg(JSON.stringify(m,null,2));c+h>16e3&&d.length>0?(await lv(d,s,i,e,t,y,l),d=[m],c=o+h):(d.push(m),c+=h)}d.length>0&&await lv(d,s,i,e,t,y,l)}catch{o(lf)}finally{h(!1),f.current=!1}}},[e,t,y,a]);(0,c.useEffect)(()=>{b&&d&&w.length>0&&!f.current&&E(w)},[b,d,w,E]);let L=(0,c.useCallback)(async()=>{if(ly("requested",{refName:y,blobPath:a.currentBlobPath||"",hasAuthorFilter:!!a.author,hasDateFilters:!!(a.since||a.until)}),l([]),o(""),!a.currentBlobPath){u(!0),b&&0!==w.length||v();return}if(N?.is_file===!0)u(!0),b&&0!==w.length||v();else try{let e=await _();e.data?.is_file===!0?(u(!0),b&&0!==w.length||v()):u(!1)}catch{u(!1)}},[v,_,y,a,b,w,N]),I=(0,c.useCallback)(()=>{u(!1),l([]),o(""),h(!1),f.current=!1},[]);return((0,c.useEffect)(()=>{let e=p.current;if(null===e){p.current=a;return}(e.pagination?.endCursor!==a.pagination?.endCursor||e.pagination?.startCursor!==a.pagination?.startCursor||e.since!==a.since||e.until!==a.until||e.author?.login!==a.author?.login||e.currentBlobPath!==a.currentBlobPath)&&d&&(u(!1),l([]),o(""),h(!1),f.current=!1),p.current=a},[a,d]),g)?{response:{analysisData:r,errorMessage:s},analysisData:r,errorMessage:s,isLoadingCopilotRecap:C||m,triggerAnalysis:E,commitGroups:w,showRecapPanel:d,showRecapButton:k,showRecapPopover:S,handleCopilotRecap:L,handleCloseRecap:I}:{response:{analysisData:[],errorMessage:""},analysisData:[],errorMessage:"",isLoadingCopilotRecap:!1,commitGroups:[],showRecapPanel:!1,showRecapButton:!1,showRecapPopover:!1,handleCopilotRecap:()=>{},handleCloseRecap:()=>{}}}({repoOwner:e.ownerLogin,repoName:e.name,refName:n.refInfo?.name,defaultBranch:e.defaultBranch,filters:i}),b=`There isn't any commit history to show here${null!==i.since||null!==i.until?" for the selected date range":""}`;return(0,c.useEffect)(()=>{if(!N.fV.hash&&window.scrollY>0){let e=document.querySelector("#commits-pagehead");e?.scrollIntoView()}},[n.filters.pagination,n.filters.since,n.filters.until]),(0,r.jsx)(rS,{filters:n.filters,children:(0,r.jsxs)(lo,{title:"Commits",children:[(0,r.jsx)(li,{repo:e,contributorsUrl:n.metadata?.deferredContributorUrl||"",since:i.since,until:i.until,author:i.author,refInfo:n.refInfo,path:i.currentBlobPath,showCopilotButton:o&&p,showCopilotPopover:g,onCopilotRecap:y,isLoadingCopilotRecap:m}),o&&(0,r.jsx)(rY,{isVisible:f,isLoading:m,analysis:u,repoOwner:e.ownerLogin,repoName:e.name,refName:n.refInfo?.name,onClose:x,commitGroups:h}),0===a.length&&(0,r.jsx)(lN.M,{timeoutMessage:n.timedOutMessage,unavailableMessage:b}),a.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(r$,{commitGroups:a,deferredDataUrl:n.metadata?.deferredDataUrl||"",softNavToCommit:s}),(0,r.jsx)(la,{paginationInfo:i.pagination})]}),n.metadata?.showProfileHelp&&(0,r.jsx)(rw,{url:`${t.helpUrl}/articles/troubleshooting-commits-on-your-timeline`})]})})}try{lj.displayName||(lj.displayName="Commits")}catch{}(0,a.o)("commits",()=>({App:f,routes:[(0,i.a)({path:"/:owner/:repo/commits",Component:lj}),(0,i.a)({path:"/:owner/:repo/commits/:ref",Component:lj}),(0,i.a)({path:"/:owner/:repo/commits/:ref/:path/*",Component:lj}),(0,i.a)({path:"/:owner/:repo/commit/:oid",Component:rj}),(0,i.a)({path:"/:owner/:repo/commit/:oid/:path/*",Component:rj}),(0,i.a)({path:"/_view_fragments/Voltron::CommitFragmentsController/show/:owner/:repo/:name/repo_layout",Component:rj})]}))},30617:(e,t,n)=>{"use strict";n.d(t,{X:()=>o});var i=n(78314),a=n(25407),r=n(76648),l=n(96379),s=n(96540);function o(){let e=(0,i.t)(),{commit:t}=(0,r.B)(),n=`/${(0,a.QU3)(e.ownerLogin)}/${(0,a.QU3)(e.name)}/commit_comment`,o=`${n}/create`,d=(0,s.useCallback)(async(e,n,i)=>{let a=new FormData;a.append("commit_id",t.oid),a.append("comment[body]",e),n&&i&&(a.append("path",n),a.append("position",i.toString()));let r=await (0,l.DI)(o,{method:"POST",body:a});return r.ok?{error:null,comment:(await r.json()).comment}:{error:Error("Failed to add comment"),comment:null}},[t.oid,o]),c=(0,s.useCallback)(async(e,t)=>{let i=new FormData;i.append("_method","put"),i.append("commit_comment[id]",t.id.toString()),i.append("commit_comment[body]",e),i.append("commit_comment[bodyVersion]",t.bodyVersion);let a=await (0,l.DI)(n,{method:"POST",body:i});if(!a.ok)return{error:Error("Failed to edit comment"),updatedFields:null};{let e=await a.json();return{error:null,updatedFields:{body:e.source,bodyVersion:e.bodyVersion,htmlBody:e.body}}}},[n]),u=(0,s.useCallback)(async e=>{let t=new FormData;return(t.append("_method","delete"),t.append("commit_comment[id]",e),(await (0,l.DI)(n,{method:"POST",body:t})).ok)?"success":"error"},[n]),m=(0,s.useCallback)(async(e,t)=>{let i=new FormData;return(i.append("_method","put"),i.append("classifier",t),(await (0,l.DI)(`${n}/${e}/minimize`,{method:"POST",body:i,headers:{Accept:"application/json"}})).ok)?"success":"error"},[n]),h=(0,s.useCallback)(async e=>{let t=new FormData;return(t.append("_method","put"),(await (0,l.DI)(`${n}/${e}/unminimize`,{method:"POST",body:t,headers:{Accept:"application/json"}})).ok)?"success":"error"},[n]),f=(0,s.useMemo)(()=>({repository:{databaseId:e.id,nwo:`${e.ownerLogin}/${e.name}`,slashCommandsEnabled:!1},type:"commit",id:{id:t.oid}}),[e.id,e.name,e.ownerLogin,t.oid]);return(0,s.useMemo)(()=>({addComment:d,commentBoxSubject:f,editComment:c,deleteComment:u,hideComment:m,unhideComment:h}),[d,u,c,m,h,f])}},98783:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var i=n(79634);function a(){return(0,i.X)()}},49245:(e,t,n)=>{"use strict";n.d(t,{I:()=>d,p:()=>u});var i=n(25407),a=n(71315),r=n(96379),l=n(96540),s=n(28014),o=n(68534);function d({repo:e,commit:t,viewerCanReply:n,repoOwnerGlobalRelayId:a,getInlineCommentInfoByPathAndPosition:o}){let{addComments:d}=(0,s.B)();return(0,l.useCallback)((l,s)=>new Promise(async(u,m)=>{let[h,f]=l.split("::");if(!h||!f)return void m(Error("Invalid threadId"));if(!s){let i=o(h,Number(f));u(i?c(i,t,e,n,l,a):void 0);return}let p=await (0,r.lS)(`${(0,i.MLt)({owner:e.ownerLogin,repo:e.name,commitOid:t.oid,path:h,position:f})}${s?"&isRefetch=true":""}`);if(p.ok){let i=await p.json();d(i.comments,h,f),u(i.comments?c(i.comments,t,e,n,l,a):void 0)}else m(Error("Failed to fetch thread"))}),[d,t,o,e,n,a])}function c(e,t,n,i,a,r){return{commentsData:{comments:e.map(e=>u(e,t,n,r))},id:a,viewerCanReply:i}}function u(e,t,n,r){return{publishedAt:void 0,state:"",viewerRelationship:"",id:e.relayId,databaseId:e.id,body:e.body,bodyHTML:e.htmlBody,createdAt:e.createdAt,url:`${a.cg?.location.origin}${(0,i.$Qz)({owner:n.ownerLogin,repo:n.name,commitish:t.oid})}#${e.urlFragment}`,currentDiffResourcePath:`#${e.urlFragment}`,authorAssociation:e.authorAssociation?.toUpperCase(),author:{id:e.author.id,login:e.author.login,avatarUrl:e.author.avatarUrl,url:""},isHidden:e.isHidden,lastUserContentEdit:e.lastUserContentEdit,minimizedReason:e.minimizedReason,subjectType:"commit",viewerCanMinimize:e.viewerCanMinimize,viewerCanSeeMinimizeButton:e.viewerCanMinimize,viewerCanSeeUnminimizeButton:e.viewerCanMinimize,viewerCanDelete:e.viewerCanDelete,viewerCanUpdate:e.viewerCanUpdate,viewerCanReact:e.viewerCanReact,viewerCanReport:e.viewerCanReport,viewerCanReportToMaintainer:e.viewerCanReportToMaintainer,viewerCanBlockFromOrg:e.viewerCanBlockFromOrg,viewerCanUnblockFromOrg:e.viewerCanUnblockFromOrg,viewerDidAuthor:e.viewerDidAuthor,reactionGroups:e.reactionGroups,reference:{number:void 0,text:(0,o.F)(t.oid),author:{login:t.authors.length>0?t.authors[0]?.login??"":""}},repository:{id:n.id.toString(),isPrivate:n.private,name:n.name,owner:{id:r,login:n.ownerLogin,url:""}}}}},3536:(e,t,n)=>{"use strict";n.d(t,{I:()=>o,d_:()=>d,wu:()=>s});var i=n(37285),a=n(96379),r=n(96540),l=n(4095);function s(e,t){let[n,s]=(0,r.useState)(l.UI);return(0,r.useEffect)(()=>{if(!e)return;let t=!1;return(async()=>{s(l.UI);let n=await (0,a.Sr)((0,i.RD)(e));if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&((0,i.Av)(e),s(e))}else s(l.Xx)}catch{s(l.Xx)}})(),function(){t=!0}},[e,t]),n}function o(e){let[t,n]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{e&&(async()=>{let t=await (0,a.Sr)((0,i.RD)(e));try{if(t.ok){let e=await t.json();e&&((0,i.Av)(e),n(e.data))}}catch{}})()},[e]),t}function d(e,t,n,i){let[s,o]=(0,r.useState)(l.UI),d=(0,r.useRef)([...Array(n)]),c=(0,r.useRef)(t);return(0,r.useEffect)(()=>{if(!e)return;let n=!1;async function i(t){let r=await (0,a.Sr)(`${e}?start_entry=${t}`);if(!n)try{if(r.ok){let e=await r.json();if(e){let t=0;for(let n=c.current;n<e.nextIndex;n++)d.current[n]=e.deferredCommits[t],t++;e.deferredCommits=d.current,e.loadMore&&c.current!==e.nextIndex?(c.current=e.nextIndex,e.error=!1,o(e),setTimeout(()=>i(e.nextIndex),0)):(c.current===e.nextIndex?e.error=!0:e.error=!1,o(e))}}else o(e=>({...e,loading:!1,error:!0,extraDiffEntries:d.current}))}catch{o(e=>({...e,loading:!1,deferredCommits:d.current}))}}return i(t),function(){n=!0}},[e,i,t]),(0,r.useEffect)(()=>{d.current=[],c.current=t},[e,i,t]),s}},68534:(e,t,n)=>{"use strict";function i(e){return e.slice(0,7)}n.d(t,{F:()=>i})},83878:(e,t,n)=>{"use strict";function i(e,t){return"d28fac7f18aeacb00d8ad3460a0a5a901617c2d4"===e&&0xf122a7===t}n.d(t,{N:()=>i})},65620:(e,t,n)=>{"use strict";n.d(t,{Y:()=>AuthToken});var i=n(50467);let AuthToken=class AuthToken{get authorizationHeaderValue(){return`GitHub-Bearer ${this.value}`}needsRefreshing(e){return this.isExpired||this.ssoChanged(e)}get isExpired(){let e=new Date(this.expiration);return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()))<new Date(Date.now()+15e3)}ssoChanged(e){return!(this.ssoOrgIDs.every(t=>e.includes(t))&&e.every(e=>this.ssoOrgIDs.includes(e)))}static fromResult(e,t){return new AuthToken(e.token,e.expiration,t)}serialize(){return{value:this.value,expiration:this.expiration,ssoOrgIDs:this.ssoOrgIDs}}static deserialize(e){return new AuthToken(e.value,e.expiration,e.ssoOrgIDs)}constructor(e,t,n){(0,i._)(this,"value",void 0),(0,i._)(this,"expiration",void 0),(0,i._)(this,"ssoOrgIDs",void 0),this.value=e,this.expiration=t,this.ssoOrgIDs=n}}},65411:(e,t,n)=>{"use strict";n.d(t,{J:()=>CopilotAuthTokenProvider});var i=n(50467),a=n(65620),r=n(82075),l=n(96379);let CopilotAuthTokenProvider=class CopilotAuthTokenProvider{async getAuthToken(){let e=this.getLocalStorageAuthToken();return e?this.validateAuthToken(e):this.fetchAuthToken()}setLocalStorageAuthToken(e){this.copilotLocalStorage.setItem(this.storageKey,JSON.stringify(e.serialize()))}getLocalStorageAuthToken(){let e=this.copilotLocalStorage.getItem(this.storageKey);return e?a.Y.deserialize(JSON.parse(e)):null}removeLocalStorageAuthToken(){this.copilotLocalStorage.removeItem(this.storageKey)}async validateAuthToken(e){return e.needsRefreshing(this.ssoOrgIDs)?this.fetchAuthToken():e}fetchAuthToken(){return this.currentAuthTokenRequest||(this.currentAuthTokenRequest=this._fetchAuthToken()),this.currentAuthTokenRequest}async _fetchAuthToken(){let e=await (0,l.lS)(this.tokenEndpoint,{method:"POST"});if(e.ok){let t=await e.json();this.currentAuthTokenRequest=null;let n=a.Y.fromResult(t,this.ssoOrgIDs);return this.setLocalStorageAuthToken(n),n}throw this.currentAuthTokenRequest=null,Error("Failed to mint new auth token")}constructor(e,t="/github-copilot/chat/token",n="COPILOT_AUTH_TOKEN"){(0,i._)(this,"tokenEndpoint",void 0),(0,i._)(this,"storageKey",void 0),(0,i._)(this,"ssoOrgIDs",void 0),(0,i._)(this,"currentAuthTokenRequest",void 0),(0,i._)(this,"copilotLocalStorage",void 0),this.ssoOrgIDs=e,this.currentAuthTokenRequest=null,this.copilotLocalStorage=(0,r.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),this.storageKey=n,this.tokenEndpoint=t}}},84363:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var i=n(59403);let a=({items:e,filter:t,key:n,secondaryKey:a})=>{let r=e.map(e=>[(0,i.dt)(t,n(e)),e]);return a&&(r=r.map(([e,n])=>[Math.max(e,(0,i.dt)(t,a(n))),n])),r.filter(([e])=>e>i.IP).sort(([e,t],[i,a])=>i===e?n(t).localeCompare(n(a)):i-e).map(([,e])=>e)}},59403:(e,t,n)=>{"use strict";n.d(t,{Dx:()=>l,IP:()=>r,M4:()=>a,dt:()=>s});var i=n(91385);let a=1/0,r=-1/0,l=1,s=(e,t,n=l)=>{let s=e.trim().toLowerCase(),o=t.trim().toLowerCase();if(s===o)return a;if(0===o.length||0===s.length)return r;let d=(0,i.fN)(s,o);return d===1/0&&s!==o?r:o.startsWith(s)||o.endsWith(s)?d+n:d}},18042:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});let i={confirmations:{deleteEditHistoryTitle:"Are you sure you want to delete this revision from the history?",deleteEditHistoryContent:"This edit\u2019s content will no longer be visible. This action can not be undone.",deleteEditHistoryConfirmButtonContent:"Remove"},editHistory:{viewingEditTitle:"Viewing edit",deleted:"Deleted",mostRecent:"Most recent",emptyEdit:"This revision does not contain any content.",deletedThisRevision:"deleted this revision",created:"created",edited:"edited",deleteRevisionAriaLabel:"Delete this edit revision",ariaLabel:"Open edits",openEditsButton:"Edits",editedBy:"edited by"}}},38829:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});let i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useMarkdownEditHistoryViewerQueryQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"MarkdownEditHistoryViewer_comment"},{args:null,kind:"FragmentSpread",name:"MarkdownLastEditedBy"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useMarkdownEditHistoryViewerQueryQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[n,i,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewerCanReadUserContentEdits",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastEditedAt",storageKey:null},{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"lastUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},i],storageKey:null},i],storageKey:null}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}]},params:{id:"d72649dd9392589f64dd4570b992b900",metadata:{},name:"useMarkdownEditHistoryViewerQueryQuery",operationKind:"query",text:null}}}();i.hash="4c6ffc38d14bcfbd11af3056fe1ca692";var a=n(18312);function r({id:e}){let t=(0,a.useLazyLoadQuery)(i,{id:e});return t.node?t.node:null}},51407:(e,t,n)=>{"use strict";function i(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}n.d(t,{Y:()=>i})},30459:(e,t,n)=>{"use strict";n.d(t,{S:()=>o,s:()=>s});var i=n(21728),a=n(96540),r=n(53419),l=n(49936);function s(){let e,t,n=(0,i.c)(6),s=(0,a.useContext)(l.I);if(!s)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:o,category:d,metadata:c}=s;n[0]!==o||n[1]!==d||n[2]!==c?(e=(e,t,n)=>{let i={react:!0,app_name:o,category:d,...c};(0,r.BI)(e,{...i,...void 0===n?{}:n,target:t})},n[0]=o,n[1]=d,n[2]=c,n[3]=e):e=n[3];let u=e;return n[4]!==u?(t={sendAnalyticsEvent:u},n[4]=u,n[5]=t):t=n[5],t}function o(){let e,t,n=(0,i.c)(4),{sendAnalyticsEvent:a}=s();n[0]!==a?(e=e=>{a("analytics.click",void 0,void 0===e?{}:e)},n[0]=a,n[1]=e):e=n[1];let r=e;return n[2]!==r?(t={sendClickAnalyticsEvent:r},n[2]=r,n[3]=t):t=n[3],t}},40104:(e,t,n)=>{"use strict";n.d(t,{D6:()=>u,Fo:()=>d,MV:()=>m,zB:()=>h});var i=n(50467),a=n(82075),r=n(96540);let l=(0,a.A)("sessionStorage"),s="session-storage-update",o=class UseSessionStorageUpdateEvent extends Event{constructor(e,t){super(s),(0,i._)(this,"storageKey",void 0),(0,i._)(this,"storageValue",void 0),this.storageKey=e,this.storageValue=t}};function d(e,t){let n=(0,r.useRef)(t);(0,r.useEffect)(()=>{n.current=t});let[i,a]=(0,r.useState)(()=>{let t=l.getItem(e);return t?JSON.parse(t):n.current}),d=(0,r.useCallback)(t=>{a(void 0!==t?t:n.current),void 0===t?l.removeItem(e):l.setItem(e,JSON.stringify(t)),document.dispatchEvent(new o(e,t))},[e]),c=(0,r.useCallback)(e=>{n.current=e},[n]);return(0,r.useEffect)(()=>{function t(t){if(t.storageKey===e){let e=t.storageValue;a(void 0!==e?e:n.current)}}document.addEventListener(s,t);let i=l.getItem(e);return i?a(JSON.parse(i)):a(n.current),()=>{document.removeEventListener(s,t)}},[e]),[i,d,c]}function c(e){let t=l.getKeys(),n=[];for(let i in t)t[i]?.startsWith(e)&&n.push(t[i]);return n}function u(e){for(let t of e)l.removeItem(t),document.dispatchEvent(new o(t,void 0))}function m(e){let t=[];for(let n of c(e)){let e=l.getItem(n);null!=e&&t.push(JSON.parse(e))}return t}function h(e){u(c(e))}},65591:(e,t,n)=>{"use strict";n.d(t,{vp:()=>r.v,hf:()=>o,CK:()=>d});var i=n(88431),a=n(96540),r=n(35822);let l=e=>e;function s(e,t){return({additionalScrollOffset:n=0,scrollToFn:r,horizontal:l,parentRef:s,shouldUseScrollRef:o=!0,...d})=>{(0,a.useDebugValue)(t);let c=(0,a.useRef)(window),u=(0,a.useCallback)(()=>{let e=s.current?.getBoundingClientRect(),t=e?.top??0,n=e?.left??0;return l?-1*n:-1*t},[l,s]),m=(0,a.useCallback)(e=>{let t=e+((s.current?.getBoundingClientRect().top??0)+window.scrollY)+n;c.current?.scroll({top:l?0:t,left:l?t:0})},[n,l,s]);return e({...d,horizontal:l,parentRef:s,scrollToFn:r||m,onScrollElement:o?c:void 0,scrollOffsetFn:u,useObserver:()=>(function(e){let[t,n]=(0,a.useState)({height:0,width:0}),r=e.current;return(0,i.N)(()=>{if(!r)return;let e=()=>{let e={height:r.innerHeight,width:r.innerWidth};n(t=>t.height!==e.height||t.width!==e.width?e:t)};return e(),r.addEventListener("resize",e),()=>{r.removeEventListener("resize",e)}},[r]),t})(c)})}}let o=s(r.z,"useVirtualWindow"),d=s(function(e){let t=a.useRef({}),n=a.useRef({}),i=(e,n)=>{t.current[e](n)},s=a.useRef(i);s.current=i;let o=a.useRef(new ResizeObserver(e=>{for(let t of e){let e=t.target,n="data-key",i=e.getAttribute(n);if(null===i)throw Error(`Value not found, for '${n}' attribute`);s.current(i,e)}}));a.useEffect(()=>{let e=o.current;return()=>{e.disconnect()}},[]);let{size:d,keyExtractor:c=l}=e,u=a.useMemo(()=>{let e=e=>t=>{n.current[e]&&o.current.unobserve(n.current[e]),t&&(s.current(e,t),o.current.observe(t)),n.current[e]=t},t={};for(let n=0;n<d;n++){let i=c(n);t[i]=e(i)}return t},[d,c]),m=(0,r.z)(e),h=m.virtualItems.map(e=>(t.current[e.key]=e.measureRef,{...e,measureRef:u[e.key]}));return{...m,virtualItems:h}},"useVirtualWindowDynamic")},40058:(e,t,n)=>{"use strict";n.d(t,{T:()=>j});var i=n(74848),a=n(21728),r=n(77430),l=n(38621),s=n(5945),o=n(24815),d=n(46309),c=n(12004),u=n(69410),m=n(52446),h=n(96540),f=n(23470);let p=h.memo(function(e){let t,n,l,s,o,d=(0,a.c)(19),{user:c,isCurrent:u,onSelect:h,shouldSetAsDiv:f,count:p,position:g}=e,y=f?"div":"li";d[0]!==h||d[1]!==c?(t=()=>{h&&h(c)},d[0]=h,d[1]=c,d[2]=t):t=d[2];let x=g+1,b=c.primaryAvatarUrl;return d[3]!==c.path?(n=c.path.startsWith("/apps/"),d[3]=c.path,d[4]=n):n=d[4],d[5]!==n||d[6]!==c.primaryAvatarUrl?(l=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(r.r,{src:b,square:n})}),d[5]=n,d[6]=c.primaryAvatarUrl,d[7]=l):l=d[7],d[8]!==c.name?(s=(0,i.jsx)(m.l.Description,{truncate:!0,children:c.name}),d[8]=c.name,d[9]=s):s=d[9],d[10]!==p||d[11]!==u||d[12]!==y||d[13]!==t||d[14]!==x||d[15]!==l||d[16]!==s||d[17]!==c.login?(o=(0,i.jsxs)(m.l.Item,{as:y,selected:u,onSelect:t,"aria-setsize":p,"aria-posinset":x,children:[l,c.login,s]}),d[10]=p,d[11]=u,d[12]=y,d[13]=t,d[14]=x,d[15]=l,d[16]=s,d[17]=c.login,d[18]=o):o=d[18],o});try{p.displayName||(p.displayName="UserItem")}catch{}let g={scrollableUserList:"UsersList-module__scrollableUserList--v1HiT"};function y(e){let t,n=(0,a.c)(2);return n[0]!==e?(t=e.users.length>20?(0,i.jsx)(b,{...e}):(0,i.jsx)(x,{...e}),n[0]=e,n[1]=t):t=n[1],t}function x(e){let t,n,r=(0,a.c)(11),{users:l,currentUser:s,onSelect:o,style:d}=e;if(r[0]!==s?.login||r[1]!==o||r[2]!==l){let e;r[4]!==s?.login||r[5]!==o||r[6]!==l.length?(e=(e,t)=>(0,i.jsx)(p,{user:e,isCurrent:e.login===s?.login,onSelect:o,count:l.length,position:t},e.login),r[4]=s?.login,r[5]=o,r[6]=l.length,r[7]=e):e=r[7],t=l.map(e),r[0]=s?.login,r[1]=o,r[2]=l,r[3]=t}else t=r[3];return r[8]!==d||r[9]!==t?(n=(0,i.jsx)(m.l,{role:"menu",style:d,className:g.scrollableUserList,selectionVariant:"single",children:t}),r[8]=d,r[9]=t,r[10]=n):n=r[10],n}function b(e){let t,n,r=(0,a.c)(8),{users:l,currentUser:s,onSelect:o,style:d}=e;return r[0]!==s?.login||r[1]!==o||r[2]!==l.length?(t=(e,t)=>(0,i.jsx)(p,{user:e,isCurrent:e.login===s?.login,onSelect:o,shouldSetAsDiv:!0,count:l.length,position:t},e.login),r[0]=s?.login,r[1]=o,r[2]=l.length,r[3]=t):t=r[3],r[4]!==d||r[5]!==t||r[6]!==l?(n=(0,i.jsx)(f.F,{items:l,itemHeight:33,style:d,makeKey:C,shouldUseActionList:!0,renderItem:t,className:g.scrollableUserList}),r[4]=d,r[5]=t,r[6]=l,r[7]=n):n=r[7],n}function C(e){return e.login}try{y.displayName||(y.displayName="UsersList")}catch{}try{x.displayName||(x.displayName="FullUsersList")}catch{}try{b.displayName||(b.displayName="VirtualUsersList")}catch{}var v=n(4559);let N={truncatedUserText:"UserSelector-module__truncatedUserText--hOMue",userSearchInput:"UserSelector-module__userSearchInput--J_Pgo",filterResultItem:"UserSelector-module__filterResultItem--JqRZP"};function j(e){var t,n;let o,d,c,u,m,f,p,g,x,b,C,j,L,I,D,T=(0,a.c)(52),{defaultText:R,usersState:A,currentUser:F,onSelect:M,hotKey:O,onOpenChange:$,renderCustomFooter:P,size:B,showTypedInUser:U,width:H,label:z}=e,K=void 0!==U&&U,V=void 0===H?"large":H,G=void 0===z?"":z,[q,W]=(0,h.useState)("");T[0]!==q||T[1]!==K||T[2]!==A.users?(o=function(e,t){if(!e)return[];let n=t.trim().toLowerCase();return n?e.filter(e=>e.login.toLowerCase().includes(n)||e.name?.toLowerCase().includes(n)):e}(A.users,q),d=K&&(t=q,n=o,!!t&&(0===n.length||n.length>1||1===n.length&&!!n[0]&&n[0].login.toLowerCase()!==t.toLowerCase())),T[0]=q,T[1]=K,T[2]=A.users,T[3]=o,T[4]=d):(o=T[3],d=T[4]);let Q=d,X=0===o.length&&!Q,Y=!A.loading&&!A.error&&X;return T[5]!==Y?(c=()=>{Y&&(0,v.i)("Nothing to show")},T[5]=Y,T[6]=c):c=T[6],T[7]!==Y||T[8]!==q?(u=[Y,q],T[7]=Y,T[8]=q,T[9]=u):u=T[9],(0,h.useEffect)(c,u),T[10]!==Y||T[11]!==$?(m=e=>{$&&$(e),Y&&(0,v.i)("Nothing to show")},T[10]=Y,T[11]=$,T[12]=m):m=T[12],T[13]!==F?(f=(0,i.jsx)("div",{className:"mr-2",children:F?(0,i.jsx)(r.r,{size:16,src:F.primaryAvatarUrl,square:F.path.startsWith("/apps/")}):(0,i.jsx)(l.PeopleIcon,{size:"small",className:"fgColor-muted"})}),T[13]=F,T[14]=f):f=T[14],T[15]!==F||T[16]!==R||T[17]!==G?(p=(0,i.jsx)("div",{className:N.truncatedUserText,children:F?(0,i.jsxs)("span",{children:[G,F.login]}):(0,i.jsx)("span",{children:R})}),T[15]=F,T[16]=R,T[17]=G,T[18]=p):p=T[18],T[19]!==f||T[20]!==p?(g=(0,i.jsxs)("div",{className:"d-flex",children:[f,p]}),T[19]=f,T[20]=p,T[21]=g):g=T[21],T[22]!==O||T[23]!==B||T[24]!==g?(x=(0,i.jsx)(s.W.Button,{"data-hotkey":O,size:B,"data-testid":"user-selector-button",children:g}),T[22]=O,T[23]=B,T[24]=g,T[25]=x):x=T[25],T[26]!==q?(b=(0,i.jsx)(_,{defaultText:q,onFilterChange:W}),T[26]=q,T[27]=b):b=T[27],T[28]!==q||T[29]!==M||T[30]!==Q||T[31]!==X||T[32]!==A.error||T[33]!==A.loading?(C=A.loading?(0,i.jsx)(w,{}):A.error?(0,i.jsx)(k,{}):(0,i.jsxs)(i.Fragment,{children:[X&&(0,i.jsx)(S,{}),Q&&(0,i.jsx)(E,{filterText:q,onSelect:M})]}),T[28]=q,T[29]=M,T[30]=Q,T[31]=X,T[32]=A.error,T[33]=A.loading,T[34]=C):C=T[34],T[35]!==F||T[36]!==o||T[37]!==M||T[38]!==P?(j=o.length>0&&(0,i.jsx)(y,{users:o,currentUser:F,onSelect:M,style:P?{paddingBottom:"10px",paddingTop:"4px"}:{paddingTop:"4px"}}),T[35]=F,T[36]=o,T[37]=M,T[38]=P,T[39]=j):j=T[39],T[40]!==P?(L=P?.(),T[40]=P,T[41]=L):L=T[41],T[42]!==b||T[43]!==C||T[44]!==j||T[45]!==L||T[46]!==V?(I=(0,i.jsxs)(s.W.Overlay,{width:V,children:[b,C,j,L]}),T[42]=b,T[43]=C,T[44]=j,T[45]=L,T[46]=V,T[47]=I):I=T[47],T[48]!==x||T[49]!==I||T[50]!==m?(D=(0,i.jsx)("div",{children:(0,i.jsxs)(s.W,{onOpenChange:m,children:[x,I]})}),T[48]=x,T[49]=I,T[50]=m,T[51]=D):D=T[51],D}function _(e){let t,n,r=(0,a.c)(5),{onFilterChange:s,defaultText:d}=e;return r[0]!==s?(t=e=>s(e.target.value),r[0]=s,r[1]=t):t=r[1],r[2]!==d||r[3]!==t?(n=(0,i.jsx)("div",{className:"p-2 border-bottom border-color-border-default",children:(0,i.jsx)(o.A,{leadingVisual:l.SearchIcon,value:d,placeholder:"Find a user...",onChange:t,className:N.userSearchInput})}),r[2]=d,r[3]=t,r[4]=n):n=r[4],n}function w(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(d.B,{justify:"center",className:"p-2",children:(0,i.jsx)(c.A,{size:"medium",srText:"Loading users..."})}),t[0]=e):e=t[0],e}function k(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(u.A,{variant:"danger",children:"Could not load users"}),t[0]=e):e=t[0],e}function S(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(d.B,{justify:"center",className:"p-3",children:"Nothing to show"}),t[0]=e):e=t[0],e}function E(e){let t,n,r,l=(0,a.c)(8),{filterText:s,onSelect:o}=e;return l[0]!==s||l[1]!==o?(t=()=>{o&&o({login:s,name:s,path:"",primaryAvatarUrl:""})},l[0]=s,l[1]=o,l[2]=t):t=l[2],l[3]!==s?(n=(0,i.jsxs)(i.Fragment,{children:["Filter on author\xa0",(0,i.jsx)("span",{className:"text-bold",children:s})]}),l[3]=s,l[4]=n):n=l[4],l[5]!==t||l[6]!==n?(r=(0,i.jsx)(m.l.Item,{role:"none",onSelect:t,className:N.filterResultItem,children:n}),l[5]=t,l[6]=n,l[7]=r):r=l[7],r}try{j.displayName||(j.displayName="UserSelector")}catch{}try{_.displayName||(_.displayName="UserFilter")}catch{}try{w.displayName||(w.displayName="Loading")}catch{}try{k.displayName||(k.displayName="LoadingFailed")}catch{}try{S.displayName||(S.displayName="UsersZeroState")}catch{}try{E.displayName||(E.displayName="UsersTypedInUser")}catch{}},60912:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var i=n(74848),a=n(34164);let r={reason:"readonly-comment-box-module__reason--QIvzf"},l={ReadonlyCommentBoxContainer:"ReadonlyCommentBox-module__ReadonlyCommentBoxContainer--qNC85",centeredContent:"ReadonlyCommentBox-module__centeredContent--bVUCp"};function s({reason:e,icon:t,...n}){return(0,i.jsx)("div",{className:(0,a.$)("blankslate",l.ReadonlyCommentBoxContainer),...n,children:(0,i.jsxs)("div",{className:l.centeredContent,children:[t&&(0,i.jsx)(t,{size:24}),(0,i.jsx)("div",{className:r.reason,children:e})]})})}try{s.displayName||(s.displayName="ReadonlyCommentBox")}catch{}},42257:(e,t,n)=>{"use strict";n.d(t,{d:()=>l});var i=n(74848),a=n(99896);let r={ChecksStatusBadge:"AsyncChecksStatusBadge-module__ChecksStatusBadge--Ddd3K"};function l({status:e,oid:t,repo:n,badgeProps:l={},descriptionString:s=""}){let[o,d]=(0,a.ym)(t,n);return e?(0,i.jsx)(a.B6,{disablePopover:!1,size:"small",statusRollup:e,combinedStatus:o,descriptionText:s,onWillOpenPopup:d,buttonClassName:r.ChecksStatusBadge,...l}):null}try{l.displayName||(l.displayName="AsyncChecksStatusBadge")}catch{}},1117:(e,t,n)=>{"use strict";n.d(t,{N:()=>en,$:()=>ei});var i=n(74848),a=n(96540),r=n(96760),l=n(78314),s=n(35898),o=n(71315),d=n(38621),c=n(69410),u=n(55847),m=n(90352),h=n(34164),f=n(21935),p=n(83878);let g={"commit-discussion-comments":"Comment-module__commit-discussion-comments--GlkCu","discussion-comments-rose":"Comment-module__discussion-comments-rose--JwtpK"};var y=n(24967),x=n(81945);let b=()=>(0,i.jsx)("div",{className:"d-flex gap-2",children:(0,i.jsx)("div",{className:"flex-1 border overflow-x-auto rounded-2 borderColor-muted color-shadow-small",children:(0,i.jsxs)("div",{className:"d-flex flex-column gap-2 m-3",children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,i.jsx)(x.O,{variant:"elliptical",height:"xl",width:"xl"}),(0,i.jsx)(x.O,{variant:"rounded",height:"sm",width:"150px"})]}),[void 0,void 0].map((e,t)=>(0,i.jsx)(x.O,{variant:"rounded",height:"sm",width:"random"},t)),(0,i.jsx)(y.e,{})]})})});try{b.displayName||(b.displayName="CommentLoading")}catch{}var C=n(26156),v=n(71073),N=n(23656),j=n(21086),_=n(38829),w=n(26076),k=n(19805),S=n(30617),E=n(49245),L=n(68534),I=n(8046),D=n(81034),T=n(88431);let R=(0,a.forwardRef)(({initialMarkdown:e,onCancel:t,onSave:n,referenceId:r,buttonText:l,commentContent:s},o)=>{let[d,c]=(0,a.useState)(!1),u=(0,a.useRef)(null),m=(0,a.useRef)(void 0),{commentBoxSubject:h}=(0,S.X)(),f=(0,a.useCallback)(()=>{},[]),{markdownBody:p,resetMarkdownBody:g,markdownValidationResult:y,handleMarkdownBodyChanged:x}=(0,D.x)({commentBoxRef:u,markdownComposerRef:o,onChange:f,onCancel:()=>{},referenceId:r});(0,a.useEffect)(()=>{e&&!p&&x(e)},[e]),(0,a.useEffect)(()=>{if(s&&m.current!==s){x(s),m.current=s;let e=window.setTimeout(()=>{u.current&&(u.current?.scrollIntoView(),u.current?.focus())},0);return()=>{window.clearTimeout(e)}}},[s]),(0,T.N)(()=>{if(u&&u.current){let e=window.setTimeout(()=>{u.current?.focus()},0);return()=>{window.clearTimeout(e)}}},[u]);let b=async()=>{c(!0),await n(p,g),c(!1)};return(0,i.jsx)(I.hF,{ref:u,validationResult:y,disabled:d,onChange:e=>{x(e)},onCancel:()=>{x(""),t?.()},onSave:b,saveButtonText:l,saveButtonTrailingIcon:!1,value:p,teamHovercardsEnabled:!0,fileUploadsEnabled:!0,subject:h})});function A({comment:e,commitOid:t,onCancel:n,onUpdate:r}){let{editComment:l}=(0,S.X)(),s=(0,a.useRef)(null),o=async t=>{let n=await l(t,e);n.updatedFields&&r({...e,...n.updatedFields})};return(0,i.jsx)(R,{commitOid:t,initialMarkdown:e.body,ref:s,onSave:o,onCancel:n,referenceId:`${t}-${e.id}`,buttonText:"Update comment"})}R.displayName="CommitCommentEditor";try{A.displayName||(A.displayName="UpdateCommitComment")}catch{}function F({comments:e,commit:t,locked:n,deleteComment:a,updateComment:r,setNewCommentContent:l,repoOwnerGlobalRelayId:s}){return 0===e.length?null:(0,i.jsx)("div",{className:"d-flex flex-column gap-3",children:e.map(e=>(0,i.jsx)(M,{comment:e,commit:t,locked:n,deleteComment:a,updateComment:r,setNewCommentContent:l,repoOwnerGlobalRelayId:s},e.id))})}function M({comment:e,commit:t,locked:n,deleteComment:r,updateComment:s,setNewCommentContent:o,repoOwnerGlobalRelayId:d}){let c=(0,l.t)(),[u,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(e.isHidden),p=(0,a.useRef)(null),{deleteComment:g,hideComment:x,unhideComment:b}=(0,S.X)(),C=async()=>{let t=await g(e.id.toString());"canceled"!==t&&"error"!==t&&"success"===t&&r(e.id)},v=async t=>{let n=await x(e.id.toString(),t);"error"!==n&&"success"===n&&(s({...e,isHidden:!0,minimizedReason:t}),f(!0))},N=async()=>{let t=await b(e.id.toString());"error"!==t&&"success"===t&&(s({...e,isHidden:!1,minimizedReason:null}),f(!1))},j=t.authors.length>0?t.authors[0]?.login:"",_={...(0,E.p)(e,t,c,d),referenceText:(0,L.F)(t.oid)};return(0,i.jsxs)("div",{className:"border rounded-2",ref:p,id:e.urlFragment,tabIndex:-1,children:[(0,i.jsx)(O,{comment:_,commentAuthorLogin:e.author.login,commentSubjectAuthorLogin:j,commentSubjectType:"commit",avatarUrl:e.author.avatarUrl,isMinimized:h,editComment:()=>{m(!0)},onReplySelect:o,onMinimize:f,navigate:()=>{},hideComment:v,unhideComment:N,deleteComment:C,commentRef:p,showEditHistory:e.viewerCanReadUserContentEdits&&!!e.lastUserContentEdit,commitComment:e}),h?null:u?(0,i.jsx)("div",{className:"m-2",children:(0,i.jsx)(A,{comment:e,commitOid:t.oid,onUpdate:e=>{s(e),m(!1)},onCancel:()=>m(!1)})}):(0,i.jsxs)("div",{className:"d-flex flex-column m-3 gap-3",style:{gap:"12px"},children:[(0,i.jsx)("div",{className:"markdown-body","data-turbolinks":"false",children:(0,i.jsx)(w.G,{disabled:!1,verifiedHTML:e.htmlBody,markdownValue:e.body,onChange:()=>{},onLinkClick:()=>{},teamHovercardsEnabled:!0})}),(0,i.jsx)(a.Suspense,{fallback:(0,i.jsx)(y.e,{}),children:(0,i.jsx)(k.ReactionViewerRelayQueryComponent,{id:e.relayId,subjectLocked:n})})]})]})}function O({hideActions:e,...t}){let n,r,l=t.commitComment;return t.showEditHistory&&(n=(0,i.jsx)(a.Suspense,{fallback:null,children:(0,i.jsx)($,{id:l.relayId})}),r=(0,i.jsx)(P,{id:t.comment.id})),(0,i.jsx)(C.v,{lastEditedByMessage:r,editHistoryComponent:n,forceInlineAvatar:!0,...t,actions:e?void 0:(0,i.jsx)(v.p,{onSuccessfulBlock:()=>{setTimeout(()=>o.cg?.location.reload(),800)},...t})})}function $({id:e}){let t=(0,_.f)({id:e});return t?(0,i.jsx)(N.W,{editHistory:t}):null}function P({id:e}){let t=(0,_.f)({id:e});return t?(0,i.jsx)(j._,{editInformation:t}):null}try{F.displayName||(F.displayName="ExistingCommitComments")}catch{}try{M.displayName||(M.displayName="ExistingCommitComment")}catch{}try{O.displayName||(O.displayName="CommitCommentHeader")}catch{}try{$.displayName||($.displayName="CommitCommentHeaderEditHistory")}catch{}try{P.displayName||(P.displayName="CommitCommentHeaderLastEditedBy")}catch{}var B=n(25407),U=n(79634),H=n(96379),z=n(96665);function K({commitOid:e,locked:t,onClose:n}){let r=(0,l.t)(),{helpUrl:s}=(0,U.X)(),[o,d]=(0,a.useState)(!1),u=t?"Unlock":"Lock",m=async()=>{(await (0,H.DI)(`${(0,B.$Qz)({owner:r.ownerLogin,repo:r.name,commitish:e})}/lock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?n(!0):d(!0)},h=async()=>{(await (0,H.lS)(`${(0,B.$Qz)({owner:r.ownerLogin,repo:r.name,commitish:e})}/unlock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?n(!1):d(!0)};return(0,i.jsxs)(z.l,{onClose:()=>n(),width:"large",title:`${u} conversation on this commit`,footerButtons:[{content:`${u} conversation`,buttonType:"danger",sx:{width:"100%"},onClick:t?h:m}],children:[o&&(0,i.jsxs)(c.A,{className:"mb-2",variant:"danger",children:["There was an error ",u.toLocaleLowerCase(),"ing this conversation. Please try again."]}),(0,i.jsxs)("p",{children:[u,"ing the conversation means:"]}),(0,i.jsx)("ul",{className:"ml-4",children:t?(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Everyone"})," will be able to comment on this commit once more."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("li",{children:["Other users ",(0,i.jsx)("strong",{children:"can\u2019t add new comments"})," to this commit."]}),r.isOrgOwned?(0,i.jsxs)("li",{children:["You and other members of teams with"," ",(0,i.jsx)("a",{href:`${s}/get-started/learning-about-github/access-permissions-on-github`,children:"write access"})," ","to this repository ",(0,i.jsx)("strong",{children:"can still leave comments"})," that others can see."]}):(0,i.jsxs)("li",{children:["You and other collaborators"," ",(0,i.jsx)("a",{href:`${s}/get-started/learning-about-github/access-permissions-on-github`,children:"with access"})," to this repository ",(0,i.jsx)("strong",{children:"can still leave comments"})," that others can see."]})]})}),(0,i.jsxs)("p",{className:"mb-0 mt-2",children:["You can always ",t?"lock":"unlock"," this commit again in the future."]})]})}try{K.displayName||(K.displayName="LockConversationDialog")}catch{}var V=n(21067),G=n(60912),q=n(61423),W=n(11738),Q=n(81156),X=n(77430);function Y({commitOid:e,onAddComment:t,onExpandCommentEditor:n,newCommentContent:r,canComment:l,locked:s,repoArchived:c,avatarURL:u}){let m=(0,V.M3)(),{addComment:h}=(0,S.X)(),f=(0,a.useRef)(null),p=async(e,n)=>{let i=await h(e);i.comment&&(t(i.comment),n())},g=(0,q.i)(c,s,m?void 0:(0,i.jsx)(Z,{redirectUrl:o.fV?.href}),"commit");return(0,i.jsx)("div",{className:"d-flex flex-column gap-2 pt-3",children:l?(0,i.jsx)(J,{commitOid:e,commentEditor:f,onExpandEditor:n,onSave:p,newCommentContent:r,avatarURL:u||Q.t.ghostUser.avatarUrl}):(0,i.jsx)(G.P,{icon:d.LockIcon,reason:g})})}function J(e){let[t,n]=(0,a.useState)(()=>void 0!==e.newCommentContent),[l,s]=(0,a.useState)(e.newCommentContent);t||void 0===e.newCommentContent||l===e.newCommentContent||(n(!0),s(e.newCommentContent));let o="Comment";return t?(0,i.jsx)("div",{id:r.Bq.issueCommentComposer,children:(0,i.jsx)(R,{commitOid:e.commitOid,ref:e.commentEditor,onSave:e.onSave,referenceId:`new-discussion-comment-${e.commitOid}`,commentContent:e.newCommentContent,initialMarkdown:e.newCommentContent,buttonText:o,onCancel:()=>{n(!1)}})}):(0,i.jsxs)("div",{id:r.Bq.issueCommentComposer,className:"d-flex flex-items-center border rounded-2 p-2 gap-2 color-bg-subtle",children:[(0,i.jsx)(X.r,{src:e.avatarURL,size:20}),(0,i.jsx)(W.z,{onClick:()=>{n(!0),e.onExpandEditor?.()},children:o})]})}function Z({redirectUrl:e}){return(0,i.jsxs)("span",{children:["Please ",(0,i.jsx)("a",{href:e?`/login?return_to=${e}`:"/login",children:"sign in"})," to comment."]})}try{Y.displayName||(Y.displayName="NewCommitComment")}catch{}try{J.displayName||(J.displayName="CompactEditor")}catch{}try{Z.displayName||(Z.displayName="LoggedOutMessage")}catch{}var ee=n(10925);let et=(0,a.forwardRef)(({commitOid:e,subscribed:t},n)=>{let r,[s,o]=(0,a.useState)(t),[c,m]=(0,a.useState)(!1),h=(0,l.t)(),f=(0,ee.H)("/notifications/thread","post");r=c?`You're now ${s?"subscribed":"unsubscribed"} to this thread.`:s?"You're receiving notifications because you're subscribed to this thread.":"You're not receiving notifications from this thread.";let p=async()=>{let t=new FormData;t.append("repository_id",h.id.toString()),t.append("thread_id",e),t.append("thread_class","Commit"),t.append("id",s?"unsubscribe":"subscribe"),t.append("authenticity_token",f??""),(await (0,H.DI)("/notifications/thread",{method:"POST",body:t})).ok&&(o(!s),m(!0))};return(0,i.jsxs)("div",{className:"d-flex flex-items-center border rounded-2 p-2 gap-2",ref:n,children:[(0,i.jsx)(u.Q,{onClick:p,size:"small",leadingVisual:s?d.BellSlashIcon:d.BellIcon,children:s?"Unsubscribe":"Subscribe"}),(0,i.jsx)("p",{role:"status",className:"f6 fgColor-muted mb-0",children:r})]})});et.displayName="NotificationsFooter";let en="comments";function ei(e){return(0,i.jsx)("div",{className:(0,h.$)("d-flex flex-column gap-2 pt-3",r.mU.commentsContainer,g["commit-discussion-comments"]),id:en,children:(0,a.createElement)(ea,{...e,key:e.commit.oid})})}function ea({commit:e,commentInfo:t,repoOwnerGlobalRelayId:n}){let r=(0,l.t)(),d=(0,s.i)(),{retry:m,loadMore:h,canLoadMore:y,addComment:x,deleteComment:C,updateComment:v,count:N,comments:j,subscribed:_,providerState:w}=(0,f.y)(),[k,S]=(0,a.useState)(void 0),[E,L]=(0,a.useState)(t.locked),I=(0,a.useMemo)(()=>(0,p.N)(e.oid,r.id),[e.oid,r.id]),D=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(o.cg?.location.hash){let e=o.cg.location.hash.slice(1);if(j.find(t=>t.urlFragment===e)){let t=document.getElementById(e);t&&(t.scrollIntoView(),t.focus())}}},[j]);let T=(0,a.useCallback)(()=>{setTimeout(()=>D.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),0)},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er,{commitOid:e.oid,commentCount:N,canLock:t.canLock,locked:E,setLocked:L}),"loading"===w&&(0,i.jsx)(b,{}),"error"===w&&(0,i.jsxs)(c.A,{className:"d-flex flex-justify-between flex-items-center",variant:"danger",children:[(0,i.jsx)("span",{children:"Failed to load comments."}),(0,i.jsx)(u.Q,{onClick:()=>m(),children:"Retry"})]}),"loaded"===w&&y&&(0,i.jsx)(u.Q,{className:"width-full",onClick:()=>h(),children:"Load more comments"}),(0,i.jsx)(F,{comments:j,commit:e,locked:E,repoOwnerGlobalRelayId:n,deleteComment:C,updateComment:v,setNewCommentContent:S}),I?(0,i.jsx)("div",{className:"text-center",children:[...Array(38)].map((e,t)=>(0,i.jsx)("img",{alt:"rose",src:"/images/icons/emoji/rose.png",className:g["discussion-comments-rose"]},`rose-${t}`))}):null,"loaded"===w||0!==j.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y,{commitOid:e.oid,onAddComment:x,onExpandCommentEditor:T,newCommentContent:k,canComment:t.canComment,locked:E,repoArchived:t.repoArchived,avatarURL:d?.avatarURL}),d?(0,i.jsx)(et,{ref:D,commitOid:e.oid,subscribed:_??!1}):null]}):null]})}function er({commitOid:e,commentCount:t,locked:n,setLocked:r,canLock:l}){let[s,o]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between",children:[(0,i.jsxs)("h2",{className:"sr-only",children:[t," commit comments"]}),(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)("div",{className:"h4 pr-2",children:"Comments"}),void 0!==t&&(0,i.jsx)(m.A,{children:t})]}),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Q,{leadingVisual:n?d.KeyIcon:d.LockIcon,variant:"invisible",onClick:()=>o(!0),children:[n?"Unlock":"Lock"," conversation"]}),s&&(0,i.jsx)(K,{commitOid:e,locked:n,onClose:e=>{o(!1),void 0!==e&&r(e)}})]})]})}try{ei.displayName||(ei.displayName="DiscussionComments")}catch{}try{ea.displayName||(ea.displayName="DiscussionCommentsInternal")}catch{}try{er.displayName||(er.displayName="DiscussionCommentsHeader")}catch{}},48926:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,j:()=>d});var i=n(74848),a=n(61200),r=n(81945),l=n(54571),s=n(89169),o=n(4095);function d({commit:e,repo:t,children:n,settings:d,textVariant:c}){let u=(0,o.NO)(e.oid),[m]=(0,l.I)(()=>!1,!0,[]);return(0,i.jsxs)(a.jF,{authors:e.authors,committer:e.committer,committerAttribution:e.committerAttribution,onBehalfOf:u?.onBehalfOf,repo:t,includeVerbs:!0,authorSettings:{fontWeight:"normal",fontColor:"fg.muted",avatarSize:16,...d},textVariant:c,children:[!m&&(0,i.jsx)(s.A,{className:"pl-1",datetime:e.committedDate}),m&&(0,i.jsx)(r.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),n]})}function c({commit:e,repo:t,textVariant:n}){let[o]=(0,l.I)(()=>!1,!0,[]);return(0,i.jsxs)(a.Cf,{pusher:e.pusher,repo:t,textVariant:n,children:[!o&&(0,i.jsx)(s.A,{className:"pl-1",datetime:e.pushedDate}),o&&(0,i.jsx)(r.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"})]})}try{d.displayName||(d.displayName="CommitAttribution")}catch{}try{c.displayName||(c.displayName="PushAttribution")}catch{}},89830:(e,t,n)=>{"use strict";n.d(t,{s:()=>h});var i=n(74848),a=n(38621),r=n(98130),l=n(63557),s=n(30729),o=n(34164);let d={timelineRowItem:"TimelineRow-module__timelineRowItem--EN_EF",timelineRowBadge:"TimelineRow-module__timelineRowBadge--Lyy1u",bottom:"TimelineRow-module__bottom--UHzX3",top:"TimelineRow-module__top--l0ZlZ"},c=()=>(0,i.jsx)(s.A,{icon:a.GitCommitIcon});function u({children:e,leadingVisual:t,clipTimeline:n="none",className:a}){return(0,i.jsxs)(r.A.Item,{className:(0,o.$)(a,d.timelineRowItem,"none"!==n&&d[n]),children:[(0,i.jsx)(r.A.Badge,{className:d.timelineRowBadge,children:t??(0,i.jsx)(c,{})}),(0,i.jsx)(r.A.Body,{className:"mt-0",children:e})]})}function m({title:e,as:t,...n}){return(0,i.jsx)(l.A,{as:t,className:"text-normal f5 py-1",...n,children:e})}let h=Object.assign(u,{Heading:m});try{c.displayName||(c.displayName="DefaultLeadingVisual")}catch{}try{u.displayName||(u.displayName="TimelineRowComponent")}catch{}try{m.displayName||(m.displayName="TimelineRowHeading")}catch{}try{h.displayName||(h.displayName="TimelineRow")}catch{}},43147:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var i=n(74848),a=n(98755),r=n(30459),l=n(16790),s=n(68534);function o({sha:e,direction:t="s"}){let{sendAnalyticsEvent:n}=(0,r.s)(),{loggingPrefix:o,loggingPayload:d}=(0,l.xe)(),c=(0,l.eX)();return(0,i.jsx)("div",{onClick:()=>{c&&n(`${o}click`,"COPY_SHA_CLICKED",d)},children:(0,i.jsx)(a.T,{textToCopy:e,ariaLabel:`Copy full SHA for ${(0,s.F)(e)}`,tooltipProps:{direction:t},size:"small"})})}try{o.displayName||(o.displayName="CopySHA")}catch{}},76214:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(74848),a=n(34164);function r({children:e,className:t=""}){return(0,i.jsx)("div",{className:(0,a.$)("color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",t),children:e})}try{r.displayName||(r.displayName="Panel")}catch{}},16790:(e,t,n)=>{"use strict";n.d(t,{eX:()=>s,xe:()=>o,zq:()=>l});var i=n(74848),a=n(96540);let r=(0,a.createContext)({loggingPayload:void 0,loggingPrefix:void 0});function l({children:e,loggingInfo:t}){return(0,i.jsx)(r.Provider,{value:t,children:e})}function s(){let e=(0,a.useContext)(r);return void 0!==e.loggingPayload&&void 0!==e.loggingPrefix}function o(){return(0,a.useContext)(r)}try{r.displayName||(r.displayName="CommitsLoggingContext")}catch{}try{l.displayName||(l.displayName="CommitsLoggingInfoProvider")}catch{}},4095:(e,t,n)=>{"use strict";n.d(t,{M2:()=>o,NO:()=>d,UI:()=>r,Xx:()=>l,ej:()=>u,xs:()=>c});var i=n(74848),a=n(96540);let r={deferredCommits:[],renameHistory:null,loading:!0},l={deferredCommits:[],renameHistory:null,loading:!1},s=(0,a.createContext)(r);function o({children:e,deferredData:t}){return(0,i.jsx)(s.Provider,{value:t,children:e})}function d(e){let t=(0,a.useContext)(s),n=t.error,i=t.deferredCommits?.find(t=>t?.oid===e);return n&&void 0===i&&(i={oid:e,statusCheckStatus:void 0}),i}function c(){return(0,a.useContext)(s).loading}function u(){return(0,a.useContext)(s).renameHistory}try{s.displayName||(s.displayName="DeferredCommitDataContext")}catch{}try{o.displayName||(o.displayName="DeferredCommitDataProvider")}catch{}},21935:(e,t,n)=>{"use strict";n.d(t,{c:()=>c,y:()=>u});var i,a=n(74848),r=n(73189),l=n(25407),s=n(96379),o=n(96540);let d=(0,o.createContext)({comments:[],addComment:r.l,deleteComment:r.l,updateComment:r.l,loadMore:r.l,retry:r.l,canLoadMore:!1,count:0,subscribed:!1,providerState:"initial"});function c({children:e,comments:t=[],commentCount:n=0,canLoadMore:i=!1,subscribed:r=!1,providerState:c="initial",repo:u,commitOid:m}){let[h,f]=(0,o.useState)(t),[p,g]=(0,o.useState)(n),[y,x]=(0,o.useState)(i),[b,C]=(0,o.useState)(c),[v,N]=(0,o.useState)(r);(0,o.useEffect)(()=>{g(n),f(t),x(i),N(r),C(c)},[c]);let j=(0,o.useCallback)(async e=>{C("loading");let t=await (0,s.Sr)((0,l.Mo3)({owner:u.ownerLogin,repo:u.name,commitOid:m,beforeCommentId:e}));if(t.ok){let n=await t.json();e?f(e=>[...n.comments,...e]):f(n.comments),C("loaded"),g(n.count),N(n.subscribed),x(n.canLoadMore)}else C("error")},[u.ownerLogin,u.name,m]),_=(0,o.useCallback)(()=>{let e=h[0];e&&y&&j(e.id.toString())},[y,h,j]),w=(0,o.useCallback)(e=>{f([...h,e]),g((p??0)+1)},[h,p]),k=(0,o.useCallback)(e=>{f(h.filter(t=>t.id!==e)),g((p??0)-1)},[h,p]),S=(0,o.useCallback)(e=>{f(h.map(t=>t.id===e.id?e:t))},[h]),E=(0,o.useMemo)(()=>({addComment:w,canLoadMore:y,comments:h,count:p,deleteComment:k,loadMore:_,retry:j,subscribed:v,providerState:b,updateComment:S}),[w,y,h,p,k,j,_,b,v,S]);return(0,a.jsx)(d.Provider,{value:E,children:e})}function u(){let e=(0,o.useContext)(d);if(!e)throw Error("useDiscussionComments must be used within a DiscussionCommentsProvider");return e}try{d.displayName||(d.displayName="DiscussionCommentsContext")}catch{}try{c.displayName||(c.displayName="DiscussionCommentsProvider")}catch{}try{(i=DiscussionComments).displayName||(i.displayName="DiscussionComments")}catch{}},28014:(e,t,n)=>{"use strict";n.d(t,{B:()=>c,r:()=>d});var i=n(74848),a=n(73189),r=n(96540);let l=(0,r.createContext)({comments:[],addComments:a.l,findInlineComment:()=>void 0,findInlineCommentWithRelay:()=>void 0,getCommentCountByPath:()=>0,getThreadDataByPathAndPosition:()=>void 0,updateInlineCommentMapWithNewComment:()=>void 0,getInlineCommentInfoByPathAndPosition:()=>void 0});function s(e){return e.reduce((e,t)=>(e.set(`${t.path}::${t.position}`,t),e),new Map)}function o(e){let t=new Map;for(let n in e)if(e.hasOwnProperty(n)){let i=new Map;for(let t in e[n])e[n].hasOwnProperty(t)&&i.set(Number(t),e[n][Number(t)]);t.set(n,i)}return t}function d({children:e,initialFiles:t,initialExpandedThreadId:n,initialInlineComments:a}){let[d,c]=(0,r.useState)(()=>a?Object.values(a).flatMap(e=>Array.from(Object.values(e).flat())):[]),[u,m]=(0,r.useState)(t??[]),[h,f]=(0,r.useState)(()=>t?s(t):new Map),[p,g]=(0,r.useState)(()=>a?o(a):new Map),y=(0,r.useCallback)((e,t,n,i)=>{if(i){let i=p.get(e)?.get(t)??[];i=i.concat(n);let a=p.get(e)?.set(t,i);g(p.set(e,a??new Map)??p)}else{let i=p.get(e)?.set(t,n);g(p.set(e,i??new Map)??p)}},[p]);(0,r.useEffect)(()=>{m(t??[]),f(t?s(t):new Map),g(a?o(a):new Map),c(a?Object.values(a).flatMap(e=>Array.from(Object.values(e).flat())):[])},[t,a]);let x=(0,r.useCallback)((e,t,n)=>{let i=e.map(e=>e.id),a=d.filter(e=>!i.includes(e.id)),r=u.filter(e=>e.path!==t||e.position!==parseInt(n)),l={path:t,position:parseInt(n),count:e.length,threads:[{id:`${t}::${n}`,diffSide:"RIGHT",commentsData:{totalCount:e.length,comments:e.map(e=>({id:e.id,author:{avatarUrl:e?.author?.avatarUrl??"",login:e?.author?.login??"",url:""}}))}}]};c([...a,...e]),m([...r,l]),f(s([...r,l])),y(t,parseInt(n),e,!1)},[u,d,y]),b=(0,r.useCallback)(e=>{if(e)return d.find(t=>t.id===e)},[d]),C=(0,r.useCallback)(e=>d.find(t=>t.relayId===e),[d]),v=(0,r.useCallback)(e=>{let t=0;for(let n of u)n.path===e&&(t+=n.count);return t},[u]),N=(0,r.useCallback)((e,t)=>h.get(`${e}::${t}`),[h]),j=(0,r.useCallback)((e,t)=>p.get(e)?.get(t),[p]),_=(0,r.useMemo)(()=>({comments:d,addComments:x,findInlineComment:b,findInlineCommentWithRelay:C,getCommentCountByPath:v,getThreadDataByPathAndPosition:N,getInlineCommentInfoByPathAndPosition:j,updateInlineCommentMapWithNewComment:y,initialExpandedThreadId:n}),[x,d,b,C,v,N,j,y,n]);return(0,i.jsx)(l.Provider,{value:_,children:e})}function c(){let e=(0,r.useContext)(l);if(!e)throw Error("useInlineComments must be used within a InlineCommentsProvider");return e}try{l.displayName||(l.displayName="InlineCommentsContext")}catch{}try{d.displayName||(d.displayName="InlineCommentsProvider")}catch{}},34745:(e,t,n)=>{"use strict";n.d(t,{f:()=>Z});var i=n(74848),a=n(44569),r=n(71315),l=n(96459),s=n(98130),o=n(96540),d=n(97174),c=n(76214);let u={panel:"CommitGroup-module__panel--Agk7V"};var m=n(4559),h=n(99896),f=n(2970),p=n(98994),g=n(43617),y=n(4929),x=n(95378),b=n(73017),C=n(30459),v=n(54571),N=n(16790),j=n(4095),_=n(48926),w=n(25407),k=n(66108),S=n(38621),E=n(55847),L=n(87330),I=n(94977),D=n(3614),T=n(68534),R=n(1117);let A=o.memo(F);function F({repo:e,oid:t}){let n=`browse-repo-${(0,T.F)(t)}`,{sendAnalyticsEvent:a}=(0,C.s)(),{loggingPrefix:r,loggingPayload:l}=(0,N.xe)(),s=(0,N.eX)();return(0,i.jsx)(I.A,{"aria-label":"Browse repository at this point",id:n,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":n,href:(0,w.IO9)({repo:e,action:"tree",commitish:t}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-browse-repo",onClick:()=>{s&&a(`${r}click`,"COMMITS_BROWSE_REPOSITORY_AT_THIS_POINT_CLICKED",l)},children:(0,i.jsx)(S.CodeIcon,{})})})}let M=o.memo(O);function O({repo:e,oid:t,path:n}){if(!n)return null;let a=`view-code-${(0,T.F)(t)}`;return(0,i.jsx)(I.A,{"aria-label":"View code at this point",id:a,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":a,href:(0,w.nD_)({owner:e.ownerLogin,repo:e.name,commitish:t,filePath:n}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-view-code",children:(0,i.jsx)(S.FileCodeIcon,{})})})}function $({commitUrl:e,oid:t,softNavToCommit:n}){let a={variant:"invisible",size:"small",sx:{fontFamily:"var(--fontStack-monospace)",color:"fg.muted"}};return(0,i.jsx)(I.A,{"aria-label":"View commit details",direction:"s",children:n?(0,i.jsx)(E.Q,{as:k.N,to:e,...a,children:(0,T.F)(t)}):(0,i.jsx)("a",{className:"Button--invisible Button--small Button text-mono",href:e,...a,children:(0,i.jsx)("span",{className:"Button-content",children:(0,i.jsx)("span",{className:"Button-label color-fg-muted",children:(0,T.F)(t)})})})})}function P({showDescription:e,setShowDescription:t,oid:n}){let a=(0,T.F)(n),r=`show-description-${a}`,l=`${!e?"Show":"Hide"} description for ${a}`;return(0,i.jsx)(D.m,{id:r,text:l,"aria-label":l,children:(0,i.jsx)(L.K,{icon:S.EllipsisIcon,className:"Button Button--iconOnly Button--invisible Button--small ml-1","data-testid":"commit-row-show-description-button","aria-labelledby":r,"aria-pressed":e,"aria-expanded":e,onClick:n=>{n.preventDefault(),t(!e)}})})}function B({count:e,repo:t,oid:n}){if(!e)return null;let a=`comment-count-${(0,T.F)(n)}`;return(0,i.jsx)(I.A,{"aria-label":`View ${e} commit comment${e>1?"s":""}`,id:a,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":a,href:`${(0,w.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:n})}#${R.N}`,className:"Button Button--invisible Button--small","data-testid":"commit-row-comments",children:(0,i.jsxs)("span",{className:"Button-content color-fg-muted",children:[(0,i.jsx)(S.CommentIcon,{}),(0,i.jsx)("span",{className:"Button-label",children:e})]})})})}try{A.displayName||(A.displayName="BrowseRepositoryAtThisPoint")}catch{}try{F.displayName||(F.displayName="WrappedBrowseRepositoryAtThisPoint")}catch{}try{M.displayName||(M.displayName="ViewCodeAtThisPoint")}catch{}try{O.displayName||(O.displayName="WrappedViewCodeAtThisPoint")}catch{}try{$.displayName||($.displayName="ViewCommitDetails")}catch{}try{P.displayName||(P.displayName="ToggleCommitDescription")}catch{}try{B.displayName||(B.displayName="CommitCommentCount")}catch{}var U=n(44185),H=n(81945),z=n(98783),K=n(42257);function V({deferredData:e}){let{helpUrl:t}=(0,z.D)(),n=(0,j.xs)();return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!n&&void 0===e&&(0,i.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!n&&e&&(0,i.jsx)(U.h,{commitOid:e.oid,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:e.signatureInformation?{helpUrl:t,...e.signatureInformation}:void 0})]})}function G({deferredData:e,oid:t,repository:n}){let a=(0,j.xs)(),r="";try{r=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!a&&void 0===e&&(0,i.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!a&&e?.statusCheckStatus&&(0,i.jsx)("div",{className:"d-none d-sm-flex ml-1",children:"\xb7"}),(0,i.jsx)("div",{className:"d-none d-sm-flex",children:(0,i.jsx)(K.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:r,repo:n})})]})}try{V.displayName||(V.displayName="SignedCommitBadge")}catch{}try{G.displayName||(G.displayName="CommitChecksStatusBadge")}catch{}var q=n(43147);let W={ListItemTitle_0:"CommitRow-module__ListItemTitle_0--xTKIC",ListItem_0:"CommitRow-module__ListItem_0--Iwpdk",ListItemMetadata_0:"CommitRow-module__ListItemMetadata_0--Tnt1n"},Q=(0,o.lazy)(()=>n.e("packages_commits_components_Commits_CommitActionBar_tsx").then(n.bind(n,22220)).then(e=>({default:e.CommitActionBar})));function X({commit:e,repo:t,path:n,softNavToCommit:a}){let[r,l]=(0,o.useState)(!1),s=(0,o.useRef)(null),[d,c]=(0,h.ym)(e.oid,t),[u,w]=(0,o.useState)(!1),k=(0,j.NO)(e.oid),[S]=(0,v.I)(()=>!1,!0,[]),{sendAnalyticsEvent:E}=(0,C.s)(),{loggingPrefix:L,loggingPayload:I}=(0,N.xe)(),D=(0,N.eX)(),T=()=>{D&&E(`${L}click`,"COMMITS_TITLE_CLICKED",I)};return(0,o.useEffect)(()=>{r&&s.current&&s.current.textContent&&(0,m.i)(s.current.textContent)},[s,r]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.c,{"data-testid":"commit-row-item","data-commit-link":e.url,title:e.shortMessageMarkdownLink&&!S?(0,i.jsx)(x.kx,{html:e.shortMessageMarkdownLink,onClick:T,containerClassName:W.ListItemTitle_0,headingClassName:W.ListItemTitle_0,children:e.bodyMessageHtml&&(0,i.jsx)(P,{showDescription:r,setShowDescription:l,oid:e.oid})}):(0,i.jsx)(x.ao,{value:e.shortMessage,href:e.url,onClick:T,containerClassName:W.ListItemTitle_0,headingClassName:W.ListItemTitle_0,children:e.bodyMessageHtml&&(0,i.jsx)(P,{showDescription:r,setShowDescription:l,oid:e.oid})}),metadata:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.V,{children:(0,i.jsx)(B,{oid:e.oid,repo:t,count:k?.commentCount??0})}),(0,i.jsx)(y.V,{className:W.ListItemMetadata_0,children:(0,i.jsx)(V,{deferredData:k})}),(0,i.jsxs)(y.V,{className:"d-none d-sm-flex px-0 gap-2",variant:"primary",children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)($,{oid:e.oid,commitUrl:e.url,softNavToCommit:a}),(0,i.jsx)(q.w,{sha:e.oid})]}),(0,i.jsx)(M,{repo:t,oid:e.oid,path:n}),(0,i.jsx)(A,{repo:t,oid:e.oid})]})]}),secondaryActions:(0,i.jsx)(o.Suspense,{children:(0,i.jsx)(Q,{commit:e,repo:t,path:n,setDialogOpen:w,fetchCheckDetails:c,deferredData:k})}),className:W.ListItem_0,children:[(0,i.jsx)("div",{className:"px-1"}),(0,i.jsxs)(g.Q,{children:[r&&e.bodyMessageHtml&&(0,i.jsx)(p.U,{children:(0,i.jsx)(b.JR,{ref:s,html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container pb-2 text-mono wb-break-word"})}),(0,i.jsx)(p.U,{children:(0,i.jsx)(_.j,{commit:e,repo:t,children:(0,i.jsx)(G,{repository:t,deferredData:k,oid:e.oid})})})]})]}),k?.statusCheckStatus&&u&&(0,i.jsx)(h.xC,{combinedStatus:d,isOpen:u,onDismiss:()=>{w(!1)}})]})}try{Q.displayName||(Q.displayName="CommitActionBar")}catch{}try{X.displayName||(X.displayName="CommitRow")}catch{}var Y=n(89830);function J({commits:e,title:t,shouldClipTimeline:n,repo:a,currentBlobPath:r="",softNavToCommit:l}){let s=(0,o.useId)();return(0,i.jsxs)(Y.s,{clipTimeline:n?"top":"none",children:[(0,i.jsx)(Y.s.Heading,{as:"h3",id:s,title:`Commits on ${t}`,"data-testid":"commit-group-title"}),(0,i.jsx)(c.Z,{className:u.panel,children:(0,i.jsx)(d.u,{title:t,titleHeaderTag:"h3",ariaLabelledBy:s,children:e.map(e=>(0,i.jsx)(X,{commit:e,repo:a,path:r,softNavToCommit:l},e.oid))},t)})]})}try{J.displayName||(J.displayName="CommitGroup")}catch{}function Z({leadingContent:e,commitGroups:t,trailingContent:n,deferredCommitData:d=j.Xx,repository:c,currentBlobPath:u,loggingPayload:m,loggingPrefix:h,shouldClipTimeline:f=!0,softNavToCommit:p=!1}){let g=(0,o.useRef)(0),y=(0,o.useRef)(null),x=(0,o.useRef)(null),b=(0,o.useRef)(!1),C=(0,o.useRef)([]),v=(0,l.Z)();return(0,o.useEffect)(()=>{let e=setTimeout(()=>{C.current=Array.from(document.querySelectorAll('[id*="-list-view-node-"]'))},0);return()=>clearTimeout(e)},[t]),(0,i.jsx)(j.M2,{deferredData:d,children:(0,i.jsx)(N.zq,{loggingInfo:{loggingPayload:m,loggingPrefix:h},children:(0,i.jsxs)(s.A,{clipSidebar:!0,onKeyDown:e=>{var t;"Enter"===e.key?(e=>{if("Enter"===e.key){let t=r.XC?.activeElement?.hasAttribute("data-commit-link")?r.XC?.activeElement?.getAttribute("data-commit-link"):void 0;t&&(e.ctrlKey||e.metaKey?r.cg?.open(t,"_blank"):v(t))}})(e):"Tab"===e.key?"Tab"===(t=e).key&&(t.shiftKey?(r.XC?.activeElement?.hasAttribute("data-commit-link")&&!b.current&&y.current&&(y.current.focus(),x.current=y.current),b.current=!0):(y.current=x.current,x.current=r.XC?.activeElement??null,b.current=!1)):(e=>{if(!["j","k","ArrowDown","ArrowUp"].includes(e.key)||!(0,a.zw)()&&("j"===e.key||"k"===e.key))return;let t=1;for(let e=0;e<C.current.length;e++)C.current[e]?.contains(r.XC?.activeElement)&&(t=e+1);let n=!1;if(("ArrowUp"===e.key||"k"===e.key)&&(n=!0),g.current!==t)g.current=t;else{let e=C.current[n?t-2:t];e?.focus(),e?.focus(),g.current=n?t-1:t+1}})(e)},children:[e,t.map((e,t)=>(0,i.jsx)(J,{title:e.title,commits:e.commits,shouldClipTimeline:f&&0===t,currentBlobPath:u,repo:c,softNavToCommit:p},e.title)),n]})})})}try{Z.displayName||(Z.displayName="Commits")}catch{}},57028:(e,t,n)=>{"use strict";n.d(t,{M:()=>h});var i=n(74848),a=n(4559),r=n(40260),l=n(73189),s=n(38621),o=n(24815),d=n(88657),c=n(96540),u=n(76214);let m={timeout:{description:"Try reloading the page, or if the problem persists, view the history locally using this command:",heading:"Commit history cannot be loaded",icon:(0,i.jsx)(s.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"}),showTextInput:!0},unavailable:{description:"There isn't any commit history to show here.",heading:"No commits history",icon:(0,i.jsx)(s.GitCommitIcon,{size:"medium"}),showTextInput:!1}};function h({timeoutMessage:e,unavailableMessage:t}){let n=m[""!==e?"timeout":"unavailable"],h=t??n.description;return(0,c.useEffect)(()=>{(0,a.i)(`${n.heading}. ${h} ${e}`.trim())},[n.heading,h,e]),(0,i.jsx)(u.Z,{children:(0,i.jsx)("div",{"data-hpc":!0,children:(0,i.jsxs)(d.E,{border:!1,spacious:!0,children:[(0,i.jsx)(d.E.Visual,{children:n.icon}),(0,i.jsx)(d.E.Heading,{children:n.heading}),(0,i.jsx)(d.E.Description,{children:h}),n.showTextInput&&(0,i.jsx)(o.A,{"aria-label":"View commit history locally command",className:"d-flex flex-justify-center mt-2",monospace:!0,onChange:l.l,readOnly:!0,size:"large",trailingAction:(0,i.jsx)(o.A.Action,{onClick:()=>(0,r.D)(e),icon:s.CopyIcon,"aria-label":"Copy to clipboard",className:"fgColor-muted"}),value:e})]})})})}try{h.displayName||(h.displayName="CommitsBlankState")}catch{}},63352:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var i=n(74848),a=n(21728),r=n(75202),l=n(71315),s=n(96540),o=n(38621),d=n(87330),c=n(96665),u=n(19797),m=n(65029),h=n(75298),f=n(55847),p=n(87826);let g=[{label:"Comment is harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Comment is poorly formatted",value:"POORLY_FORMATTED"},{label:"Comment is not true",value:"INCORRECT"},{label:"Comment is not helpful",value:"UNHELPFUL"},{label:"Comment is attached to the wrong line(s)",value:"INCORRECT_LINE"},{label:"Code suggestion is harmful or unsafe",value:"SUGGESTION_OFFENSIVE_OR_DISCRIMINATORY"},{label:"Code suggestion is poorly formatted",value:"SUGGESTION_POORLY_FORMATTED"},{label:"Code suggestion does not solve the problem in the comment",value:"SUGGESTION_UNHELPFUL"},{label:"Code suggestion is invalid",value:"SUGGESTION_INVALID"}],y=e=>{let t,n,r,l,o=(0,a.c)(16),{commentId:d,onClose:p,onSubmit:y,feedbackOptions:b,returnFocusRef:C}=e,v=void 0===b?g:b,[N,j]=(0,s.useState)(!1);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],o[0]=t):t=o[0];let[_,w]=(0,s.useState)(t),[k,S]=(0,s.useState)("");o[1]!==d||o[2]!==_||o[3]!==y||o[4]!==k?(n=e=>{e.preventDefault(),j(!0),_.length&&y({commentId:d,type:"NEGATIVE",feedbackChoice:_,textResponse:k})},o[1]=d,o[2]=_,o[3]=y,o[4]=k,o[5]=n):n=o[5];let E=n;return o[6]!==N||o[7]!==_||o[8]!==v||o[9]!==E||o[10]!==k?(r=()=>(0,i.jsxs)("form",{onSubmit:E,children:[(0,i.jsxs)(c.l.Body,{children:[(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)(u.A,{onChange:w,required:!0,children:[(0,i.jsx)(u.A.Label,{children:"Category"}),v.map(x),N&&!_&&(0,i.jsx)(u.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,i.jsxs)(m.A,{id:"text_response",children:[(0,i.jsx)(m.A.Label,{children:"How should we improve this response?"}),(0,i.jsx)(h.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:k,resize:"vertical",onChange:e=>S(e.currentTarget.value)})]})]}),(0,i.jsx)(c.l.Footer,{children:(0,i.jsx)(f.Q,{type:"submit",disabled:N&&(!k||!_),children:"Submit"})})]}),o[6]=N,o[7]=_,o[8]=v,o[9]=E,o[10]=k,o[11]=r):r=o[11],o[12]!==p||o[13]!==C||o[14]!==r?(l=(0,i.jsx)(c.l,{onClose:p,title:"Provide additional feedback",subtitle:"Please help us improve GitHub Copilot by sharing more details about this comment.",returnFocusRef:C,renderBody:r}),o[12]=p,o[13]=C,o[14]=r,o[15]=l):l=o[15],l};try{y.displayName||(y.displayName="NegativeFeedbackForm")}catch{}function x(e){return(0,i.jsxs)(m.A,{id:`feedback_choice_${e.value}`,children:[(0,i.jsx)(p.A,{value:e.value}),(0,i.jsx)(m.A.Label,{children:e.label})]},e.value)}let b=e=>{let t,n,r=(0,a.c)(6),{onClick:l,commentId:s,disabled:c}=e;return r[0]!==s||r[1]!==l?(t=()=>l({type:"POSITIVE",commentId:s}),r[0]=s,r[1]=l,r[2]=t):t=r[2],r[3]!==c||r[4]!==t?(n=(0,i.jsx)(d.K,{size:"small",variant:"invisible",disabled:c,icon:o.ThumbsupIcon,title:"Positive Feedback","aria-label":"Positive Feedback",onClick:t}),r[3]=c,r[4]=t,r[5]=n):n=r[5],n},C=e=>{let t,n,r,l,c,u=(0,a.c)(13),{onClick:m,commentId:h,disabled:f,feedbackOptions:p}=e,[g,x]=(0,s.useState)(!1),b=(0,s.useRef)(null);u[0]!==m?(t=e=>{m(e),x(!1)},u[0]=m,u[1]=t):t=u[1];let C=t;return u[2]!==h||u[3]!==g||u[4]!==p||u[5]!==C?(n=g&&(0,i.jsx)(y,{onClose:()=>x(!1),onSubmit:C,commentId:h,feedbackOptions:p,returnFocusRef:b}),u[2]=h,u[3]=g,u[4]=p,u[5]=C,u[6]=n):n=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(r=()=>x(!0),u[7]=r):r=u[7],u[8]!==f?(l=(0,i.jsx)(d.K,{ref:b,size:"small",variant:"invisible",disabled:f,icon:o.ThumbsdownIcon,title:"Negative Feedback","aria-label":"Negative Feedback",onClick:r}),u[8]=f,u[9]=l):l=u[9],u[10]!==n||u[11]!==l?(c=(0,i.jsxs)(i.Fragment,{children:[n,l]}),u[10]=n,u[11]=l,u[12]=c):c=u[12],c};try{b.displayName||(b.displayName="PositiveFeedbackButton")}catch{}try{C.displayName||(C.displayName="NegativeFeedbackButton")}catch{}var v=n(96379);let N=e=>{let t,n,r,o,d,c,u=(0,a.c)(18),{commentId:m,commentUrl:h,feedbackPath:f,feedbackOptions:p,additionalParameters:g}=e,[y,x]=(0,s.useState)();e:{if(f){t=f;break e}if(h){let e=new URL(h,l.fV.origin);e.hash="",t=`${e}/code_review_feedback`;break e}throw Error("missing feedbackPath and commentUrl")}let N=t;u[0]!==g||u[1]!==N?(n={path:N,additionalParameters:g},u[0]=g,u[1]=N,u[2]=n):n=u[2];let j=(({path:e,additionalParameters:t})=>(0,s.useCallback)(({type:n,commentId:i,feedbackChoice:a,textResponse:r})=>{try{let l=new FormData;if(l.set("comment_id",i),l.set("feedback",n),t)for(let[e,n]of Object.entries(t))l.set(e,n);for(let e of a??[])l.append("feedback_choice[]",e);r&&l.set("text_response",r),(0,v.DI)(e,{method:"POST",body:l})}catch{}},[e,t]))(n);u[3]!==j?(r=e=>{x(e.type),j(e)},u[3]=j,u[4]=r):r=u[4];let _=r,w=`copilot-code-review-feedback-${m}`;return u[5]!==m||u[6]!==_||u[7]!==y?(o="NEGATIVE"!==y&&(0,i.jsx)(b,{disabled:!!y,commentId:m,onClick:_}),u[5]=m,u[6]=_,u[7]=y,u[8]=o):o=u[8],u[9]!==m||u[10]!==p||u[11]!==_||u[12]!==y?(d="POSITIVE"!==y&&(0,i.jsx)(C,{disabled:!!y,onClick:_,commentId:m,feedbackOptions:p}),u[9]=m,u[10]=p,u[11]=_,u[12]=y,u[13]=d):d=u[13],u[14]!==w||u[15]!==o||u[16]!==d?(c=(0,i.jsxs)("div",{"data-testid":w,className:"d-flex gap-1",children:[o,d]}),u[14]=w,u[15]=o,u[16]=d,u[17]=c):c=u[17],c},j=e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=(0,i.jsx)(r.t,{fallback:null,children:(0,i.jsx)(N,{...e})}),n[0]=e,n[1]=t):t=n[1],t};try{N.displayName||(N.displayName="Feedback")}catch{}try{j.displayName||(j.displayName="CopilotCodeReviewFeedback")}catch{}},98994:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var i=n(74848),a=n(29731),r=n(34164),l=n(35220);let s={container:"Description-module__container--Zwqe8",compact:"Description-module__compact--Lw6nW"};function o({children:e,style:t,className:n}){let{variant:o}=(0,l.e)();return(0,i.jsx)("div",{...(0,a.G)("list-view-item-description"),className:(0,r.$)(s.container,"compact"===o&&s.compact,n),style:t,children:e})}try{o.displayName||(o.displayName="ListItemDescription")}catch{}},43617:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});var i=n(74848),a=n(29731),r=n(34164),l=n(35220);let s={container:"MainContent-module__container--NyRpm",inner:"MainContent-module__inner--qD0Pb",compact:"MainContent-module__compact--S3brA"};function o({children:e}){let{variant:t}=(0,l.e)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{...(0,a.G)("list-view-item-main-content"),className:s.container,children:(0,i.jsx)("div",{className:(0,r.$)(s.inner,"compact"===t&&s.compact),children:e})})})}try{o.displayName||(o.displayName="ListItemMainContent")}catch{}},4929:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var i=n(74848),a=n(29731),r=n(34164);let l={metadata:"Metadata-module__metadata--ODMG0",secondary:"Metadata-module__secondary--1te4w",primary:"Metadata-module__primary--S8Orc",alignRight:"Metadata-module__alignRight--A1PHa"};function s({children:e,alignment:t,variant:n,...s}){return(0,i.jsx)("div",{...(0,a.G)("list-view-item-metadata-item"),...s,className:(0,r.$)(l.metadata,"primary"===n?l.primary:l.secondary,"right"===t&&l.alignRight,s.className),children:e})}try{s.displayName||(s.displayName="ListItemMetadata")}catch{}},95378:(e,t,n)=>{"use strict";n.d(t,{kx:()=>j,ao:()=>N});var i,a,r=n(74848),l=n(20263),s=n(73017),o=n(29731),d=n(34164),c=n(96540),u=n(56825),m=n(35220),h=n(87670),f=n(87826),p=n(24347);let g={container:"Selection-module__container--OQE4d",containerWithDragHandle:"Selection-module__containerWithDragHandle--mLWh4",dragTrigger:"Selection-module__dragTrigger--SM4bZ",compact:"Selection-module__compact--azMKM",checkbox:"Selection-module__checkbox--X3ras",checkboxCompact:"Selection-module__checkboxCompact--zfQtx"};var y=n(60257),x=n(74501);let b=()=>{let{variant:e}=(0,m.e)(),{isSelectable:t,hasDragHandle:n}=(0,p.v)(),{isSelected:i,onSelect:a}=(0,y.r)(),{title:l}=(0,x.J)();return t?(0,r.jsxs)("div",{className:n?g.containerWithDragHandle:g.container,...(0,o.G)("list-view-item-selection"),children:[n&&(0,r.jsx)(h.BS.DragTrigger,{className:(0,d.$)(g.dragTrigger,"compact"===e&&g.compact)}),(0,r.jsx)(f.A,{className:"default"===e?g.checkbox:g.checkboxCompact,checked:i,onChange:()=>a(!i),"aria-label":`Select: ${l}`,"data-listview-component":"selection-input",...(0,o.G)("list-view-item-selection-input")})]}):null};try{b.displayName||(b.displayName="ListItemSelection")}catch{}let C={anchor:"Title-module__anchor--GmXUE",heading:"Title-module__heading--s7YnL",compact:"Title-module__compact--eK6hD",container:"Title-module__container--XD9YG",trailingBadgesSpacer:"Title-module__trailingBadgesSpacer--Son9W",trailingBadgesContainer:"Title-module__trailingBadgesContainer--mijcn",inline:"Title-module__inline--oM0P7"};function v({children:e,containerStyle:t,containerClassName:n,headerContainerRef:i,headingStyle:a,headingClassName:l,headingRef:s,leadingBadge:c,trailingBadges:h,header:f}){let{variant:p}=(0,m.e)(),{headingRef:g}=(0,x.J)(),y=(0,u.m)("listitem");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{...(0,o.G)("list-view-item-title-container"),style:t,className:(0,d.$)(C.container,"compact"===p&&C.compact,n),ref:i,children:[(0,r.jsxs)(y,{className:(0,d.$)(C.heading,"compact"===p&&C.compact,l),style:a,ref:e=>{if(g&&(g.current=e),s&&"current"in s)try{s.current=e}catch{}},...(0,o.G)("list-view-item-title"),children:[c,f]}),h&&(0,r.jsx)("span",{className:C.trailingBadgesSpacer}),(0,r.jsx)("span",{className:C.trailingBadgesContainer,children:h}),e]}),(0,r.jsx)(b,{})]})}function N({children:e,value:t,containerStyle:n,containerClassName:i,headerContainerRef:a,headingStyle:l,headingClassName:s,headingRef:o,leadingBadge:d,trailingBadges:u,anchorRef:m,...h}){let f=(0,c.useRef)(null),p=m||f;return w({anchorRef:p,...h}),(0,r.jsx)(v,{header:h.href||h.onClick?(0,r.jsx)(_,{anchorRef:p,...h,children:(0,r.jsx)("span",{children:t})}):(0,r.jsx)("span",{children:t}),containerStyle:n,containerClassName:i,headerContainerRef:a,headingStyle:l,headingClassName:s,headingRef:o,leadingBadge:d,trailingBadges:u,children:e})}function j({children:e,html:t,containerStyle:n,containerClassName:i,headerContainerRef:a,headingStyle:s,headingClassName:o,headingRef:d,leadingBadge:c,trailingBadges:u,...m}){return w(m),(0,r.jsx)(v,{header:(0,r.jsx)(l.BC,{html:t,...m}),containerStyle:n,containerClassName:i,headerContainerRef:a,headingStyle:s,headingClassName:o,headingRef:d,leadingBadge:c,trailingBadges:u,children:e})}function _({anchorStyle:e,anchorClassName:t,anchorRef:n,linkProps:i,children:a,...l}){let{as:s="a",...u}=i??{},m=(0,c.useRef)(null);return(0,r.jsx)(s,{...(0,o.G)("listitem-title-link"),style:e,ref:n||m,className:(0,d.$)(C.anchor,C.inline,t),...l,...u,children:a})}let w=({href:e,onClick:t,anchorRef:n})=>{let{setTitleAction:i,headingRef:a}=(0,x.J)();return(0,c.useEffect)(()=>{(e||t)&&i(()=>t=>{if(e&&(t.metaKey||t.ctrlKey))window.open(e,"_blank");else if(n?.current)n.current.click();else if(a?.current){let e=a.current.querySelector("a, button");e&&e.click()}})},[n,a,e,t,i]),null};try{v.displayName||(v.displayName="InternalTitle")}catch{}try{(i=TitleTag).displayName||(i.displayName="TitleTag")}catch{}try{N.displayName||(N.displayName="ListItemTitle")}catch{}try{j.displayName||(j.displayName="ListItemSafeHTMLTitle")}catch{}try{(a=function({children:e,html:t,containerStyle:n,containerClassName:i,headerContainerRef:a,headingStyle:l,headingClassName:o,headingRef:d,leadingBadge:c,trailingBadges:u,...m}){return w(m),(0,r.jsx)(v,{header:(0,r.jsx)(s.JR,{html:t,...m}),containerStyle:n,containerClassName:i,headerContainerRef:a,headingStyle:l,headingClassName:o,headingRef:d,leadingBadge:c,trailingBadges:u,children:e})}).displayName||(a.displayName="ListItemUnsafeHTMLTitle")}catch{}try{_.displayName||(_.displayName="HeadingLink")}catch{}},23656:(e,t,n)=>{"use strict";n.d(t,{W:()=>W});var i=n(74848);let a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"includesCreatedEdit",storageKey:null},i=[{kind:"Literal",name:"first",value:100}],a={alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"editedAt",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MarkdownEditHistoryViewerQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[n,{alias:null,args:i,concreteType:"UserContentEditConnection",kind:"LinkedField",name:"userContentEdits",plural:!1,selections:[a,{alias:null,args:null,concreteType:"UserContentEditEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"node",plural:!1,selections:[r,l,s,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[o,d],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"userContentEdits(first:100)"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MarkdownEditHistoryViewerQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[c,{kind:"InlineFragment",selections:[n,{alias:null,args:i,concreteType:"UserContentEditConnection",kind:"LinkedField",name:"userContentEdits",plural:!1,selections:[a,{alias:null,args:null,concreteType:"UserContentEditEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"node",plural:!1,selections:[r,l,s,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[c,o,d,r],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"userContentEdits(first:100)"}],type:"Comment",abstractKey:"__isComment"},r],storageKey:null}]},params:{id:"c6113eea560ba83b319c9b30fc5d4f7e",metadata:{},name:"MarkdownEditHistoryViewerQuery",operationKind:"query",text:null}}}();a.hash="58ea81646b217a25de6cfe147936e7f6";let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MarkdownEditHistoryViewer_comment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCanReadUserContentEdits",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastEditedAt",storageKey:null}],type:"Comment",abstractKey:"__isComment"};r.hash="fcc1ee717c6a87a4ffdb4f4d9391d55c";var l=n(77430),s=n(76873),o=n(81945),d=n(5945),c=n(52446),u=n(89169),m=n(21654),h=n(96540),f=n(18312),p=n(73454);let g={couldNotDeleteEditRevision:"Failed to delete this revision",couldNotLoad:"Couldn't load"},y={CouldNotFindFallbackErrorContainer:"CouldNotFindFallbackError-module__CouldNotFindFallbackErrorContainer--PNbb0"},x=({retry:e})=>(0,i.jsx)(p.h,{message:g.couldNotLoad,retry:e,className:y.CouldNotFindFallbackErrorContainer});try{x.displayName||(x.displayName="CouldNotFindFallbackError")}catch{}let b=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"diff",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"diffBefore",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"EditHistoryDialogQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[n,i,a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[r],storageKey:null},{args:null,kind:"FragmentSpread",name:"EditHistoryDialogHeaderFragment"}],type:"UserContentEdit",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"EditHistoryDialogQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,{kind:"InlineFragment",selections:[n,i,a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[l,r,s],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},r,s],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"editedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"newest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"firstEdit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCanDelete",storageKey:null}],type:"UserContentEdit",abstractKey:null},s],storageKey:null}]},params:{id:"95112ed4d46018d629c28241b711a389",metadata:{},name:"EditHistoryDialogQuery",operationKind:"query",text:null}}}();b.hash="027faee365f58b6aa217941196bb5c80";var C=n(96665),v=n(18042);let N={EditHistoryDialogContainer:"EditHistoryDialog-module__EditHistoryDialogContainer--g7yZt",editHistoryContentScrollable:"EditHistoryDialog-module__editHistoryContentScrollable--Sso3i",contentViewerContainer:"EditHistoryDialog-module__contentViewerContainer--CLOK3",mutedInfoText:"EditHistoryDialog-module__mutedInfoText--C13E3",loadingSkeletonContainer:"EditHistoryDialog-module__loadingSkeletonContainer--ob6sY"},j={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditHistoryDialogHeaderFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"editedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"newest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"firstEdit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCanDelete",storageKey:null}],type:"UserContentEdit",abstractKey:null};j.hash="173b0fbf2e248d6057ccd670ace2eea7";var _=n(43258),w=n(38621),k=n(69948),S=n(55847),E=n(30729);let L={deleteEditRevision:"Delete revision"},I={ghostUserLogin:"ghost"},D=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"diff",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"deleteUserContentEditMutation",selections:[{alias:null,args:t,concreteType:"DeleteUserContentEditPayload",kind:"LinkedField",name:"deleteUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"userContentEdit",plural:!1,selections:[n,i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[a,r],storageKey:null},l],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"deleteUserContentEditMutation",selections:[{alias:null,args:t,concreteType:"DeleteUserContentEditPayload",kind:"LinkedField",name:"deleteUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"userContentEdit",plural:!1,selections:[n,i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a,r,n],storageKey:null},l],storageKey:null}],storageKey:null}]},params:{id:"71452b9f40a7828ac05811d1ad4f821e",metadata:{},name:"deleteUserContentEditMutation",operationKind:"mutation",text:null}}}();D.hash="45e1f3e7d425560f65ef39e8c357794d";let T={EditHistoryDialogHeaderContainer:"EditHistoryDialogHeader-module__EditHistoryDialogHeaderContainer--IRXVB",statusLabel:"EditHistoryDialogHeader-module__statusLabel--Pf9hN",deleteRevisionButton:"EditHistoryDialogHeader-module__deleteRevisionButton--I4tuB",actorDetailsWrapper:"EditHistoryDialogHeader-module__actorDetailsWrapper--hz1cP",userAvatar:"EditHistoryDialogHeader-module__userAvatar--hMoGt",usernameBold:"EditHistoryDialogHeader-module__usernameBold--nCSfu"},R=({queryRef:e,userContentEditId:t})=>{let n=(0,f.useFragment)(j,e),a=(0,f.useRelayEnvironment)(),r=(0,k.S)(),{addToast:l}=(0,_.Y6)(),s=(0,h.useCallback)(async()=>{await r({title:v.k.confirmations.deleteEditHistoryTitle,content:v.k.confirmations.deleteEditHistoryContent,confirmButtonType:"danger",confirmButtonContent:v.k.confirmations.deleteEditHistoryConfirmButtonContent})&&function({environment:e,input:{id:t},onCompleted:n,onError:i}){(0,f.commitMutation)(e,{mutation:D,variables:{input:{id:t}},onCompleted:e=>{null===e.deleteUserContentEdit?i?.():n?.()},onError:e=>i?.(e)})}({environment:a,input:{id:t},onError:()=>{l({type:"error",message:g.couldNotDeleteEditRevision})}})},[l,r,a,t]),o=n.newest||n.deletedAt;return(0,i.jsxs)("div",{className:T.EditHistoryDialogHeaderContainer,children:[n.editor&&(0,i.jsx)(A,{login:n.editor.login,avatarUrl:n.editor.avatarUrl,time:n.editedAt,details:n.firstEdit?v.k.editHistory.created:v.k.editHistory.edited,trailingElement:o?(0,i.jsx)(m.A,{className:T.statusLabel,children:n.deletedAt?v.k.editHistory.deleted:v.k.editHistory.mostRecent}):void 0}),n.viewerCanDelete&&!n.newest&&!n.deletedAt&&(0,i.jsxs)(S.Q,{variant:"danger",size:"small","aria-label":v.k.editHistory.deleteRevisionAriaLabel,onClick:s,className:T.deleteRevisionButton,children:[(0,i.jsx)(E.A,{icon:w.TrashIcon})," ",L.deleteEditRevision]})]})};function A({login:e,avatarUrl:t,details:n,time:a,className:r,trailingElement:s}){let o=!!t&&!!e;return(0,i.jsxs)("div",{className:T.actorDetailsWrapper,children:[(0,i.jsxs)("div",{className:r,children:[o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.r,{src:t,size:16,alt:`@${e}`,className:T.userAvatar}),(0,i.jsx)("span",{className:T.usernameBold,children:e})]}),!o&&(0,i.jsx)("span",{children:e??I.ghostUserLogin}),(0,i.jsxs)("span",{children:[" ",n," "]}),a&&(0,i.jsx)(u.A,{date:new Date(a)})]}),s]})}try{R.displayName||(R.displayName="EditHistoryDialogHeader")}catch{}try{A.displayName||(A.displayName="ActorOperationDetails")}catch{}let F=e=>e.split(/\r?\n/),M=e=>e.split(/\s+/),O=(e,t)=>({groups:[{words:e??"",modification:t}],modification:t}),$={diffContainer:"GroupedTextDiffViewer-module__diffContainer--vSv5M",borderStylingAdded:"GroupedTextDiffViewer-module__borderStylingAdded--vmx_p",borderStylingRemoved:"GroupedTextDiffViewer-module__borderStylingRemoved--nuxu4",borderStylingChanged:"GroupedTextDiffViewer-module__borderStylingChanged--SGyL6",wordStylingAdded:"GroupedTextDiffViewer-module__wordStylingAdded--WmYJz",wordStylingRemoved:"GroupedTextDiffViewer-module__wordStylingRemoved--n4HZo",diffLine:"GroupedTextDiffViewer-module__diffLine--yfbRY"},P=e=>{switch(e){case"ADDED":return{open:"[+]",close:"[/+]"};case"REMOVED":return{open:"[-]",close:"[/-]"}}return{open:"",close:""}},B=e=>"ADDED"===e||"REMOVED"===e,U=({groups:e,modification:t})=>{let n=e.map(e=>e.words).join(" ");return(0,i.jsxs)("span",{className:$.diffLine,children:["EDITED"===t&&e?.map((e,t)=>(0,i.jsxs)(i.Fragment,{children:[B(e.modification)&&(0,i.jsx)("span",{className:"sr-only",children:P(e.modification).open}),(0,i.jsx)("span",{className:(e=>{switch(e){case"ADDED":return $.wordStylingAdded;case"REMOVED":return $.wordStylingRemoved;case"UNCHANGED":return""}})(e.modification),children:`${0===t?"":" "}${e.words}`}),B(e.modification)&&(0,i.jsx)("span",{className:"sr-only",children:P(e.modification).close})]},t-1)),"EDITED"!==t&&e.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"sr-only",children:P(t).open}),(0,i.jsx)("span",{children:n}),(0,i.jsx)("span",{className:"sr-only",children:P(t).close})]}),0===e.length&&(0,i.jsx)("br",{})]})},H=({before:e,after:t})=>{let n=function({before:e,after:t}){let n=e?F(e):[],i=t?F(t):[],a=[];for(let e=0;e<n.length||e<i.length;e++){let t=n[e],r=i[e];a.push(function(e,t){let n=e?M(e):[],i=t?M(t):[];if(0===n.length&&0===i.length||e===t)return O(e,"UNCHANGED");if(0===n.length)return O(t,"ADDED");if(0===i.length)return O(e,"REMOVED");let a=[],r={words:"",modification:"UNCHANGED"},l={words:"",modification:"ADDED"},s={words:"",modification:"REMOVED"};for(let e=0;e<n.length||e<i.length;e++){let t=n[e],o=i[e];t===o?(r.words=`${r.words}${0===r.words.length?"":" "}${t}`,""!==l.words&&(a.push(l),l={words:"",modification:"ADDED"}),""!==s.words&&(a.push(s),s={words:"",modification:"REMOVED"})):(""!==r.words&&(void 0!==t||void 0!==o)&&(a.push(r),r={words:"",modification:"UNCHANGED"}),void 0!==t&&(s.words=`${s.words}${0===s.words.length?"":" "}${t}`),void 0!==o&&(l.words=`${l.words}${0===l.words.length?"":" "}${o}`))}return""!==l.words&&a.push(l),""!==s.words&&a.push(s),""!==r.words&&a.push(r),{groups:a,modification:"EDITED"}}(t,r))}return{lines:a}}({before:e,after:t});return(0,i.jsx)("div",{className:$.diffContainer,children:n.lines.map((e,t)=>(0,i.jsx)("div",{className:(e=>{switch(e){case"ADDED":return $.borderStylingAdded;case"REMOVED":return $.borderStylingRemoved;case"EDITED":return $.borderStylingChanged;case"UNCHANGED":return""}})(e.modification),children:(0,i.jsx)(U,{...e})},t))})};try{U.displayName||(U.displayName="LineDiffViewer")}catch{}try{H.displayName||(H.displayName="GroupedTextDiffViewer")}catch{}let z=({userContentEditId:e,onClose:t})=>(0,i.jsx)(C.l,{renderBody:()=>(0,i.jsx)(K,{userContentEditId:e}),onClose:t,title:v.k.editHistory.viewingEditTitle,width:"xlarge",height:"auto",className:N.EditHistoryDialogContainer}),K=({userContentEditId:e})=>{let[t,n]=(0,f.useQueryLoader)(b);return((0,h.useEffect)(()=>{n({id:e})},[n,e]),t)?(0,i.jsx)(h.Suspense,{fallback:(0,i.jsx)(G,{}),children:(0,i.jsx)(s.A,{onRetry:()=>n({id:e},{fetchPolicy:"network-only"}),fallback:e=>(0,i.jsx)(x,{retry:e}),children:(0,i.jsx)(V,{queryRef:t,userContentEditId:e})})}):(0,i.jsx)(G,{})},V=({queryRef:e,userContentEditId:t})=>{let n=(0,f.usePreloadedQuery)(b,e).node;if(!n)return(0,i.jsx)(G,{});let a=!n.diffBefore&&!n.diff;return(0,i.jsxs)("div",{className:N.editHistoryContentScrollable,children:[(0,i.jsx)(R,{queryRef:n,userContentEditId:t}),(0,i.jsxs)("div",{className:N.contentViewerContainer,children:[!n.deletedAt&&!a&&(0,i.jsx)(H,{before:n.diffBefore??void 0,after:n.diff??void 0}),!n.deletedAt&&a&&(0,i.jsx)("span",{className:N.mutedInfoText,children:v.k.editHistory.emptyEdit}),n.deletedAt&&(0,i.jsx)(A,{login:n.deletedBy?.login,details:v.k.editHistory.deletedThisRevision,time:n.deletedAt,className:N.mutedInfoText})]})]})};function G(){return(0,i.jsxs)("div",{className:N.loadingSkeletonContainer,children:[(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"}),(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"})]})}try{z.displayName||(z.displayName="EditHistoryDialog")}catch{}try{K.displayName||(K.displayName="EditContent")}catch{}try{V.displayName||(V.displayName="EditContentInternal")}catch{}try{G.displayName||(G.displayName="EditContentLoading")}catch{}let q={editHistoryItemMetadata:"MarkdownEditHistoryViewer-module__editHistoryItemMetadata--oUxNy",editHistoryContainer:"MarkdownEditHistoryViewer-module__editHistoryContainer--l0A8s",editHistoryMenuButton:"MarkdownEditHistoryViewer-module__editHistoryMenuButton--GyyK7",scrollableEditHistoryList:"MarkdownEditHistoryViewer-module__scrollableEditHistoryList--PDigD",editorAvatar:"MarkdownEditHistoryViewer-module__editorAvatar--HeVVG",editorUsername:"MarkdownEditHistoryViewer-module__editorUsername--_tgsX",loadingSkeletonContainer:"MarkdownEditHistoryViewer-module__loadingSkeletonContainer--K3qvZ"};function W({editHistory:e}){let t=(0,f.useFragment)(r,e),[n,a]=(0,h.useState)(!1),[l,s]=(0,h.useState)("");return t&&t.viewerCanReadUserContentEdits&&t.lastEditedAt?(0,i.jsxs)("div",{className:q.editHistoryContainer,children:[(0,i.jsxs)(d.W,{children:[(0,i.jsx)(d.W.Button,{variant:"invisible",size:"small","aria-label":v.k.editHistory.ariaLabel,className:q.editHistoryMenuButton,children:v.k.editHistory.openEditsButton}),(0,i.jsx)(d.W.Overlay,{width:"auto",children:(0,i.jsx)(Q,{setIsEditHistoryDialogOpen:a,setSelectedId:s,editHistoryId:t.id,lastEditedAt:t.lastEditedAt})})]}),n&&(0,i.jsx)(z,{onClose:()=>a(!1),userContentEditId:l})]}):null}let Q=({editHistoryId:e,lastEditedAt:t,...n})=>{let[r,l]=(0,f.useQueryLoader)(a);return((0,h.useEffect)(()=>{l({id:e},{fetchPolicy:"network-only"})},[e,l,t]),r)?(0,i.jsx)(h.Suspense,{fallback:(0,i.jsx)(Y,{}),children:(0,i.jsx)(s.A,{onRetry:()=>l({id:e},{fetchPolicy:"network-only"}),fallback:e=>(0,i.jsx)(x,{retry:e}),children:(0,i.jsx)(X,{queryRef:r,...n})})}):(0,i.jsx)(Y,{})},X=({setIsEditHistoryDialogOpen:e,setSelectedId:t,queryRef:n})=>{let r=(0,f.usePreloadedQuery)(a,n);if(!r.node?.userContentEdits)return(0,i.jsx)(Y,{});let s=r.node.userContentEdits.totalCount;return(0,i.jsx)(c.l,{className:q.scrollableEditHistoryList,children:(0,i.jsxs)(c.l.Group,{children:[(0,i.jsx)(c.l.GroupHeading,{children:`Edited ${s-1} time${s>2?"s":""}`}),r.node.userContentEdits.edges?.map((n,a)=>{let o=n?.node;if(!o?.editor)return null;let d=r.node?.includesCreatedEdit&&a===s-1;return(0,i.jsxs)(c.l.Item,{onSelect:()=>{t(o.id),e(!0)},children:[(0,i.jsx)(c.l.LeadingVisual,{children:(0,i.jsx)(l.r,{src:o.editor.avatarUrl,size:16,alt:`@${o.editor.login}`,className:q.editorAvatar})}),(0,i.jsx)("span",{className:q.editorUsername,children:o.editor.login}),(0,i.jsxs)(c.l.Description,{truncate:!0,className:q.editHistoryItemMetadata,children:[d&&(0,i.jsx)("div",{title:"",children:v.k.editHistory.created}),(0,i.jsx)(u.A,{date:new Date(o.editedAt)})]}),(0===a||o.deletedAt)&&(0,i.jsx)(c.l.TrailingVisual,{children:(0,i.jsx)(m.A,{children:0===a?v.k.editHistory.mostRecent:v.k.editHistory.deleted})})]},o.id)})]})})};function Y(){return(0,i.jsxs)("div",{className:q.loadingSkeletonContainer,children:[(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"}),(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"}),(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"}),(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"})]})}try{W.displayName||(W.displayName="MarkdownEditHistoryViewer")}catch{}try{Q.displayName||(Q.displayName="EditHistoryActionMenuContent")}catch{}try{X.displayName||(X.displayName="EditHistoryActionMenuContentInternal")}catch{}try{Y.displayName||(Y.displayName="EditHistoryLoading")}catch{}},21086:(e,t,n)=>{"use strict";n.d(t,{_:()=>d});var i=n(74848);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MarkdownLastEditedBy",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewerCanReadUserContentEdits",storageKey:null},{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"lastUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null}],storageKey:null}],type:"Comment",abstractKey:"__isComment"};a.hash="bbab0cb2d43eeaaa0ed5b010868ec7f4";var r=n(81246),l=n(18312),s=n(18042);let o={lastEditInfoContainer:"MarkdownLastEditedBy-module__lastEditInfoContainer--EN_Qz",mutedEditorLink:"MarkdownLastEditedBy-module__mutedEditorLink--pD3Z6"};function d({editInformation:e,includeSeparator:t,forceUnderline:n}){let d=(0,l.useFragment)(a,e);if(!d||!d.viewerCanReadUserContentEdits||!d.lastUserContentEdit||!d.lastUserContentEdit.editor)return null;let{login:c,url:u}=d.lastUserContentEdit.editor;return(0,i.jsxs)("span",{className:o.lastEditInfoContainer,children:[t&&(0,i.jsx)("span",{children:" \xb7 "}),(0,i.jsxs)("span",{children:[`${s.k.editHistory.editedBy} `,(0,i.jsx)(r.A,{href:u,inline:n,className:o.mutedEditorLink,children:c})]})]})}try{d.displayName||(d.displayName="MarkdownLastEditedBy")}catch{}},19805:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ReactionViewerRelay:()=>m,ReactionViewerRelayQueryComponent:()=>h,default:()=>f});var i=n(74848);let a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},t=[e];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ReactionViewerRelayGroups",selections:[{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:t,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:t,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:t,type:"Mannequin",abstractKey:null}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null}],type:"Reactable",abstractKey:"__isReactable"}}();a.hash="4957e34582c8895c7e94b4dc9fa57fc9";let r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},a=[i],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ReactionViewerRelayLazyQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ReactionViewerRelayLazyQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[n,{kind:"InlineFragment",selections:a,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[i,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:a,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:a,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null}],type:"Reactable",abstractKey:"__isReactable"}],type:"Comment",abstractKey:"__isComment"},r],storageKey:null}]},params:{id:"4ad1541bb8051d5b7a55a10bbdf54731",metadata:{},name:"ReactionViewerRelayLazyQuery",operationKind:"query",text:null}}}();r.hash="37ec1495c4c7ace448e859305895ad0e";var l=n(96540),s=n(18312),o=n(74547);let d=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},a=[i],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"addReactionMutation",selections:[{alias:null,args:t,concreteType:"AddReactionPayload",kind:"LinkedField",name:"addReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"addReactionMutation",selections:[{alias:null,args:t,concreteType:"AddReactionPayload",kind:"LinkedField",name:"addReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[n,{kind:"TypeDiscriminator",abstractKey:"__isReactable"},{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[n,{kind:"InlineFragment",selections:a,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[i,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:a,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:a,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null},r],storageKey:null}],storageKey:null}]},params:{id:"c925c985a3bde5cd71f1859404c89567",metadata:{},name:"addReactionMutation",operationKind:"mutation",text:null}}}();d.hash="504ef43df20e9ee96a023f421682e18d";let c=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},a=[i],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"removeReactionMutation",selections:[{alias:null,args:t,concreteType:"RemoveReactionPayload",kind:"LinkedField",name:"removeReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"removeReactionMutation",selections:[{alias:null,args:t,concreteType:"RemoveReactionPayload",kind:"LinkedField",name:"removeReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[n,{kind:"TypeDiscriminator",abstractKey:"__isReactable"},{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[n,{kind:"InlineFragment",selections:a,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[i,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:a,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:a,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null},r],storageKey:null}],storageKey:null}]},params:{id:"fd20390882af8180d05f0d4a921c00d9",metadata:{},name:"removeReactionMutation",operationKind:"mutation",text:null}}}();c.hash="8e28d0138da52c07bb0e64eda432f580";var u=n(78809);function m({reactionGroups:e,subjectId:t,canReact:n=!0}){let r=(0,s.useRelayEnvironment)(),m=(0,s.useFragment)(a,e),h=(0,l.useCallback)((e,i)=>{n&&(i?function({environment:e,input:{subject:t,content:n},onError:i,onCompleted:a}){(0,s.commitMutation)(e,{mutation:c,variables:{input:{subjectId:t,content:n}},optimisticUpdater:e=>{let i=e.get(t);if(!i)return;let a=i.getLinkedRecords("reactionGroups");if(!a)return;let r=a.findIndex(e=>e.getValue("content")===n),l=a[r];if(l){l.setValue(!1,"viewerHasReacted");let n=`client:${t}:reactionGroups:${r}:reactors(first:5)`,i=e.get(n);if(i){let e=i.getValue("totalCount");i.setValue(e&&e>0?e-1:0,"totalCount")}}},onError:e=>i&&i(e),onCompleted:e=>a&&a(e)})}({environment:r,input:{subject:t,content:e}}):function({environment:e,input:{subject:t,content:n},onError:i,onCompleted:a}){(0,s.commitMutation)(e,{mutation:d,variables:{input:{subjectId:t,content:n}},optimisticUpdater:e=>{let i=e.get(t);if(!i)return;let a=i.getLinkedRecords("reactionGroups");if(!a)return;let r=a.findIndex(e=>e.getValue("content")===n),l=a[r];if(l){l.setValue(!0,"viewerHasReacted");let n=`client:${t}:reactionGroups:${r}:reactors(first:5)`,i=e.get(n);if(i){let e=i.getValue("totalCount");i.setValue(e?e+1:1,"totalCount")}}},onError:e=>i&&i(e),onCompleted:e=>a&&a(e)})}({environment:r,input:{subject:t,content:e}}))},[n,r,t]),f=(m.reactionGroups||[]).filter(e=>!!e).map(e=>({reaction:{content:e.content,viewerHasReacted:e.viewerHasReacted},reactors:e.reactors?.nodes?.map(e=>e&&"%other"!==e.__typename?{login:"Bot"===e.__typename&&e.isCopilot?o.t.copilotDisplayName:e.login,typeName:e.__typename}:{login:"",typeName:"Other"})||[],totalCount:e.reactors?.totalCount||0}));return(0,i.jsx)(u.P,{reactionGroups:f,canReact:n,subjectId:t,onReact:h})}function h({id:e,subjectLocked:t}){let n=(0,s.useLazyLoadQuery)(r,{id:e},{fetchPolicy:"store-or-network"});return n.node?(0,i.jsx)(m,{subjectId:e,reactionGroups:n.node,canReact:!t}):null}let f=m;try{m.displayName||(m.displayName="ReactionViewerRelay")}catch{}try{h.displayName||(h.displayName="ReactionViewerRelayQueryComponent")}catch{}},24967:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var i=n(74848),a=n(81945);function r(){return(0,i.jsx)("div",{className:"d-flex flex-wrap gap-1",children:(0,i.jsx)(a.O,{variant:"elliptical",height:"28px",width:"28px"})})}try{r.displayName||(r.displayName="ReactionViewerLoading")}catch{}},76873:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(50467),a=n(74848),r=n(96540),l=n(38102),s=n(49936);let o=e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Error:"}),(0,a.jsx)("button",{onClick:e,children:"Retry"})]});let BasicPreloadedQueryBoundary=class BasicPreloadedQueryBoundary extends r.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){let t=e.shouldSkipReport??!1,n={critical:this.props.critical||!1,reactAppName:this.props.appName};t||(0,l.N7)(e,n)}render(){let{children:e}=this.props,{error:t}=this.state,n=this.props.fallback||o;return t?n(this._retry,t):e}constructor(...e){super(...e),(0,i._)(this,"state",{error:null}),(0,i._)(this,"_retry",()=>{this.props.onRetry(),this.setState({error:null})})}};function d(e){let t=(0,r.useContext)(s.I),n=e.appName||t?.appName;return(0,a.jsx)(BasicPreloadedQueryBoundary,{...e,appName:n})}try{d.displayName||(d.displayName="PreloadedQueryBoundary")}catch{}},20263:(e,t,n)=>{"use strict";n.d(t,{BC:()=>o,JU:()=>c,Pk:()=>s});var i=n(74848),a=n(21998),r=n(99418),l=n(96540);let s=u(a.az),o=u(a.EY),d=(0,l.forwardRef)((e,t)=>(0,i.jsx)("div",{ref:t,...e}));d.displayName="Div";let c=u(d);function u(e){let t=(0,l.forwardRef)((t,n)=>{let{sanitizedHTML:a,props:l}=function(e){let{html:t,domPurifyConfig:n,...i}=e,a={...n,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{sanitizedHTML:r.default.sanitize(t,a),props:i}}(t);return(0,i.jsx)(e,{ref:n,...l,dangerouslySetInnerHTML:{__html:a}})});return t.displayName=`UnsafeHTML${e.displayName||e.name}`,t}try{c.displayName||(c.displayName="UnsafeHTMLDiv")}catch{}},81945:(e,t,n)=>{"use strict";n.d(t,{O:()=>d});var i=n(21998),a=n(38267);let r=(0,a.i7)(["0%{transform:translateX(-100%);}50%{transform:translateX(100%);}100%{transform:translateX(100%);}"]),l=(0,a.AH)(["animation:"," 1.5s infinite linear;"],r),s=(0,a.i7)(["0%{opacity:.3;}10%{opacity:1;}100%{opacity:.3;}"]),o=(0,a.AH)(["animation:"," 2s infinite linear;"],s),d=(0,a.Ay)(i.az).withConfig({displayName:"LoadingSkeleton",componentId:"sc-ff22872e-0"})(["position:relative;overflow:hidden;mask-image:radial-gradient(white,black);",";&::after{",";background:linear-gradient(90deg,transparent,",",transparent);content:'';position:absolute;transform:translateX(-100%);bottom:0;left:0;right:0;top:0;}background-color:",";border-radius:",";display:block;height:1.2em;"," width:",";height:",";",""],({animationStyle:e})=>"pulse"===e&&o,({animationStyle:e})=>"pulse"!==e&&l,(0,i.yB)("colors.neutral.subtle"),(0,i.yB)("colors.neutral.subtle"),({theme:e,variant:t})=>{switch(t){case"rounded":return(0,i.yB)("radii.1")(e);case"pill":return"100px";case"elliptical":return"50%";default:return"0"}},({variant:e})=>"elliptical"===e&&{borderRadius:"50%"},({width:e})=>{switch(e){case"random":return`${Math.floor(40*Math.random()+40)}%`;case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},({height:e})=>{switch(e){case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},i.sx);try{d.displayName||(d.displayName="LoadingSkeleton")}catch{}},40064:(e,t,n)=>{"use strict";n.d(t,{V:()=>m});var i=n(74848),a=n(96540),r=n(43258),l=n(38621),s=n(65556),o=n(16255);let d={info:"",success:"Toast--success",error:"Toast--error"},c={info:(0,i.jsx)(l.InfoIcon,{}),success:(0,i.jsx)(l.CheckIcon,{}),error:(0,i.jsx)(l.StopIcon,{})},u=({message:e,timeToLive:t,icon:n,type:r="info",role:l="log"})=>{let[u,m]=a.useState(!0),{safeSetTimeout:h}=(0,s.A)();return(0,a.useEffect)(()=>{t&&h(()=>m(!1),t-300)},[h,t]),(0,i.jsx)(o.Z,{children:(0,i.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,i.jsxs)("div",{className:`Toast ${d[r]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${r}`,role:l,children:[(0,i.jsx)("span",{className:"Toast-icon",children:n||c[r]}),(0,i.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,a.useContext)(r.T8);return(0,i.jsxs)(i.Fragment,{children:[e.map((e,t)=>(0,i.jsx)(u,{message:e.message,icon:e.icon,timeToLive:r.Qn,type:e.type,role:e.role},t)),t&&(0,i.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}},61388:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var i=n(36158),a=n(26261),r=n(66500),l=n(24880),s=class extends r.Q{#e;#t=void 0;#n;#i;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,l.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.EN)(t.mutationKey)!==(0,l.EN)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#r()}mutate(e,t){return this.#i=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#a(){let e=this.#n?.state??(0,i.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){a.jG.batch(()=>{if(this.#i&&this.hasListeners()){let t=this.#t.variables,n=this.#t.context;e?.type==="success"?(this.#i.onSuccess?.(e.data,t,n),this.#i.onSettled?.(e.data,null,t,n)):e?.type==="error"&&(this.#i.onError?.(e.error,t,n),this.#i.onSettled?.(void 0,e.error,t,n))}this.listeners.forEach(e=>{e(this.#t)})})}}},94747:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var i=n(96540),a=n(61388),r=n(26261),l=n(24880),s=n(97665);function o(e,t){let n=(0,s.jE)(t),[o]=i.useState(()=>new a._(n,e));i.useEffect(()=>{o.setOptions(e)},[o,e]);let d=i.useSyncExternalStore(i.useCallback(e=>o.subscribe(r.jG.batchCalls(e)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),c=i.useCallback((e,t)=>{o.mutate(e,t).catch(l.lQ)},[o]);if(d.error&&(0,l.GU)(o.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:c,mutateAsync:d.mutate}}},97286:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var i=n(1651),a=n(15985);function r(e,t){return(0,a.t)(e,i.$,t)}},47990:(e,t,n)=>{"use strict";function i(e,t,n){return Math.min(Math.max(e,n),t)}n.d(t,{BT:()=>p,Du:()=>a});let ColorError=class ColorError extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}};function a(e){if("string"!=typeof e)throw new ColorError(e);if("transparent"===e.trim().toLowerCase())return[0,0,0,0];let t=e.trim();t=m.test(e)?function(e){let t=l[function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0)%2341}(e.toLowerCase().trim())];if(!t)throw new ColorError(e);return`#${t}`}(e):e;let n=o.exec(t);if(n){let e=Array.from(n).slice(1);return[...e.slice(0,3).map(e=>parseInt(s(e,2),16)),parseInt(s(e[3]||"f",2),16)/255]}let a=d.exec(t);if(a){let e=Array.from(a).slice(1);return[...e.slice(0,3).map(e=>parseInt(e,16)),parseInt(e[3]||"ff",16)/255]}let r=c.exec(t);if(r){let e=Array.from(r).slice(1);return[...e.slice(0,3).map(e=>parseInt(e,10)),parseFloat(e[3]||"1")]}let h=u.exec(t);if(h){let[t,n,a,r]=Array.from(h).slice(1).map(parseFloat);if(i(0,100,n)!==n||i(0,100,a)!==a)throw new ColorError(e);return[...f(t,n,a),Number.isNaN(r)?1:r]}throw new ColorError(e)}let r=e=>parseInt(e.replace(/_/g,""),36),l="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{let n=r(t.substring(0,3)),i=r(t.substring(3)).toString(16),a="";for(let e=0;e<6-i.length;e++)a+="0";return e[n]=`${a}${i}`,e},{}),s=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),o=RegExp(`^#${s("([a-f0-9])",3)}([a-f0-9])?$`,"i"),d=RegExp(`^#${s("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),c=RegExp(`^rgba?\\(\\s*(\\d+)\\s*${s(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),u=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,m=/^[a-z]+$/i,h=e=>Math.round(255*e),f=(e,t,n)=>{let i=n/100;if(0===t)return[i,i,i].map(h);let a=(e%360+360)%360/60,r=t/100*(1-Math.abs(2*i-1)),l=r*(1-Math.abs(a%2-1)),s=0,o=0,d=0;a>=0&&a<1?(s=r,o=l):a>=1&&a<2?(s=l,o=r):a>=2&&a<3?(o=r,d=l):a>=3&&a<4?(o=l,d=r):a>=4&&a<5?(s=l,d=r):a>=5&&a<6&&(s=r,d=l);let c=i-r/2;return[s+c,o+c,d+c].map(h)};function p(e){let[t,n,i,r]=a(e).map((e,t)=>3===t?e:e/255),l=Math.max(t,n,i),s=Math.min(t,n,i),o=(l+s)/2;if(l===s)return[0,0,o,r];let d=l-s;return[60*(t===l?(n-i)/d+6*(n<i):n===l?(i-t)/d+2:(t-n)/d+4),o>.5?d/(2-l-s):d/(l+s),o,r]}},6907:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var i=n(2642),a=n(50622);function r(e,t){let n=(0,i.a)(e);if(isNaN(n.getTime()))throw RangeError("Invalid time value");let r=t?.format??"extended",l=t?.representation??"complete",s="",o="",d="extended"===r?"-":"";if("time"!==l){let e=(0,a.F)(n.getDate(),2),t=(0,a.F)(n.getMonth()+1,2),i=(0,a.F)(n.getFullYear(),4);s=`${i}${d}${t}${d}${e}`}if("date"!==l){let e=n.getTimezoneOffset();if(0!==e){let t=Math.abs(e),n=(0,a.F)(Math.trunc(t/60),2),i=(0,a.F)(t%60,2);o=`${e<0?"+":"-"}${n}:${i}`}else o="Z";let t=(0,a.F)(n.getHours(),2),i=(0,a.F)(n.getMinutes(),2),l=(0,a.F)(n.getSeconds(),2),d=""===s?"":"T",c=[t,i,l].join("extended"===r?":":"");s=`${s}${d}${c}${o}`}return s}},83592:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var i=n(2642);function a(e,t){let n=(0,i.a)(e),a=(0,i.a)(t);return n.getFullYear()===a.getFullYear()}},9802:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var i=n(83592);function a(e){return(0,i.s)(e,Date.now())}},79639:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var i=n(85551),a=n(40828);function r(e){return(0,i.r)(e,(0,a.e)(Date.now(),1))}},84929:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var i=n(2940);function a(e,t){let n,a,h=t?.additionalDigits??2,f=function(e){let t,n={},i=e.split(r.dateTimeDelimiter);if(i.length>2)return n;if(/:/.test(i[0])?t=i[0]:(n.date=i[0],t=i[1],r.timeZoneDelimiter.test(n.date)&&(n.date=e.split(r.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){let e=r.timezone.exec(t);e?(n.time=t.replace(e[1],""),n.timezone=e[1]):n.time=t}return n}(e);if(f.date){let e=function(e,t){let n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(n);if(!i)return{year:NaN,restDateString:""};let a=i[1]?parseInt(i[1]):null,r=i[2]?parseInt(i[2]):null;return{year:null===r?a:100*r,restDateString:e.slice((i[1]||i[2]).length)}}(f.date,h);n=function(e,t){var n,i,a,r,s,o,c;if(null===t)return new Date(NaN);let h=e.match(l);if(!h)return new Date(NaN);let f=!!h[4],p=d(h[1]),g=d(h[2])-1,y=d(h[3]),x=d(h[4]),b=d(h[5])-1;if(f){return(n=x,i=b,n>=1&&n<=53&&i>=0&&i<=6)?function(e,t,n){let i=new Date(0);i.setUTCFullYear(e,0,4);let a=i.getUTCDay()||7;return i.setUTCDate(i.getUTCDate()+((t-1)*7+n+1-a)),i}(t,x,b):new Date(NaN)}{let e=new Date(0);return(a=t,r=g,s=y,r>=0&&r<=11&&s>=1&&s<=(u[r]||(m(a)?29:28))&&(o=t,(c=p)>=1&&c<=(m(o)?366:365)))?(e.setUTCFullYear(t,g,Math.max(p,y)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);let p=n.getTime(),g=0;if(f.time&&isNaN(g=function(e){var t,n,a;let r=e.match(s);if(!r)return NaN;let l=c(r[1]),o=c(r[2]),d=c(r[3]);return(t=l,n=o,a=d,24===t?0===n&&0===a:a>=0&&a<60&&n>=0&&n<60&&t>=0&&t<25)?l*i.s0+o*i.Cg+1e3*d:NaN}(f.time)))return new Date(NaN);if(f.timezone){if(isNaN(a=function(e){var t;if("Z"===e)return 0;let n=e.match(o);if(!n)return 0;let a="+"===n[1]?-1:1,r=parseInt(n[2]),l=n[3]&&parseInt(n[3])||0;return(t=l)>=0&&t<=59?a*(r*i.s0+l*i.Cg):NaN}(f.timezone)))return new Date(NaN)}else{let e=new Date(p+g),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(p+g+a)}let r={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,o=/^([+-])(\d{2})(?::?(\d{2}))?$/;function d(e){return e?parseInt(e):1}function c(e){return e&&parseFloat(e.replace(",","."))||0}let u=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}}},e=>{e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_stacktrace-parser_dist_stack-trace-parser_esm_js-node_modules_github_bro-2f4e04","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-1fff13","vendors-node_modules_tanstack_query-core_build_modern_mutation_js-node_modules_tanstack_query-9bf7e4","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_hydro-analytics-c-2a6094","vendors-node_modules_tanstack_query-core_build_modern_queryClient_js-node_modules_tanstack_re-d87a32","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_lodash-es__isIterateeCa-89abd9","vendors-node_modules_github_hotkey_dist_index_js-node_modules_date-fns_getDaysInMonth_mjs-nod-70c11b","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-72228e","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_lit-labs_react_index_js-node_modules_tanstack_react-virtual_dist_esm_index_js","vendors-node_modules_swc_helpers_esm__define_property_js-node_modules_lodash-es__getAllKeys_j-86c8c2","vendors-node_modules_react-relay_index_js","vendors-node_modules_devlop_lib_default_js-node_modules_mdast-util-from-markdown_lib_index_js-cf17bf","vendors-node_modules_mdast-util-gfm_lib_index_js-node_modules_micromark-extension-gfm_index_js","vendors-node_modules_remark-parse_lib_index_js-node_modules_unified_lib_index_js","vendors-node_modules_codemirror_language_dist_index_js","vendors-node_modules_react-markdown_lib_index_js","vendors-node_modules_codemirror_commands_dist_index_js","vendors-node_modules_hastscript_lib_index_js-node_modules_lowlight_lib_all_js-node_modules_re-376063","vendors-node_modules_fzy_js_index_js-node_modules_github_g-emoji-element_dist_index_js-node_m-11dcf6","vendors-node_modules_github_catalyst_lib_index_js-node_modules_primer_styled-react_dist_index-d380a0","packages_paths_index_ts","packages_ui-commands_ui-commands_ts","packages_date-picker_components_DatePicker_tsx","packages_drag-and-drop_drag-and-drop_ts-packages_hydro-analytics_hydro-analytics_ts","packages_list-view_src_hooks_use-next-header-tag_ts-packages_list-view_src_ListItem_ListItem_-055669","packages_ref-selector_RefSelector_tsx","packages_copilot-chat_utils_copilot-local-storage_ts","packages_item-picker_components_RepositoryPicker_tsx-packages_safe-html_VerifiedHTML_tsx","packages_copilot-markdown_MarkdownRenderer_tsx","packages_history_history_ts-packages_relay-environment_relay-environment_ts-packages_soft-nav-84fffc","packages_use-client-value_use-client-value_ts-packages_issue-create_dialog_CreateIssueDialogE-144424","packages_commenting_constants_values_ts-packages_react-profiling-mode_src_index_ts-packages_a-2e187b","packages_copilot-chat_components_CopilotIconAnimation_tsx","packages_app-uuid_app-uuid_ts-packages_signed-commit-badge_index_ts","packages_diff-file-header_diff-file-header_ts-packages_document-metadata_document-metadata_ts-632264","packages_commit-attribution_index_ts-packages_commit-checks-status_index_ts-packages_current--18e2dc","packages_diff-file-tree_diff-file-tree-helpers_ts-packages_diff-view-settings_page-data_paylo-f5bc12","packages_use-hide-footer_use-hide-footer_ts-packages_commits_shared_use-tree-pane_tsx-package-9c5f33","packages_code-view-shared_utilities_web-worker_ts-packages_code-view-shared_worker-jobs_debou-52b466"],()=>e(e.s=75218)),e.O()}]);
//# sourceMappingURL=commits-9b91530faeff.js.map